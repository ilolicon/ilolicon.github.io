<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An open-source programming language supported by Google."><title>Golang</title><link rel=canonical href=https://ilolicon.github.io/p/golang/><link rel=stylesheet href=/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css><meta property="og:title" content="Golang"><meta property="og:description" content="An open-source programming language supported by Google."><meta property="og:url" content="https://ilolicon.github.io/p/golang/"><meta property="og:site_name" content="ilolicon's Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Cloud Native"><meta property="article:tag" content="Golang"><meta property="article:published_time" content="2021-06-29T17:03:46+08:00"><meta property="article:modified_time" content="2021-06-29T17:03:46+08:00"><meta name=twitter:title content="Golang"><meta name=twitter:description content="An open-source programming language supported by Google."><link rel="shortcut icon" href=/img/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu96a5ab8e0364e843af4687201b687892_162934_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>ilolicon's Blog</a></h1><h2 class=site-description>Keep Calm and Carry On.</h2></div></header><ol class=social-menu><li><a href=https://github.com/ilolicon target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com target=_blank title=Twitter rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ç¯å¢ƒå‡†å¤‡>ç¯å¢ƒå‡†å¤‡</a><ol><li><a href=#å®‰è£…>å®‰è£…</a></li><li><a href=#é…ç½®>é…ç½®</a></li><li><a href=#ç¼–è¾‘å™¨>ç¼–è¾‘å™¨</a></li><li><a href=#è¿è¡Œç¨‹åº>è¿è¡Œç¨‹åº</a></li></ol></li><li><a href=#åŸºæœ¬è¯­æ³•>åŸºæœ¬è¯­æ³•</a><ol><li><a href=#åŸºæœ¬ç»“æ„>åŸºæœ¬ç»“æ„</a></li><li><a href=#ç®€å•ç¤ºä¾‹>ç®€å•ç¤ºä¾‹</a></li><li><a href=#åŸºæœ¬ç»„æˆå…ƒç´ >åŸºæœ¬ç»„æˆå…ƒç´ </a></li></ol></li><li><a href=#å˜é‡å¸¸é‡å£°æ˜>å˜é‡å¸¸é‡å£°æ˜</a><ol><li><a href=#å˜é‡å£°æ˜>å˜é‡å£°æ˜</a></li><li><a href=#å¸¸é‡å£°æ˜>å¸¸é‡å£°æ˜</a></li><li><a href=#constå®ç°æšä¸¾>constå®ç°æšä¸¾</a></li><li><a href=#è®¡ç®—èµ‹å€¼>è®¡ç®—èµ‹å€¼</a></li><li><a href=#ç®€çŸ­å£°æ˜>ç®€çŸ­å£°æ˜</a></li></ol></li><li><a href=#æ•°æ®ç±»å‹>æ•°æ®ç±»å‹</a><ol><li><a href=#åŸºç¡€æ•°æ®ç±»å‹>åŸºç¡€æ•°æ®ç±»å‹</a><ol><li><a href=#å¸ƒå°”ç±»å‹>å¸ƒå°”ç±»å‹</a></li><li><a href=#æ•´æ•°ç±»å‹>æ•´æ•°ç±»å‹</a></li><li><a href=#æµ®ç‚¹ç±»å‹>æµ®ç‚¹ç±»å‹</a></li><li><a href=#å¤æ•°ç±»å‹>å¤æ•°ç±»å‹</a></li><li><a href=#å­—ç¬¦ä¸²ç±»å‹>å­—ç¬¦ä¸²ç±»å‹</a></li><li><a href=#ç±»å‹è½¬æ¢>ç±»å‹è½¬æ¢</a></li><li><a href=#æŒ‡é’ˆç±»å‹>æŒ‡é’ˆç±»å‹</a></li></ol></li><li><a href=#å¤åˆæ•°æ®ç±»å‹>å¤åˆæ•°æ®ç±»å‹</a><ol><li><a href=#æ•°ç»„array>æ•°ç»„(array)</a></li><li><a href=#åˆ‡ç‰‡slice>åˆ‡ç‰‡(slice)</a></li><li><a href=#æ˜ å°„map>æ˜ å°„(map)</a></li><li><a href=#æ˜¾ç¤ºåˆå§‹åŒ–å€¼>æ˜¾ç¤ºåˆå§‹åŒ–å€¼</a></li></ol></li></ol></li><li><a href=#å‡½æ•°>å‡½æ•°</a><ol><li><a href=#åŠŸèƒ½>åŠŸèƒ½</a></li><li><a href=#å®šä¹‰è°ƒç”¨>å®šä¹‰/è°ƒç”¨</a><ol><li><a href=#å‡½æ•°åç§°>å‡½æ•°åç§°</a></li><li><a href=#å‡½æ•°å‚æ•°å½¢å‚>å‡½æ•°å‚æ•°(å½¢å‚)</a></li><li><a href=#è¿”å›å€¼>è¿”å›å€¼</a></li><li><a href=#å‡½æ•°è°ƒç”¨>å‡½æ•°è°ƒç”¨</a></li></ol></li><li><a href=#é€’å½’>é€’å½’</a></li><li><a href=#å‡½æ•°ç±»å‹>å‡½æ•°ç±»å‹</a></li><li><a href=#åŒ¿åå‡½æ•°>åŒ¿åå‡½æ•°</a></li><li><a href=#é—­åŒ…>é—­åŒ…</a></li><li><a href=#ç±»å‹>ç±»å‹</a><ol><li><a href=#å€¼ç±»å‹>å€¼ç±»å‹</a></li><li><a href=#å¼•ç”¨ç±»å‹>å¼•ç”¨ç±»å‹</a></li></ol></li><li><a href=#å€¼ä¼ é€’>å€¼ä¼ é€’</a></li><li><a href=#é”™è¯¯å¤„ç†>é”™è¯¯å¤„ç†</a><ol><li><a href=#panicæŠ›å‡ºé”™è¯¯>panicæŠ›å‡ºé”™è¯¯</a></li><li><a href=#æ•è·é”™è¯¯>æ•è·é”™è¯¯</a></li><li><a href=#å»¶è¿Ÿæ‰§è¡Œ>å»¶è¿Ÿæ‰§è¡Œ</a></li><li><a href=#deferæ³¨æ„äº‹é¡¹>deferæ³¨æ„äº‹é¡¹</a></li></ol></li></ol></li><li><a href=#ä½œç”¨åŸŸ>ä½œç”¨åŸŸ</a><ol><li><a href=#æ˜¾å¼ä½œç”¨åŸŸ>æ˜¾å¼ä½œç”¨åŸŸ</a></li></ol></li><li><a href=#éšå¼ä½œç”¨åŸŸ>éšå¼ä½œç”¨åŸŸ</a></li><li><a href=#æµç¨‹æ§åˆ¶>æµç¨‹æ§åˆ¶</a><ol><li><a href=#if>if</a></li><li><a href=#switch>switch</a></li><li><a href=#for>for</a></li><li><a href=#goto>goto</a></li></ol></li><li><a href=#å•æ­¥è°ƒè¯•å·¥å…·-dlv>å•æ­¥è°ƒè¯•å·¥å…· dlv</a></li><li><a href=#åŒ…ç®¡ç†æ¨¡å—>åŒ…ç®¡ç†/æ¨¡å—</a><ol><li><a href=#gopath--vendor>GOPATH + vendor</a></li><li><a href=#module>MODULE</a></li></ol></li><li><a href=#å¯¼å…¥æ€»ç»“>å¯¼å…¥æ€»ç»“</a><ol><li><a href=#initå‡½æ•°>initå‡½æ•°</a><ol><li><a href=#å¯è§æ€§>å¯è§æ€§</a></li></ol></li></ol></li><li><a href=#æ ‡å‡†åº“åŠç¬¬ä¸‰æ–¹åº“>æ ‡å‡†åº“åŠç¬¬ä¸‰æ–¹åº“</a><ol><li><a href=#fmt>fmt</a></li><li><a href=#strconv>strconv</a></li><li><a href=#strings>strings</a></li><li><a href=#sync>sync</a><ol><li><a href=#syncatomic>sync.atomic</a></li><li><a href=#syncmutexrwmutex>sync.Mutex/RWMutex</a></li><li><a href=#syncmap>sync.Map</a></li><li><a href=#synconce>sync.Once</a></li><li><a href=#syncpool>sync.Pool</a></li></ol></li><li><a href=#runtime>runtime</a></li><li><a href=#logr>logr</a><ol><li><a href=#logrus>logrus</a></li><li><a href=#zap>zap</a></li></ol></li></ol></li><li><a href=#é¢å‘å¯¹è±¡>é¢å‘å¯¹è±¡</a><ol><li><a href=#è‡ªå®šä¹‰ç±»å‹>è‡ªå®šä¹‰ç±»å‹</a></li><li><a href=#å®šä¹‰>å®šä¹‰</a></li><li><a href=#åˆ«åä¸é‡å®šä¹‰>åˆ«åä¸é‡å®šä¹‰</a></li><li><a href=#ç»“æ„ä½“>ç»“æ„ä½“</a></li><li><a href=#åŒ¿åç»“æ„ä½“>åŒ¿åç»“æ„ä½“</a></li><li><a href=#new-å’Œ-makeçš„åŒºåˆ«>new å’Œ makeçš„åŒºåˆ«</a></li><li><a href=#ç»“æ„ä½“åµŒå¥—åµŒå…¥ç»„åˆ>ç»“æ„ä½“åµŒå¥—(åµŒå…¥/ç»„åˆ)</a></li><li><a href=#æ–¹æ³•>æ–¹æ³•</a><ol><li><a href=#å®šä¹‰-1>å®šä¹‰</a></li><li><a href=#å¯è§æ€§-1>å¯è§æ€§</a></li><li><a href=#æ–¹æ³•è¡¨è¾¾å¼>æ–¹æ³•è¡¨è¾¾å¼</a></li><li><a href=#æ–¹æ³•å€¼>æ–¹æ³•å€¼</a></li></ol></li></ol></li><li><a href=#æ–‡ä»¶æ“ä½œ>æ–‡ä»¶æ“ä½œ</a><ol><li><a href=#æ–‡ä»¶è·¯å¾„>æ–‡ä»¶è·¯å¾„</a></li><li><a href=#æ“ä½œ>æ“ä½œ</a></li><li><a href=#ç›®å½•æ“ä½œ>ç›®å½•æ“ä½œ</a></li><li><a href=#æ–‡ä»¶æ“ä½œæœ‰å…³å·¥å…·ç±»>æ–‡ä»¶æ“ä½œæœ‰å…³å·¥å…·ç±»</a></li><li><a href=#å¸¦ç¼“å†²åŒºio>å¸¦ç¼“å†²åŒºIO</a></li><li><a href=#å‡ ä¸ªç»“æ„ä½“>å‡ ä¸ªç»“æ„ä½“</a></li><li><a href=#æ–‡ä»¶æ ¼å¼>æ–‡ä»¶æ ¼å¼</a><ol><li><a href=#gob>gob</a></li><li><a href=#csv>csv</a></li></ol></li></ol></li><li><a href=#æ¥å£>æ¥å£</a><ol><li><a href=#å®šä¹‰èµ‹å€¼>å®šä¹‰/èµ‹å€¼</a></li><li><a href=#ç»“æ„ä½“èµ‹å€¼æ¥å£ç±»å‹>ç»“æ„ä½“èµ‹å€¼æ¥å£ç±»å‹</a></li><li><a href=#æ¥å£èµ‹å€¼æ¥å£>æ¥å£èµ‹å€¼æ¥å£</a></li><li><a href=#ç±»å‹æ–­è¨€>ç±»å‹æ–­è¨€</a></li><li><a href=#å¤šä¸ªç±»å‹æ–­è¨€>å¤šä¸ªç±»å‹æ–­è¨€</a></li><li><a href=#æ¥å£åµŒå…¥>æ¥å£åµŒå…¥</a></li><li><a href=#åŒ¿åæ¥å£>åŒ¿åæ¥å£</a></li><li><a href=#ç©ºæ¥å£åŠå…¶ä½¿ç”¨>ç©ºæ¥å£åŠå…¶ä½¿ç”¨</a></li></ol></li><li><a href=#jsonåºåˆ—åŒ–ååºåˆ—åŒ–>Jsonåºåˆ—åŒ–/ååºåˆ—åŒ–</a><ol><li><a href=#encodingjson>encoding/json</a></li><li><a href=#åŸºæœ¬æ•°æ®ç±»å‹json-è½¬æ¢>åŸºæœ¬æ•°æ®ç±»å‹/json è½¬æ¢</a></li><li><a href=#è‡ªå®šä¹‰æ•°æ®ç±»å‹jsonè½¬æ¢>è‡ªå®šä¹‰æ•°æ®ç±»å‹/jsonè½¬æ¢</a></li><li><a href=#è‡ªå®šä¹‰åµŒå…¥ç»“æ„ä½“-è½¬æ¢>è‡ªå®šä¹‰åµŒå…¥ç»“æ„ä½“ è½¬æ¢</a></li><li><a href=#jsonvalid>json.Valid</a></li><li><a href=#å¯¹æµçš„æ“ä½œ>å¯¹æµçš„æ“ä½œ</a></li><li><a href=#jsonrawmessage>json.RawMessage</a></li><li><a href=#marshaljsonunmarshaljson>MarshalJSON/UnmarshalJSON</a></li></ol></li><li><a href=#åå°„>åå°„</a><ol><li><a href=#é€šè¿‡åå°„å®ç°ç®€å•çš„orm>é€šè¿‡åå°„å®ç°ç®€å•çš„ORM</a></li></ol></li><li><a href=#goå¹¶å‘>Goå¹¶å‘</a><ol><li><a href=#ä¸»ä¾‹ç¨‹>ä¸»ä¾‹ç¨‹</a></li><li><a href=#è®¡æ•°ä¿¡å·é‡waitgroup>è®¡æ•°ä¿¡å·é‡/WaitGroup</a></li><li><a href=#é—­åŒ…é™·é˜±>é—­åŒ…é™·é˜±</a></li><li><a href=#å¹¶å‘é€šä¿¡åŠ é”>å¹¶å‘é€šä¿¡/åŠ é”</a></li><li><a href=#å¹¶å‘é€šä¿¡ç®¡é“>å¹¶å‘é€šä¿¡/ç®¡é“</a><ol><li><a href=#channelå®ç°waitgroup>channelå®ç°WaitGroup</a></li><li><a href=#å¸¦ç¼“å†²åŒºchannel>å¸¦ç¼“å†²åŒºchannel</a></li><li><a href=#å…³é—­ç®¡é“>å…³é—­ç®¡é“</a></li><li><a href=#ç®¡é“å¾ªç¯>ç®¡é“å¾ªç¯</a></li><li><a href=#å¹¶å‘ä¸‹è½½å›¾ç‰‡ç¤ºä¾‹>å¹¶å‘ä¸‹è½½å›¾ç‰‡ç¤ºä¾‹</a></li><li><a href=#ç®¡é“ç±»å‹è¯»å†™ç®¡é“>ç®¡é“ç±»å‹/è¯»å†™ç®¡é“</a></li><li><a href=#selectcase>selectcase</a></li><li><a href=#ç¤ºä¾‹>ç¤ºä¾‹</a></li><li><a href=#contextä¸Šä¸‹æ–‡>contextä¸Šä¸‹æ–‡</a></li></ol></li><li><a href=#ç®€å•çš„socketserver>ç®€å•çš„SocketServer</a><ol><li><a href=#servergo>server.go</a></li><li><a href=#clientgo>client.go</a></li></ol></li></ol></li><li><a href=#goä½¿ç”¨ç§æœ‰ä»“åº“>Goä½¿ç”¨ç§æœ‰ä»“åº“</a></li><li><a href=#reference-link>Reference Link</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/golang/ style=background-color:#38a8d2;color:#fff>Golang</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/golang/>Golang</a></h2><h3 class=article-subtitle>An open-source programming language supported by Google.</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Jun 29, 2021</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é˜…è¯»æ—¶é•¿: 85 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h2 id=ç¯å¢ƒå‡†å¤‡>ç¯å¢ƒå‡†å¤‡</h2><h3 id=å®‰è£…>å®‰è£…</h3><p><a class=link href=https://golang.google.cn/ target=_blank rel=noopener>å®˜ç½‘ä¸‹è½½å®‰è£…</a></p><ul><li>Windwosä¸‹è½½go.msiå®‰è£…</li><li>Linuxä¸‹è½½go.tar.gz</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>è§£å‹: tar -xzvf go.tar.gz -C /usr/local/
</span></span><span class=line><span class=cl>é…ç½®ç¯å¢ƒå˜é‡<span class=o>(</span>windowså®‰è£…ä¼šè‡ªåŠ¨é…ç½®<span class=o>)</span>
</span></span><span class=line><span class=cl>  go <span class=nv>$PATH</span>
</span></span><span class=line><span class=cl>  <span class=nv>GOROOT</span> <span class=o>=</span>&gt; goå®‰è£…è·¯å¾„
</span></span><span class=line><span class=cl>  <span class=nv>GOPATH</span> <span class=o>=</span>&gt; <span class=nv>$HOME</span>/go
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®>é…ç½®</h3><p><a class=link href=https://goproxy.cn/ target=_blank rel=noopener>Goæ¨¡å—ä»£ç†</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>GO111MODULE</span><span class=o>=</span>on    <span class=c1># goæ¨¡å—ç®¡ç†</span>
</span></span><span class=line><span class=cl><span class=nv>GOPROXY</span><span class=o>=</span>https://goproxy.cn,direct  <span class=c1># ä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…ç½‘ç»œæœ‰é—®é¢˜çš„æ—¶å€™è®¾ç½®ä»£ç†</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Windows</span>
</span></span><span class=line><span class=cl>1. ç›´æ¥é…ç½®åˆ°ç¯å¢ƒå˜é‡<span class=o>(</span>ä¼˜å…ˆçº§é«˜<span class=o>)</span> <span class=o>=</span>&gt; ç³»ç»Ÿ - é«˜çº§è®¾ç½® - æ–°å¢ç¯å¢ƒå˜é‡
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2. é…ç½®åˆ°go env
</span></span><span class=line><span class=cl>   go env -w <span class=nv>GO111MODULE</span><span class=o>=</span>on  <span class=c1># å†™å…¥goç¯å¢ƒå˜é‡</span>
</span></span><span class=line><span class=cl>   go env -w <span class=nv>GOPROXY</span><span class=o>=</span>https://goproxy.cn,direct
</span></span><span class=line><span class=cl>           
</span></span><span class=line><span class=cl><span class=c1># Linux </span>
</span></span><span class=line><span class=cl><span class=c1># é…ç½®è„šæœ¬ /etc/profile.d/go.sh</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;x&#34;</span> <span class=o>==</span> <span class=s2>&#34;x</span><span class=si>${</span><span class=nv>GOROOT</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>GOROOT</span><span class=o>=</span>/usr/local/go
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>GOPATH</span><span class=o>=</span><span class=si>${</span><span class=nv>HOME</span><span class=si>}</span>/go
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=si>${</span><span class=nv>PATH</span><span class=si>}</span>:<span class=si>${</span><span class=nv>GOROOT</span><span class=si>}</span>/bin:<span class=si>${</span><span class=nv>GOPATH</span><span class=si>}</span>/bin
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç¼–è¾‘å™¨>ç¼–è¾‘å™¨</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vscode + æ’ä»¶å³å¯
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ctrl + <span class=nb>shift</span> + p -&gt; go install/update tools -&gt; å…¨é€‰å®‰è£…æ’ä»¶
</span></span></code></pre></td></tr></table></div></div><h3 id=è¿è¡Œç¨‹åº>è¿è¡Œç¨‹åº</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// goå·¥å…·é“¾
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>go</span> <span class=nx>build</span> <span class=nx>hello</span><span class=p>.</span><span class=k>go</span> <span class=c1>// ç¼–è¯‘
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>go</span> <span class=nx>run</span> <span class=nx>hello</span><span class=p>.</span><span class=k>go</span>   <span class=c1>// ç¼–è¯‘+è¿è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=err>å¸¸ç”¨å‚æ•°ï¼š</span>
</span></span><span class=line><span class=cl><span class=o>-</span><span class=nx>x</span>    <span class=c1>// æ‰“å°æ‰§è¡Œå‘½ä»¤
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>-</span><span class=nx>n</span>    <span class=c1>// åªæ‰“å°ç¼–è¯‘è¿‡ç¨‹ å¹¶ä¸æ‰§è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>-</span><span class=nx>o</span>    <span class=c1>// æ‰§è¡Œç¨‹åºè¾“å‡ºåç§°
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>-</span><span class=nx>work</span> <span class=c1>// ä¿ç•™å·¥ä½œç›®å½•
</span></span></span></code></pre></td></tr></table></div></div><h2 id=åŸºæœ¬è¯­æ³•>åŸºæœ¬è¯­æ³•</h2><h3 id=åŸºæœ¬ç»“æ„>åŸºæœ¬ç»“æ„</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=cm>/* 
</span></span></span><span class=line><span class=cl><span class=cm>å£°æ˜åŒ… goè¦æ±‚æ¯ä¸ªæºç éƒ½æœ‰å±äºçš„åŒ…
</span></span></span><span class=line><span class=cl><span class=cm>æ ¼å¼ï¼špackage åŒ…å
</span></span></span><span class=line><span class=cl><span class=cm>åŒ…åï¼šç›®å‰é˜¶æ®µå®šä¹‰ä¸ºmain
</span></span></span><span class=line><span class=cl><span class=cm>å£°æ˜åŒ…å¿…é¡»åœ¨æºç çš„ç¬¬ä¸€è¡Œ åŒ…å£°æ˜å‰é¢å¯ä»¥åŒ…å«æ³¨é‡Š
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¯¼å…¥åŒ…ï¼šä½¿ç”¨æ ‡å‡†åŒ…æˆ–ç¬¬ä¸‰æ–¹åŒ…éœ€è¦å…ˆå¯¼å…¥
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç›®å‰é˜¶æ®µè®¤ä¸º mainå‡½æ•°ä¸ºç¨‹åºå…¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Hello, Golang&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç®€å•ç¤ºä¾‹>ç®€å•ç¤ºä¾‹</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// var å®šä¹‰å˜é‡r ç±»å‹ä¸ºfloat64 å€¼ä¸º10
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>r</span> <span class=kt>float64</span> <span class=p>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>confirm</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// constå®šä¹‰å¸¸é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>const</span> <span class=nx>pi</span> <span class=kt>float64</span> <span class=p>=</span> <span class=mf>3.1415926</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// ä»æ§åˆ¶å°ä¸Šè¯»å–æ•°æ®
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;è¯·è¾“å…¥åŠå¾„ï¼š&#34;</span><span class=p>)</span> <span class=c1>// æ‰“å°å†…å®¹ä¹‹åä¸ä¼šåŠ æ¢è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Scan</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>r</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// è®¡ç®—åœ†å½¢é¢ç§¯
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>pi</span> <span class=o>*</span> <span class=nx>r</span> <span class=o>*</span> <span class=nx>r</span><span class=p>)</span> <span class=c1>// æ‰“å°å†…å®¹ä¹‹åè‡ªåŠ¨æ¢è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=c1>// ä»æ§åˆ¶å°æ¥æ”¶æ˜¯å¦ç»§ç»­çš„æ•°æ®
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;æ˜¯å¦ç»§ç»­(y/n)?&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Scan</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>confirm</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>confirm</span> <span class=o>!=</span> <span class=s>&#34;y&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=åŸºæœ¬ç»„æˆå…ƒç´ >åŸºæœ¬ç»„æˆå…ƒç´ </h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>1. æ ‡è¯†ç¬¦
</span></span><span class=line><span class=cl>2. å…³é”®å­—
</span></span><span class=line><span class=cl>3. å­—é¢é‡
</span></span><span class=line><span class=cl>4. æ“ä½œç¬¦
</span></span><span class=line><span class=cl>5. åˆ†éš”ç¬¦
</span></span></code></pre></td></tr></table></div></div><h2 id=å˜é‡å¸¸é‡å£°æ˜>å˜é‡å¸¸é‡å£°æ˜</h2><h3 id=å˜é‡å£°æ˜>å˜é‡å£°æ˜</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å˜é‡å£°æ˜: var
</span></span></span><span class=line><span class=cl><span class=c1>// var æ ‡è¯†ç¬¦ ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å®šä¹‰å…¨å±€å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>version</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;1.1.1&#34;</span> <span class=c1>// æ˜¾ç¤ºèµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// goä¸­è¦æ±‚å±€éƒ¨å˜é‡å®šä¹‰åå¿…é¡»ä½¿ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å®šä¹‰å±€éƒ¨å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// æœªå¯¹å±€éƒ¨å˜é‡è¿›è¡Œæ˜¾ç¤ºå¤åˆ¶ goä¼šå¯¹å˜é‡è®¾ç½®é»˜è®¤å€¼(é›¶å€¼)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// string é›¶å€¼ï¼š ç©ºå­—ç¬¦ä¸² &#34;&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>funcVersion</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// çœç•¥ç±»å‹ å¸®ä½ å¾æ˜¾ç¤ºè®¾ç½®é»˜è®¤å€¼ goæ ¹æ®å­—é¢é‡æˆ–èµ‹å€¼çš„å€¼ç±»å‹è¿›è¡Œæ¨å¯¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>name</span> <span class=p>=</span> <span class=s>&#34;minho&#34;</span> <span class=c1>// =&gt; var name string = &#34;minho&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ‰¹é‡å®šä¹‰ æ²¡è®¾ç½®é»˜è®¤å€¼éœ€è¦æŒ‡å®šç±»å‹ è®¾ç½®é»˜è®¤å€¼å¯ä»¥ä¸æŒ‡å®šç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>a1</span>      <span class=kt>int</span>
</span></span><span class=line><span class=cl>        <span class=nx>a2</span>      <span class=kt>string</span>
</span></span><span class=line><span class=cl>        <span class=nx>a3</span>      <span class=kt>int</span>    <span class=p>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>        <span class=nx>a4</span>      <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;aaa&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nx>a5</span>             <span class=p>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>        <span class=nx>a6</span>             <span class=p>=</span> <span class=s>&#34;666&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nx>a9</span><span class=p>,</span> <span class=nx>a10</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>a7</span><span class=p>,</span> <span class=nx>a8</span> <span class=kt>string</span> <span class=c1>// ç±»å‹ä¸€æ ·
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>a11</span><span class=p>,</span> <span class=nx>a12</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;a11&#34;</span><span class=p>,</span> <span class=s>&#34;a12&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>funcVersion</span><span class=p>,</span> <span class=nx>version</span><span class=p>,</span> <span class=nx>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a1</span><span class=p>,</span> <span class=nx>a2</span><span class=p>,</span> <span class=nx>a3</span><span class=p>,</span> <span class=nx>a4</span><span class=p>,</span> <span class=nx>a5</span><span class=p>,</span> <span class=nx>a6</span><span class=p>,</span> <span class=nx>a7</span><span class=p>,</span> <span class=nx>a8</span><span class=p>,</span> <span class=nx>a9</span><span class=p>,</span> <span class=nx>a10</span><span class=p>,</span> <span class=nx>a11</span><span class=p>,</span> <span class=nx>a12</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å¸¸é‡å£°æ˜>å¸¸é‡å£°æ˜</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å¸¸é‡å£°æ˜: const
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=nx>version</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;2.2.2&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¸¸é‡å¿…é¡»æ˜¾ç¤ºè®¾ç½®é»˜è®¤å€¼(å› ä¸ºå¸¸é‡å®šä¹‰ä¹‹åå°±ä¸èƒ½ä¿®æ”¹)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>const</span> <span class=nx>funcVersion</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>const</span> <span class=nx>pi</span> <span class=p>=</span> <span class=mf>3.141592653</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>a1</span>     <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;222222&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nx>a2</span>     <span class=kt>int</span>    <span class=p>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>        <span class=nx>a3</span><span class=p>,</span> <span class=nx>a4</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;1&#34;</span><span class=p>,</span> <span class=s>&#34;2&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>const</span> <span class=nx>a5</span><span class=p>,</span> <span class=nx>a6</span> <span class=p>=</span> <span class=s>&#34;111&#34;</span><span class=p>,</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>e1</span> <span class=p>=</span> <span class=s>&#34;aaa&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nx>e2</span> <span class=c1>// consté‡Œé¢ åªå®šä¹‰æ ‡è¯†ç¬¦ ä½¿ç”¨ä¸Šä¸€è¡Œçš„å¸¸é‡æ ‡è¯†ç¬¦çš„å€¼æ¥è¿›è¡Œèµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>e3</span>
</span></span><span class=line><span class=cl>        <span class=nx>e4</span>
</span></span><span class=line><span class=cl>        <span class=nx>e5</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=nx>e6</span>
</span></span><span class=line><span class=cl>        <span class=nx>e7</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>version</span><span class=p>,</span> <span class=nx>funcVersion</span><span class=p>,</span> <span class=nx>pi</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a1</span><span class=p>,</span> <span class=nx>a2</span><span class=p>,</span> <span class=nx>a3</span><span class=p>,</span> <span class=nx>a4</span><span class=p>,</span> <span class=nx>a5</span><span class=p>,</span> <span class=nx>a6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>e1</span><span class=p>,</span> <span class=nx>e2</span><span class=p>,</span> <span class=nx>e3</span><span class=p>,</span> <span class=nx>e4</span><span class=p>,</span> <span class=nx>e5</span><span class=p>,</span> <span class=nx>e6</span><span class=p>,</span> <span class=nx>e7</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=constå®ç°æšä¸¾>constå®ç°æšä¸¾</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// const + iotaå®ç°æšä¸¾
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>e1</span> <span class=p>=</span> <span class=kc>iota</span> <span class=c1>// 0  iota åœ¨å°æ‹¬å·å†…åˆå§‹åŒ–ä¸º0 æ¯è°ƒç”¨ä¸€æ¬¡+1
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>e2</span>        <span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>e3</span>        <span class=c1>// 2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// enum æšä¸¾ e.g: æ˜ŸæœŸå‡  1ã€2ã€3ã€4ã€5ã€6ã€7
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// iota ç»“åˆconstä½¿ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>a1</span> <span class=p>=</span> <span class=kc>iota</span> <span class=c1>// 0  åœ¨æ¯ä¸ªå°æ‹¬å·å†…éƒ½ä¼šåˆå§‹åŒ–
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>a2</span>
</span></span><span class=line><span class=cl>        <span class=nx>a3</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>e1</span><span class=p>,</span> <span class=nx>e2</span><span class=p>,</span> <span class=nx>e3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a1</span><span class=p>,</span> <span class=nx>a2</span><span class=p>,</span> <span class=nx>a3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=è®¡ç®—èµ‹å€¼>è®¡ç®—èµ‹å€¼</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å˜é‡èµ‹å€¼ï¼šå¯ä»¥é€šè¿‡ä»»æ„è¡¨è¾¾å¼è®¡ç®—ç»“æœèµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>a1</span> <span class=p>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>a2</span> <span class=p>=</span> <span class=nx>a1</span> <span class=o>+</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>a3</span> <span class=p>=</span> <span class=nx>a1</span> <span class=o>+</span> <span class=nx>a2</span> <span class=c1>// å˜é‡/å¸¸é‡èµ‹å€¼ é™¤äº†å­—é¢é‡ è¿˜å¯ä»¥æ˜¯è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¸¸é‡èµ‹å€¼ï¼šåªèƒ½é€šè¿‡å­—é¢é‡/å­—é¢é‡è®¡ç®—ç»“æœ/å¸¸é‡è®¡ç®—ç»“æœ/å¸¸é‡ç»è¿‡æŸäº›å‡½æ•°è®¡ç®—çš„ç»“æœ èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>const</span> <span class=nx>e1</span> <span class=p>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=kd>const</span> <span class=nx>e2</span> <span class=p>=</span> <span class=nx>e1</span> <span class=o>+</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=kd>const</span> <span class=nx>e3</span> <span class=p>=</span> <span class=nx>e1</span> <span class=o>*</span> <span class=nx>e2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>a4</span> <span class=p>=</span> <span class=nx>a3</span> <span class=o>+</span> <span class=nx>e3</span>
</span></span><span class=line><span class=cl>    <span class=c1>// const a4 = a3 + e3  // æŠ¥é”™ a3æ˜¯å˜é‡çš„è®¡ç®—ç»“æœ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>e3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a4</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç®€çŸ­å£°æ˜>ç®€çŸ­å£°æ˜</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// var xx int
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç®€çŸ­å£°æ˜ï¼šé€šè¿‡å€¼æ¥æ¨å¯¼æ ‡è¯†ç¬¦ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// é—®é¢˜ï¼š
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ç®€çŸ­å£°æ˜åªèƒ½ç”¨åœ¨å±€éƒ¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¤šç§æ•°æ®ç±»å‹ä½¿ç”¨åŒä¸€ä¸ªå­—é¢é‡æ ‡è¯† åªèƒ½æ¨å¯¼ä¸ºé»˜è®¤ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// æ¯”å¦‚ï¼šæ•´æ•° byte int int8 int16 int32 int 64 unit
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>name</span> <span class=o>:=</span> <span class=s>&#34;minho&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span> <span class=o>:=</span> <span class=mi>1</span> <span class=c1>// åªèƒ½é»˜è®¤æ¨å¯¼ä¸ºint å¦‚æœæƒ³å®šä¹‰idä¸ºint64 ä¸èƒ½ä½¿ç”¨ç®€çŸ­ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=æ•°æ®ç±»å‹>æ•°æ®ç±»å‹</h2><h3 id=åŸºç¡€æ•°æ®ç±»å‹>åŸºç¡€æ•°æ®ç±»å‹</h3><h4 id=å¸ƒå°”ç±»å‹>å¸ƒå°”ç±»å‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>å«ä¹‰ï¼š</span>        <span class=err>è¡¨ç¤ºçœŸå‡</span>
</span></span><span class=line><span class=cl><span class=err>ç±»å‹å</span><span class=p>(</span><span class=err>æ ‡è¯†ç¬¦</span><span class=p>)</span><span class=err>ï¼š</span><span class=kt>bool</span>
</span></span><span class=line><span class=cl><span class=err>åˆå§‹åŒ–é›¶å€¼ï¼š</span>   <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=err>å†…å­˜å ç”¨ï¼š</span>     <span class=mi>1</span><span class=err>ä¸ªå­—èŠ‚</span>
</span></span><span class=line><span class=cl><span class=err>å€¼ï¼š</span>          <span class=kc>true</span><span class=p>(</span><span class=err>çœŸ</span><span class=p>)</span><span class=o>/</span><span class=kc>false</span><span class=p>(</span><span class=err>å‡</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>é€»è¾‘è¿ç®—æ“ä½œï¼š</span>
</span></span><span class=line><span class=cl>  <span class=err>ä¸</span> <span class=o>&amp;&amp;</span> <span class=o>-</span><span class=p>&gt;</span> <span class=nx>expr1</span> <span class=o>&amp;&amp;</span> <span class=nx>expr2</span>
</span></span><span class=line><span class=cl>  <span class=err>æˆ–</span> <span class=o>||</span> <span class=o>-</span><span class=p>&gt;</span> <span class=nx>expr1</span> <span class=o>||</span> <span class=nx>expr2</span>
</span></span><span class=line><span class=cl>  <span class=err>é</span> <span class=err>ï¼</span> <span class=o>-</span><span class=p>&gt;</span> <span class=p>!</span><span class=nx>expr</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=err>å…³ç³»è¿ç®—ï¼š</span>
</span></span><span class=line><span class=cl>  <span class=err>ç­‰äº</span>    <span class=o>-</span><span class=p>&gt;</span> <span class=o>==</span>
</span></span><span class=line><span class=cl>  <span class=err>ä¸ç­‰äº</span>  <span class=o>-</span><span class=p>&gt;</span> <span class=o>!=</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ•´æ•°ç±»å‹>æ•´æ•°ç±»å‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>æ•´æ•°</span><span class=p>:</span> 
</span></span><span class=line><span class=cl>    <span class=mi>1</span><span class=err>å­—èŠ‚ï¼š</span><span class=mo>0000</span> <span class=mo>0000</span>
</span></span><span class=line><span class=cl>    <span class=err>æœ‰ç¬¦å·ï¼šå¯æ­£</span><span class=o>/</span><span class=err>å¯è´Ÿ</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>é¦–ä½ï¼š</span> <span class=mi>1</span><span class=err>è´Ÿ</span> <span class=mi>0</span><span class=err>æ­£</span>
</span></span><span class=line><span class=cl>          <span class=mo>000</span> <span class=mo>0000</span> <span class=o>-</span><span class=mi>2</span><span class=p>^(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=err>~</span> <span class=mi>2</span><span class=p>^(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=err>æ— ç¬¦å·ï¼šåªè¡¨ç¤º</span><span class=p>&gt;</span><span class=mi>0</span>
</span></span><span class=line><span class=cl>          <span class=mo>0000</span> <span class=mo>0000</span>
</span></span><span class=line><span class=cl>          <span class=mi>0</span> <span class=err>~</span> <span class=mi>2</span><span class=p>^</span><span class=nx>n</span> <span class=o>-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>          <span class=mi>0</span> <span class=err>~</span> <span class=mi>255</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=kt>int</span><span class=o>/</span><span class=kt>uint</span>     <span class=c1>// 32ä½æœºå™¨=&gt;4å­—èŠ‚ 64ä½æœºå™¨=&gt;8å­—èŠ‚
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>byte</span>         <span class=c1>// 1å­—èŠ‚  å­—èŠ‚ç±»å‹  asciiå­—ç¬¦ -&gt; æ•´æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>rune</span>         <span class=c1>// 32å­—èŠ‚ ç ç‚¹     unicodeç¼–ç è¡¨ å­—ç¬¦ -&gt; æ•´æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int8</span><span class=o>/</span><span class=kt>uint8</span>   <span class=c1>// 1å­—èŠ‚ uå¼€å¤´çš„ æ— ç¬¦å·
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int16</span><span class=o>/</span><span class=kt>uint16</span> <span class=c1>// 2å­—èŠ‚
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int32</span><span class=o>/</span><span class=kt>uint32</span> <span class=c1>// 4å­—èŠ‚
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int64</span><span class=o>/</span><span class=kt>uint64</span> <span class=c1>// 8å­—èŠ‚
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>uintptr</span>      <span class=c1>// 32ä½æœºå™¨=&gt;4å­—èŠ‚ 64ä½æœºå™¨=&gt;8å­—èŠ‚
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=err>é›¶å€¼ï¼š</span><span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=err>å­—é¢é‡</span><span class=p>:</span> <span class=err>å„ç§è¿›åˆ¶è¡¨ç¤º</span>
</span></span><span class=line><span class=cl><span class=err>æ“ä½œï¼š</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>ç®—æœ¯è¿ç®—</span> <span class=o>+</span> <span class=o>-</span> <span class=o>*</span> <span class=o>/</span> <span class=o>%</span> <span class=o>++</span> <span class=o>--</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>å…³ç³»è¿ç®—</span> <span class=p>&gt;</span> <span class=p>&lt;</span> <span class=o>&lt;=</span> <span class=o>&gt;=</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>èµ‹å€¼è¿ç®—</span> <span class=p>=</span> <span class=o>+=</span> <span class=o>-+</span> <span class=o>*=</span> <span class=o>/=</span> <span class=o>%=</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=o>+</span> <span class=kt>int64</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼š</span><span class=nb>int</span><span class=p>(</span><span class=nx>xx1</span><span class=p>)</span> <span class=o>+</span> <span class=nx>xx2</span>
</span></span><span class=line><span class=cl>               <span class=err>å°èŒƒå›´</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>å¤§èŒƒå›´</span> <span class=err>è‚¯å®šæ— é—®é¢˜</span>
</span></span><span class=line><span class=cl>               <span class=err>å¤§èŒƒå›´</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>å°èŒƒå›´</span> <span class=err>å¯èƒ½è¢«æˆªæ–­</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æµ®ç‚¹ç±»å‹>æµ®ç‚¹ç±»å‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å°æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>ç±»å‹åï¼š</span>
</span></span><span class=line><span class=cl>  <span class=kt>float32</span> <span class=o>-</span><span class=p>&gt;</span> <span class=mi>32</span><span class=err>ä½</span><span class=p>(</span><span class=mi>4</span><span class=err>å­—èŠ‚</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kt>float64</span> <span class=o>-</span><span class=p>&gt;</span> <span class=mi>64</span><span class=err>ä½</span><span class=p>(</span><span class=mi>8</span><span class=err>å­—èŠ‚</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=err>é›¶å€¼ï¼š</span><span class=mf>0.0</span> <span class=o>-</span><span class=p>&gt;</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=err>å­—é¢é‡ï¼šåè¿›åˆ¶çš„å°æ•°</span>
</span></span><span class=line><span class=cl><span class=err>æ“ä½œï¼š</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>ç®—æœ¯è¿ç®—</span> <span class=o>+</span> <span class=o>-</span> <span class=o>*</span> <span class=o>/</span> <span class=o>++</span> <span class=o>--</span> 
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>å…³ç³»è¿ç®—</span> <span class=p>&gt;</span> <span class=p>&lt;</span> <span class=o>&lt;=</span> <span class=o>&gt;=</span> 
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>æµ®ç‚¹æ•°ï¼šç­‰äº</span><span class=o>/</span><span class=err>ä¸ç­‰äº</span> <span class=p>|</span><span class=nx>a</span><span class=o>-</span><span class=nx>b</span><span class=p>|&lt;</span><span class=err>ç²¾åº¦</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>èµ‹å€¼è¿ç®—</span> <span class=p>=</span> <span class=o>+=</span> <span class=o>-+</span> <span class=o>*=</span> <span class=o>/=</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// %f ä¿®é¥°
</span></span></span><span class=line><span class=cl><span class=c1>// %n.mf =&gt; nå ä½ må°æ•°ç‚¹ä¿ç•™ä½æ•°(ç²¾åº¦)
</span></span></span></code></pre></td></tr></table></div></div><h4 id=å¤æ•°ç±»å‹>å¤æ•°ç±»å‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ç•¥
</span></span></span></code></pre></td></tr></table></div></div><h4 id=å­—ç¬¦ä¸²ç±»å‹>å­—ç¬¦ä¸²ç±»å‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=err>é›¶å€¼ï¼š</span><span class=s>&#34;&#34;</span> <span class=err>ç©ºå­—ç¬¦ä¸²</span>
</span></span><span class=line><span class=cl><span class=err>å­—é¢é‡ï¼š</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>å¯è§£æå­—ç¬¦ä¸²ï¼š</span> <span class=s>&#34;åŒå¼•å·&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>åŸç”Ÿå­—ç¬¦ä¸²ï¼š</span> <span class=s>`åå¼•å·`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>ç‰¹æ®Šå­—ç¬¦ï¼š</span>
</span></span><span class=line><span class=cl>    <span class=err>\</span><span class=nx>t</span> <span class=nx>tab</span>
</span></span><span class=line><span class=cl>    <span class=err>\</span><span class=nx>r</span> <span class=err>å›è½¦</span>
</span></span><span class=line><span class=cl>    <span class=err>\</span><span class=nx>n</span> <span class=err>æ¢è¡Œ</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>æ“ä½œï¼š</span>
</span></span><span class=line><span class=cl>  <span class=err>å­—ç¬¦ä¸²è¿æ¥ï¼š</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>  <span class=err>å…³ç³»è¿ç®—ï¼š</span>
</span></span><span class=line><span class=cl>    <span class=p>&gt;</span> <span class=o>&gt;=</span> <span class=p>&lt;</span> <span class=o>&lt;=</span> <span class=o>==</span> <span class=o>!=</span>
</span></span><span class=line><span class=cl>    <span class=err>ä»å·¦è¾¹ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æ¯”è¾ƒ</span><span class=p>(</span><span class=kt>byte</span><span class=p>)</span> <span class=err>ä¸èƒ½ç¡®å®šç»§ç»­æ¯”è¾ƒä¸‹ä¸€ä¸ªæ“ä½œ</span>
</span></span><span class=line><span class=cl>  <span class=err>èµ‹å€¼è¿ç®—ï¼š</span>
</span></span><span class=line><span class=cl>    <span class=p>=</span>
</span></span><span class=line><span class=cl>    <span class=o>+=</span> 
</span></span><span class=line><span class=cl>  <span class=err>ç´¢å¼•æ“ä½œ</span> <span class=p>=&gt;</span> <span class=kt>byte</span>
</span></span><span class=line><span class=cl>  <span class=err>åˆ‡ç‰‡æ“ä½œ</span> <span class=p>=&gt;</span> <span class=kt>byte</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>desc</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;a\nb&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>desc2</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;a\\nb&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>raw</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>`a\nb`</span> <span class=c1>// åŸç”Ÿå­—ç¬¦ä¸²å¯ä»¥åŒ…å«å¤šè¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>raw2</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>`
</span></span></span><span class=line><span class=cl><span class=s>    a\nb
</span></span></span><span class=line><span class=cl><span class=s>    fffds
</span></span></span><span class=line><span class=cl><span class=s>    adadw
</span></span></span><span class=line><span class=cl><span class=s>    weqejnfjsag
</span></span></span><span class=line><span class=cl><span class=s>    `</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>desc</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>desc2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>raw</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>raw2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=o>:=</span> <span class=s>&#34;æˆ‘å«&#34;</span> <span class=o>+</span> <span class=s>&#34;minho&#34;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç´¢å¼•ï¼š 0ï¼Œ1ï¼Œ2ï¼šæˆ‘ 3ï¼Œ4ï¼Œ5ï¼šå« 6ï¼šm ...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ç´¢å¼•æ“ä½œå’Œåˆ‡ç‰‡æ“ä½œ ä¸€å®šè¦æ³¨æ„å­—ç¬¦ä¸²çš„ç¼–ç 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// åˆ‡ç‰‡çš„æ—¶å€™ å¦‚æœæ˜¯éasciiç çš„è¯ å¯èƒ½ä¼šäº§ç”Ÿä¹±ç 
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>s</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %c\n&#34;</span><span class=p>,</span> <span class=nx>s</span><span class=p>[</span><span class=mi>6</span><span class=p>],</span> <span class=nx>s</span><span class=p>[</span><span class=mi>6</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>s</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>5</span><span class=p>])</span> <span class=c1>// æˆ‘ï¿½ï¿½ ä¹±ç 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s\n&#34;</span><span class=p>,</span> <span class=nx>raw</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>$</span> <span class=k>go</span> <span class=nx>run</span> <span class=kt>string</span><span class=p>.</span><span class=k>go</span> 
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>a</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>b</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>a</span><span class=err>\</span><span class=nx>nb</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>a</span><span class=err>\</span><span class=nx>nb</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nx>a</span><span class=err>\</span><span class=nx>nb</span>       
</span></span><span class=line><span class=cl>        <span class=nx>fffds</span>      
</span></span><span class=line><span class=cl>        <span class=nx>adadw</span>      
</span></span><span class=line><span class=cl>        <span class=nx>weqejnfjsag</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=err>æˆ‘å«</span><span class=nx>minho</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=mi>136</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=kt>uint8</span><span class=p>,</span> <span class=nx>m</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=err>æˆ‘ï¿½ï¿½</span> 
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>a</span><span class=err>\</span><span class=nx>nb</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// é‡è¦: ç´¢å¼•å’Œåˆ‡ç‰‡çš„æ—¶å€™ è‡ªå·±ä¿è¯ç¼–ç å†…å®¹ä¸ºascii
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;unicode/utf8&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>txt</span> <span class=o>:=</span> <span class=s>&#34;æˆ‘çˆ±ä¸­åäººåå…±å’Œå›½!&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// è·å–å­—ç¬¦ä¸²é•¿åº¦ len =&gt; å­—èŠ‚æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>txt</span><span class=p>))</span>                    <span class=c1>// 27
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>utf8</span><span class=p>.</span><span class=nf>RuneCountInString</span><span class=p>(</span><span class=nx>txt</span><span class=p>))</span> <span class=c1>// 10 è·å–å­—ç¬¦é•¿åº¦
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç´¢å¼• åˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%c\n&#34;</span><span class=p>,</span> <span class=nx>txt</span><span class=p>[</span><span class=mi>27</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=c1>// txt[27] = &#34;%&#34; // å­—ç¬¦ä¸²ä¸å¯å˜ ä¸èƒ½èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// éå† for range
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>key</span><span class=p>,</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>txt</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%d: %T, %c\n&#34;</span><span class=p>,</span> <span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ‡ç‰‡ byte []byte
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// åˆ‡ç‰‡ rune []rune
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>bs</span> <span class=o>:=</span> <span class=p>[]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>txt</span><span class=p>)</span> <span class=c1>// ç±»å‹è½¬æ¢ ç±»ä¼¼ int(&#39;32&#39;) å­—èŠ‚æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>rs</span> <span class=o>:=</span> <span class=p>[]</span><span class=nb>rune</span><span class=p>(</span><span class=nx>txt</span><span class=p>)</span> <span class=c1>// å­—ç¬¦çš„æ•°é‡ å¯ä»¥è½¬æ¢ä¸ºruneåˆ‡ç‰‡ å†è®¡ç®—length
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>bs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>rs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// rune/byte åˆ‡ç‰‡è½¬å­—ç¬¦ä¸²ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>bs</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>rs</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ç±»å‹è½¬æ¢>ç±»å‹è½¬æ¢</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ç±»å‹è½¬æ¢
</span></span></span><span class=line><span class=cl><span class=c1>// &#34;123&#34; -&gt; int
</span></span></span><span class=line><span class=cl><span class=c1>// int -&gt; string
</span></span></span><span class=line><span class=cl><span class=c1>// &#34;12.2&#34; -&gt; float64
</span></span></span><span class=line><span class=cl><span class=c1>// float -&gt; string
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=err>åŒ…ï¼š</span><span class=nx>strconv</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æŒ‡é’ˆç±»å‹>æŒ‡é’ˆç±»å‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>num</span> <span class=kt>int</span> <span class=p>=</span> <span class=mi>65</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>num1</span> <span class=o>:=</span> <span class=nx>num</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ä¿®æ”¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>num1</span> <span class=p>=</span> <span class=mi>165</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å¯¹numæœ‰æ— å½±å“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>num</span><span class=p>,</span> <span class=nx>num1</span><span class=p>)</span> <span class=c1>// 65 165
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>å‡½æ•°/æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>è°ƒç”¨å‡½æ•° å‚æ•°ä¼ é€’ä¼šæ‹·è´(èµ‹å€¼è¿‡ç¨‹) åœ¨å‡½æ•°å†…éƒ¨å¯¹æ‹·è´åçš„å¯¹è±¡ä¿®æ”¹ ä¸å½±å“å¤–éƒ¨
</span></span></span><span class=line><span class=cl><span class=cm>ä½†æ˜¯ï¼šçœŸçš„æƒ³åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹ä¼ é€’çš„å‚æ•° å¦‚ä½•è§£å†³ï¼Ÿ
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>è§£å†³: å®šä¹‰ä¸€ä¸ªå˜é‡ å­˜å‚¨å¯¹åº”å˜é‡çš„å†…å­˜åœ°å€
</span></span></span><span class=line><span class=cl><span class=cm>pointerNum = 0x0005  // å­˜å‚¨numçš„å†…å­˜åœ°å€
</span></span></span><span class=line><span class=cl><span class=cm>æ­¤æ—¶ é€šè¿‡pointerNumç›´æ¥å»ä¿®æ”¹å†…å­˜ä¸­çš„æ•°æ®
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>1. pointerNumæ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ -&gt; ç»Ÿç§°ä¸ºæŒ‡é’ˆç±»å‹
</span></span></span><span class=line><span class=cl><span class=cm>    int -&gt; *int
</span></span></span><span class=line><span class=cl><span class=cm>    string -&gt; *string
</span></span></span><span class=line><span class=cl><span class=cm>    type -&gt; *type
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>2. å¦‚ä½•æ‹¿åˆ°numçš„åœ°å€ï¼Ÿ -&gt; å–å¼•ç”¨
</span></span></span><span class=line><span class=cl><span class=cm>    &amp;varname
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>3. å¦‚æœé€šè¿‡pointerNumå»æ“ä½œnumå¯¹åº”å†…å­˜ä¸­çš„æ•°æ®ï¼Ÿ -&gt; è§£å¼•ç”¨ èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=cm>    *varname = xxx
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>num</span> <span class=kt>int</span> <span class=p>=</span> <span class=mi>65</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>num1</span> <span class=o>:=</span> <span class=nx>num</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ä¿®æ”¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>num1</span> <span class=p>=</span> <span class=mi>165</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å¯¹numæœ‰æ— å½±å“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>num</span><span class=p>,</span> <span class=nx>num1</span><span class=p>)</span> <span class=c1>// 65 165
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>pointNum</span> <span class=o>*</span><span class=kt>int</span>                          <span class=c1>// å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>pointNum</span><span class=p>,</span> <span class=nx>pointNum</span><span class=p>)</span> <span class=c1>// *int, &lt;nil&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>pointNum</span> <span class=p>=</span> <span class=o>&amp;</span><span class=nx>num</span>                            <span class=c1>// å–å¼•ç”¨ï¼ˆå–å†…å­˜åœ°å€èµ‹å€¼ï¼‰
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>pointNum</span><span class=p>,</span> <span class=nx>pointNum</span><span class=p>)</span> <span class=c1>// *int, 0xc00001a098
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=nx>pointNum</span> <span class=p>=</span> <span class=mi>116</span>  <span class=c1>// pointNumæ˜¯æŒ‡é’ˆç±»å‹ å¯ä»¥ç›´æ¥ä¿®æ”¹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>num</span><span class=p>)</span> <span class=c1>// 116
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç®€çŸ­å£°æ˜
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>pointNum2</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>num</span> <span class=c1>// ä¸¤ä¸ªpointæŒ‡é’ˆå­˜å‚¨çš„éƒ½æ˜¯numçš„å†…å­˜åœ°å€
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>pointNum2</span><span class=p>,</span> <span class=nx>pointNum2</span><span class=p>)</span> <span class=c1>// *int, 0xc00001a098
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=nx>pointNum2</span> <span class=p>=</span> <span class=mi>5757</span> <span class=c1>// pointNum2æŒ‡é’ˆæŒ‡å‘numçš„å†…å­˜åœ°å€ ä¿®æ”¹çš„æ˜¯numçš„å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>num</span><span class=p>,</span> <span class=nx>num</span><span class=p>)</span> <span class=c1>// *int, 5757
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=o>*</span><span class=nx>pointNum</span><span class=p>,</span> <span class=o>*</span><span class=nx>pointNum2</span><span class=p>)</span> <span class=c1>// 5757, 5757 éƒ½æŒ‡å‘numçš„å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=c1>// å…ˆå®šä¹‰å˜é‡ -&gt; å–å¼•ç”¨(å–åœ°å€)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// new(T) ä¸ç”¨å®šä¹‰å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>pointer</span> <span class=o>:=</span> <span class=nb>new</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v, %v\n&#34;</span><span class=p>,</span> <span class=nx>pointer</span><span class=p>,</span> <span class=nx>pointer</span><span class=p>,</span> <span class=o>*</span><span class=nx>pointer</span><span class=p>)</span> <span class=c1>// *int, 0xc00001a110, 0
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%p\n&#34;</span><span class=p>,</span> <span class=nx>pointer</span><span class=p>)</span> <span class=c1>// å ä½
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>$</span> <span class=k>go</span> <span class=nx>run</span> <span class=nx>pointer</span><span class=p>.</span><span class=k>go</span> 
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=mi>65</span> <span class=mi>165</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=o>*</span><span class=kt>int</span><span class=p>,</span> <span class=p>&lt;</span><span class=kc>nil</span><span class=p>&gt;</span>       
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=o>*</span><span class=kt>int</span><span class=p>,</span> <span class=mh>0xc00001a098</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=mi>116</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=o>*</span><span class=kt>int</span><span class=p>,</span> <span class=mh>0xc00001a098</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// äº†è§£ï¼šusafeåŒ…
</span></span></span></code></pre></td></tr></table></div></div><h3 id=å¤åˆæ•°æ®ç±»å‹>å¤åˆæ•°æ®ç±»å‹</h3><h4 id=æ•°ç»„array>æ•°ç»„(array)</h4><ul><li>åºåˆ—
ç”±ç›¸åŒç±»å‹å…ƒç´ ç»„æˆçš„ä¸€ä¸ªæœ‰åºçš„é›†</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=mo>0123456</span>
</span></span><span class=line><span class=cl><span class=s>&#34;abcdefg&#34;</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>æ•°ç»„
ç”±ç›¸åŒç±»å‹(ä»»æ„ç±»å‹)å…ƒç´ ç»„æˆçš„ä¸€ä¸ª<strong>å›ºå®šé•¿åº¦</strong>çš„æœ‰åºçš„é›†(ä¸€ç»„å›ºå®šé•¿åº¦çš„åºåˆ—)</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>å£°æ˜ï¼š</span> <span class=p>[</span><span class=nx>length</span><span class=p>]</span><span class=nx>T</span>
</span></span><span class=line><span class=cl>      <span class=p>[</span><span class=mi>3</span><span class=p>]</span><span class=kt>int</span>  <span class=c1>// å’Œä¸‹é¢çš„æ•°ç»„[5]intç±»å‹ä¸åŒ åªæ˜¯å…ƒç´ ç±»å‹ç›¸åŒéƒ½æ˜¯int
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>[</span><span class=mi>5</span><span class=p>]</span><span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=err>é›¶å€¼ï¼šç”±</span><span class=nx>N</span><span class=err>ä¸ª</span><span class=nx>T</span><span class=err>ç±»å‹çš„é›¶å€¼ç»„æˆçš„æ•°ç»„</span><span class=p>(</span><span class=err>åˆå§‹åŒ–</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;unsafe&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>nums</span> <span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>nums</span><span class=p>,</span> <span class=nx>nums</span><span class=p>)</span> <span class=c1>// [10]int, [0 0 0 0 0 0 0 0 0 0]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>names</span> <span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %q\n&#34;</span><span class=p>,</span> <span class=nx>names</span><span class=p>,</span> <span class=nx>names</span><span class=p>)</span> <span class=c1>// [10]string, [&#34;&#34; &#34;&#34; &#34;&#34; &#34;&#34; &#34;&#34; &#34;&#34; &#34;&#34; &#34;&#34; &#34;&#34; &#34;&#34;]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// å­—é¢é‡ åˆå§‹åŒ–å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span> <span class=c1>// [1 2 3 0 0 0 0 0 0 0]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// é€šè¿‡ç´¢å¼•æŒ‡å®šå€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>5</span><span class=p>:</span> <span class=mi>3</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ... è¯­æ³•ç³– =&gt; goç¼–è¯‘è¿‡ç¨‹ä¸­è¿›è¡Œè½¬æ¢
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ç®€å†™ æ ¹æ®{}ä¸­çš„å…ƒç´  è‡ªåŠ¨æ¨å¯¼length
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[</span><span class=o>...</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>9</span><span class=p>:</span> <span class=mi>3</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>nums</span><span class=p>,</span> <span class=nx>nums</span><span class=p>)</span> <span class=c1>// [10]int, [0 0 0 0 0 0 0 0 0 0]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// å†…å­˜: intå­—èŠ‚æ•°é‡ * å…ƒç´ çš„æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 64ä½ 8å­—èŠ‚ * 10ä¸ªå…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>unsafe</span><span class=p>.</span><span class=nf>Sizeof</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// 80
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ“ä½œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ç®—æ•°è¿ç®— æ— 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å…³ç³»è¿ç®—: ==  !=
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums2</span> <span class=o>:=</span> <span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span> <span class=o>==</span> <span class=nx>nums2</span><span class=p>)</span> <span class=c1>// false æ¯ä¸ªå…ƒç´ éƒ½ç›¸ç­‰æ‰ç›¸ç­‰ é•¿åº¦ä¸ä¸€æ ·åˆ™ç±»å‹ä¸åŒ ä¸èƒ½æ¯”è¾ƒ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums3</span> <span class=o>:=</span> <span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums3</span> <span class=o>==</span> <span class=nx>nums2</span><span class=p>)</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç›¸å…³å‡½æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// é•¿åº¦
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums3</span><span class=p>))</span> <span class=c1>// 10
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ç´¢å¼• é€šè¿‡ç´¢å¼•è·å–æ¯ä¸ªå…ƒç´ çš„å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å·¦-&gt;å³ï¼š0, 1, 2, ..., len(array) - 1; æ— åå‘ç´¢å¼•(è´Ÿç´¢å¼•)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=nx>nums</span><span class=p>[</span><span class=mi>9</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// éå†æ•°ç»„å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>);</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;keyï¼š%v value: %v\n&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>nums</span><span class=p>[</span><span class=nx>i</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// for rangeéå†
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>index</span><span class=p>,</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>nums</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>index</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¦‚æœä¸ä½¿ç”¨index ç”¨ç©ºç™½æ ‡è¯†ç¬¦ å¦åˆ™å˜é‡ä¸ä½¿ç”¨ ç¼–è¯‘æŠ¥é”™
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// var value int
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>nums</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// ä¿®æ”¹å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=p>=</span> <span class=mi>100</span> <span class=c1>// ç›´æ¥é€šè¿‡ç´¢å¼•èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=å¤šç»´æ•°ç»„>å¤šç»´æ•°ç»„</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// [length]T
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// T å¯ä»¥æ˜¯ä»»æ„ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// T -&gt; [5]int
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¤šç»´æ•°ç»„ï¼šæ•°ç»„æœ¬èº«çš„å…ƒç´ ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>multi</span> <span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>5</span><span class=p>]</span><span class=kt>int</span> <span class=c1>// T = [5]int =&gt; äºŒç»´æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>multi</span><span class=p>,</span> <span class=nx>multi</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>multi</span> <span class=p>=</span> <span class=p>[</span><span class=o>...</span><span class=p>][</span><span class=mi>5</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span> <span class=c1>// ä¹Ÿå¯ä»¥çœç•¥é•¿åº¦
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>},</span> <span class=c1>// 1: [5]int{1, 2, 3, 4, 5} å¤§æ‹¬å·é‡Œé¢å®šä¹‰äºŒç»´ å¯ä»¥çœç•¥ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>{</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=mi>1</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>:</span> <span class=mi>7</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ä¿®æ”¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>multi</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>multi</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>multi</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>3</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>multi</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=p>=</span> <span class=p>[</span><span class=mi>5</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>multi</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>multi</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=p>=</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>multi</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// éå†
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=nx>multi</span><span class=p>);</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nx>j</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>j</span> <span class=p>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=nx>multi</span><span class=p>[</span><span class=nx>i</span><span class=p>]);</span> <span class=nx>j</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>j</span><span class=p>,</span> <span class=nx>multi</span><span class=p>[</span><span class=nx>i</span><span class=p>][</span><span class=nx>j</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// rangeéå†
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>index</span><span class=p>,</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>multi</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nx>index2</span><span class=p>,</span> <span class=nx>value2</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>value</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>index</span><span class=p>,</span> <span class=nx>index2</span><span class=p>,</span> <span class=nx>value2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=åˆ‡ç‰‡slice>åˆ‡ç‰‡(slice)</h4><p>åˆ‡ç‰‡ï¼šç”±ç›¸åŒç±»å‹å…ƒç´ ç»„æˆçš„<strong>é•¿åº¦å¯å˜</strong>çš„æœ‰ç»­é›†
å£°æ˜ï¼š[]T // æ•°ç»„å»æ‰é•¿åº¦</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span><span class=lnt>215
</span><span class=lnt>216
</span><span class=lnt>217
</span><span class=lnt>218
</span><span class=lnt>219
</span><span class=lnt>220
</span><span class=lnt>221
</span><span class=lnt>222
</span><span class=lnt>223
</span><span class=lnt>224
</span><span class=lnt>225
</span><span class=lnt>226
</span><span class=lnt>227
</span><span class=lnt>228
</span><span class=lnt>229
</span><span class=lnt>230
</span><span class=lnt>231
</span><span class=lnt>232
</span><span class=lnt>233
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>nums</span> <span class=p>[]</span><span class=kt>int</span> <span class=c1>// var nums []int = nil
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// nilåˆ‡ç‰‡ èµ‹å€¼ä¸ºnil
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v, %v\n&#34;</span><span class=p>,</span> <span class=nx>nums</span><span class=p>,</span> <span class=nx>nums</span><span class=p>,</span> <span class=nx>nums</span> <span class=o>==</span> <span class=kc>nil</span><span class=p>)</span> <span class=c1>// []int, [], true
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// å†…å­˜ æš‚æ—¶ä¸å…³æ³¨
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// å­—é¢é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{}</span>                                      <span class=c1>// ç©ºåˆ‡ç‰‡ ä¸ç­‰äºnil
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v, %v\n&#34;</span><span class=p>,</span> <span class=nx>nums</span><span class=p>,</span> <span class=nx>nums</span><span class=p>,</span> <span class=nx>nums</span> <span class=o>==</span> <span class=kc>nil</span><span class=p>)</span> <span class=c1>// []int, [], false
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>}</span> <span class=c1>// é•¿åº¦å¯å˜
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>:</span> <span class=mi>11</span><span class=p>}</span> <span class=c1>// [0 1 0 0 0 0 0 0 0 0 11]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// make([]int, length)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// length: åˆ‡ç‰‡å…ƒç´ çš„æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// èµ‹å€¼æœ‰5ä¸ªå…ƒç´ çš„intç±»å‹é›¶å€¼ç»„æˆçš„åˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// make([]int, length, cap)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// length: å…ƒç´ æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// cap: å®¹é‡ =&gt; åº•å±‚æ•°ç»„çš„é•¿åº¦
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// sliceåº•å±‚ =&gt; æ•°ç»„å­˜å‚¨ æ•°ç»„é•¿åº¦å›ºå®š å½“length == cap å†æ·»åŠ æœ¬ç´  é‡æ–°ç”³è¯·å†…å­˜ æ‹·è´ é‡Šæ”¾æ—§æ•°ç»„å†…å­˜
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// åˆ‡ç‰‡é•¿åº¦å¢é•¿(å…ƒç´ æ•°é‡) å¢é•¿ =&gt; åº•å±‚æ•°ç»„é•¿åº¦ä¸å¤Ÿæ€ä¹ˆåŠ =&gt; é‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯ä»¥å®¹çº³æ›´å¤šå…ƒç´ çš„æ•°ç»„(æ‹·è´åŸæ¥æ•°ç»„ä¸­çš„å…ƒç´ )
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// åº•å±‚æ•°ç»„åŸé•¿åº¦ï¼š10 å¢åŠ ä¸€ä¸ªå…ƒç´  å¢é•¿ï¼š10 åº•å±‚æ•°ç»„ç°é•¿åº¦ï¼š20
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// é€‰æ‹©çš„å…ƒç´ ï¼š11 å‰©9ä¸ªæ²¡æœ‰ä½¿ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ‡ç‰‡æ“ä½œ =&gt; æ•°ç»„ å­—ç¬¦ä¸² åˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>numArray</span> <span class=o>:=</span> <span class=p>[</span><span class=mi>5</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>9</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>numArray</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>],</span> <span class=nx>numArray</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=c1>// [start:end] start &lt;= end &lt;= length
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ•°ç»„åˆ‡ç‰‡èµ‹å€¼ç»™åˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nx>numArray</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å®¹é‡ cap()
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nx>numArray</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>4</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v, %v, %v\n&#34;</span><span class=p>,</span> <span class=nx>nums</span><span class=p>,</span> <span class=nx>nums</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// []int, [1 3 5 7], 4, 5
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nx>numArray</span><span class=p>[</span><span class=mi>1</span><span class=p>:]</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v, %v, %v\n&#34;</span><span class=p>,</span> <span class=nx>nums</span><span class=p>,</span> <span class=nx>nums</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// []int, [3 5 7 9], 4, 4
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ‡ç‰‡çš„åˆ‡ç‰‡æ“ä½œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>nums</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>],</span> <span class=nx>nums</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ‡ç‰‡çš„èµ‹å€¼æ–¹å¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 1. é›¶å€¼ nilåˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 2. å­—é¢é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 3. makeå‡½æ•°(æŒ‡å®šå®¹é‡ ä¸æŒ‡å®šå®¹é‡)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 4. åˆ‡ç‰‡æ“ä½œ(æ•°ç»„åˆ‡ç‰‡ åˆ‡ç‰‡åˆ‡ç‰‡)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ“ä½œï¼šä¸èƒ½è¿›è¡Œ== å’Œ !=è¿ç®—
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å‡½æ•°ï¼š len cap append copy
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// å…ƒç´ çš„è®¿é—®å’Œä¿®æ”¹ï¼š é€šè¿‡ç´¢å¼• slice[i];slice[i] = value
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// åˆ‡ç‰‡æ“ä½œï¼š
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// slice[start:end:cap_end] start &lt;= end &lt;= cap_end &lt;= cap(slice)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// array[start:end:cap_end] start &lt;= end &lt;= cap_end &lt;= len(array)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ‡ç‰‡åº•å±‚ï¼š
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//   æ•°ç»„åœ°å€
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     å®¹é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     é•¿åº¦
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// é•¿åº¦ï¼šlen() å®¹é‡ï¼šcap()
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// 10, 10
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// 0, 10
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=nx>numArray</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span>  <span class=c1>// cap = length - start
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>numArray</span><span class=p>)</span> <span class=c1>// [1 3 5 7 9]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…ƒç´ çš„è®¿é—®å’Œä¿®æ”¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=p>=</span> <span class=mi>100</span> <span class=c1>// ç´¢å¼•çš„èŒƒå›´ï¼š0,length-1 or 0,cap-1?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Println(nums[1])
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Println(nums[2]) // è¿è¡Œæ—¶æŠ¥é”™ ç´¢å¼•èŒƒå›´æ˜¯0ï¼Œlength-1
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// éå†
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>);</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%v: %v\n&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>nums</span><span class=p>[</span><span class=nx>i</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>index</span><span class=p>,</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>nums</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%v: %v\n&#34;</span><span class=p>,</span> <span class=nx>index</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ·»åŠ å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=c1>// æœ«å°¾è¿½åŠ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=mi>100</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span> <span class=c1>// è¿½åŠ å¤šä¸ªå…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ é™¤å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// goä¸­æ²¡æœ‰ç›´æ¥åˆ é™¤å…ƒç´ çš„æ–¹æ³• éœ€è¦ç”¨åˆ°ï¼š åˆ‡ç‰‡ + è§£åŒ…
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ é™¤ç´¢å¼•ä¸º0çš„(é¦–)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nx>nums</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ é™¤ç´¢å¼•ä¸ºlength-1çš„(å°¾)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nx>nums</span><span class=p>[:</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ é™¤ä¸­é—´çš„(ç´¢å¼•ä¸ºi)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// [0:i] + [i+1:len(nums)]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// 1. å¾ªç¯append
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// prefix := nums[0:1]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// suffix := nums[2:len(nums)]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Println(prefix, suffix)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// for _, value := range suffix {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     prefix = append(prefix, value)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Println(prefix)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// 2. è§£åŒ…æ–¹å¼ goæŠŠåˆ‡ç‰‡å…ƒç´ å±•å¼€ è¯­æ³•ç³–
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>1</span><span class=p>],</span> <span class=nx>nums</span><span class=p>[</span><span class=mi>2</span><span class=p>:</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>)]</span><span class=o>...</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// start:end start = 0  =&gt; [:end] çœç•¥
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// start:end end = length =&gt; [start:]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// å®¹é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¢é•¿è§„åˆ™ï¼š &lt;= 1024  n =&gt; 2*n
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//          &gt; 1024 n =&gt; n*(1+~0.25)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// 0 0
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// 1 1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// 2 2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// 3 4
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// 4 4
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// 5 8
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¦‚æœå¯ä»¥é¢„æœŸåˆ‡ç‰‡çš„æœ€å¤§é•¿åº¦ å¯ä»¥é€šè¿‡makeå‡½æ•°æŒ‡å®šcapå®¹é‡ å‡å°‘ç”³è¯·å†…å­˜çš„æŸè€—
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// start:end:cap_end
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>numArray</span> <span class=p>=</span> <span class=p>[</span><span class=mi>5</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=nx>numArray</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span> <span class=c1>// len = end - start; cap = len(åº•å±‚æ•°ç»„) - start
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=mi>1000</span><span class=p>)</span> <span class=c1>// åˆ‡ç‰‡ä¼šå…±äº«åº•å±‚æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>numArray</span><span class=p>)</span>     <span class=c1>// [1 3 5 1000 8]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>         <span class=c1>// [3 5 1000]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;#########&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=nx>numArray</span><span class=p>[</span><span class=mi>3</span><span class=p>:</span><span class=mi>5</span><span class=p>]</span> <span class=c1>// [1000 8]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>numArray</span><span class=p>)</span> <span class=c1>// [1 3 5 1000 8]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>     <span class=c1>// [100 8 3]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// [start:end:cap_end] åˆ‡ç‰‡å¯ä»¥æŒ‡å®šcapçš„ä½ç½®(é™åˆ¶cap)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// end &lt;= cap_end &lt;= åº•å±‚æ•°ç»„çš„é•¿åº¦
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nx>numArray</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>:</span><span class=mi>4</span><span class=p>]</span>            <span class=c1>// cap = cap_end - start
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>nums</span><span class=p>))</span> <span class=c1>// 2 2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=mi>999</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>numArray</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// lenå’Œcapä¸€æ · appendä¼šè§¦å‘æ‰©å®¹ æ‰©å®¹ä¸ä¼šå½±å“åŸæ¥çš„åº•å±‚æ•°ç»„ ç”Ÿæˆæ–°çš„åº•å±‚æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¦åˆ™ ä¼šå½±å“åº•å±‚æ•°ç»„(æ”¹å˜åº•å±‚æ•°ç»„çš„å€¼)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ€»ç»“ï¼šå¦‚æœä½¿ç”¨æ•°ç»„æ¥ç”Ÿæˆåˆ‡ç‰‡ é‚£ä¹ˆæ“ä½œåˆ‡ç‰‡(appendæ‰©å®¹)æ ¹æ®å®¹é‡çš„æƒ…å†µ ä¼šå½±å“åº•å±‚æ•°ç»„ æˆ–æ˜¯ç”Ÿæˆæ–°çš„åº•å±‚æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ‡ç‰‡çš„åˆ‡ç‰‡æ“ä½œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// [start:end] start &lt;= end &lt;= cap(nums); endå°äºç­‰äºå®¹é‡cap
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;###########&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=p>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=p>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>numsSlice</span> <span class=o>:=</span> <span class=nx>nums</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>5</span><span class=p>]</span> <span class=c1>// [2 3 0 0]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>numsSlice</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>numsSlice</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>numsSlice</span><span class=p>))</span> <span class=c1>// 1, 9 ä»ç„¶å…±äº«åº•å±‚æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>numsSlice</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>numsSlice</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span> <span class=c1>// numsSliceæ‰©å®¹äº†ä¸€ä¸ªå…ƒç´ 100 numså€¼æ”¹å˜ [1 2 3] =&gt; [1 2 100] åŸå› ï¼šå…±äº«äº†åº•å±‚æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// é™å®šcap
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>numsSlice</span> <span class=p>=</span> <span class=nx>nums</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>2</span><span class=p>:</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>numsSlice</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>numsSlice</span><span class=p>),</span> <span class=nb>cap</span><span class=p>(</span><span class=nx>numsSlice</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// copyå‡½æ•°(dst, src)  åé¢çš„åˆ‡ç‰‡æ‹·è´åˆ°å‰é¢çš„åˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// copyï¼šåªèµ‹å€¼ç´¢å¼•ç›¸åŒçš„å…ƒç´  å¤åˆ¶å€¼ä¸å¤Ÿï¼šä¿ç•™  å¤åˆ¶åªå¤ªå¤šï¼šå‰”é™¤ å¹¶ä¸æ‰©å®¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>dst</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>src</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// len(src) == len(dst)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>src</span><span class=p>,</span> <span class=nx>dst</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>copy</span><span class=p>(</span><span class=nx>dst</span><span class=p>,</span> <span class=nx>src</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>src</span><span class=p>,</span> <span class=nx>dst</span><span class=p>)</span> <span class=c1>// [2 3 4] [2 3 4]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// len(dst) &gt; len(src) ä¿ç•™æœªè¢«è¦†ç›–éƒ¨åˆ†
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>src</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>200</span><span class=p>,</span> <span class=mi>300</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nb>copy</span><span class=p>(</span><span class=nx>dst</span><span class=p>,</span> <span class=nx>src</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>src</span><span class=p>,</span> <span class=nx>dst</span><span class=p>)</span> <span class=c1>// [200 300] [200 300 4]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// len(dst) &lt; len(src)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>src</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1000</span><span class=p>,</span> <span class=mi>2000</span><span class=p>,</span> <span class=mi>3000</span><span class=p>,</span> <span class=mi>4000</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nb>copy</span><span class=p>(</span><span class=nx>dst</span><span class=p>,</span> <span class=nx>src</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>src</span><span class=p>,</span> <span class=nx>dst</span><span class=p>)</span> <span class=c1>// [1000 2000 3000 4000] [1000 2000 3000] é•¿åº¦å¹¶ä¸ä¼šåœ¨æ‹·è´è¿‡ç¨‹ä¸­è¿›è¡Œè°ƒæ•´
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// é€šè¿‡copyæ¥åˆ é™¤ç´¢å¼•ä¸ºiçš„å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=p>=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ é™¤ç´¢å¼•ä¸º2çš„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>[</span><span class=mi>2</span><span class=p>:])</span> <span class=c1>// [3 4 5]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>[</span><span class=mi>3</span><span class=p>:])</span> <span class=c1>// [4 5]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nb>copy</span><span class=p>(</span><span class=nx>nums</span><span class=p>[</span><span class=mi>2</span><span class=p>:],</span> <span class=nx>nums</span><span class=p>[</span><span class=mi>3</span><span class=p>:])</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>[:</span><span class=nb>len</span><span class=p>(</span><span class=nx>nums</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span> <span class=c1>// [1 2 4 5 5]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=åˆ‡ç‰‡å®ç°é˜Ÿåˆ—>åˆ‡ç‰‡å®ç°é˜Ÿåˆ—</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// é˜Ÿåˆ—ï¼š å…ˆè¿›å…ˆå‡º(æ¶ˆæ¯é˜Ÿåˆ—)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>quene</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=p>=&gt;</span> <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>    <span class=err>è¿›åˆ‡ç‰‡</span><span class=p>(</span><span class=err>æ·»åŠ åˆ°åé¢</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>append</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>append</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>append</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=err>å‡ºåˆ‡ç‰‡</span>
</span></span><span class=line><span class=cl>        <span class=err>è·å–ç´¢å¼•ä¸º</span><span class=mi>0</span><span class=err>çš„å…ƒç´ </span> <span class=err>åˆ é™¤ç´¢å¼•ä¸º</span><span class=mi>0</span><span class=err>çš„å…ƒç´ </span> <span class=nx>quene</span><span class=p>[</span><span class=mi>1</span><span class=p>:]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>quene</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>string</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>txt</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;è¯·è¾“å…¥ä»»åŠ¡(exité€€å‡º,doæ‰§è¡Œ):&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Scan</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>txt</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>txt</span> <span class=o>==</span> <span class=s>&#34;exit&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>txt</span> <span class=o>==</span> <span class=s>&#34;do&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>quene</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;æ— ä»»åŠ¡&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;æ‰§è¡Œï¼š&#34;</span><span class=p>,</span> <span class=nx>quene</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>                <span class=nx>quene</span> <span class=p>=</span> <span class=nx>quene</span><span class=p>[</span><span class=mi>1</span><span class=p>:]</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>quene</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>quene</span><span class=p>,</span> <span class=nx>txt</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=åˆ‡ç‰‡å®ç°å †æ ˆ>åˆ‡ç‰‡å®ç°å †æ ˆ</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å †æ ˆï¼š å…ˆè¿›åå‡º (æœ‰ä¼˜å…ˆçº§çš„åœºæ™¯)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>stack</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=mi>1</span> <span class=mi>2</span> <span class=mi>3</span> <span class=p>=&gt;</span> <span class=mi>3</span> <span class=mi>2</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=err>è¿›åˆ‡ç‰‡ï¼š</span>
</span></span><span class=line><span class=cl>        <span class=nb>append</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>append</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>append</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=err>å‡ºåˆ‡ç‰‡ï¼š</span>
</span></span><span class=line><span class=cl>        <span class=err>è·å–ç´¢å¼•ä¸º</span><span class=nb>len</span><span class=p>()</span><span class=o>-</span><span class=mi>1</span><span class=err>çš„å…ƒç´ </span> <span class=err>åˆ é™¤</span><span class=nb>len</span><span class=p>()</span><span class=o>-</span><span class=mi>1</span><span class=err>çš„å…ƒç´ </span> <span class=nx>stack</span><span class=p>[:</span><span class=nb>len</span><span class=p>(</span><span class=nx>stack</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>stack</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>string</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>txt</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;è¯·è¾“å…¥ä»»åŠ¡(exité€€å‡º,doæ‰§è¡Œ):&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Scan</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>txt</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>txt</span> <span class=o>==</span> <span class=s>&#34;exit&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>txt</span> <span class=o>==</span> <span class=s>&#34;do&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>stack</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;æ— ä»»åŠ¡&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;æ‰§è¡Œï¼š&#34;</span><span class=p>,</span> <span class=nx>stack</span><span class=p>[</span><span class=nb>len</span><span class=p>(</span><span class=nx>stack</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
</span></span><span class=line><span class=cl>                <span class=nx>stack</span> <span class=p>=</span> <span class=nx>stack</span><span class=p>[:</span><span class=nb>len</span><span class=p>(</span><span class=nx>stack</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>stack</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>stack</span><span class=p>,</span> <span class=nx>txt</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// åˆ‡ç‰‡ []T
</span></span></span><span class=line><span class=cl><span class=c1>// T =&gt; [3]int  æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[][</span><span class=mi>3</span><span class=p>]</span><span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=c1>// T =&gt; []int   åˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[][]</span><span class=kt>int</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=å¾ªç¯åˆ é™¤åˆ‡ç‰‡å¤šä¸ªå…ƒç´ >å¾ªç¯åˆ é™¤åˆ‡ç‰‡å¤šä¸ªå…ƒç´ </h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>sli</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>10</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ä½¿ç”¨forå¾ªç¯éå†åˆ‡ç‰‡ å¹¶è®°å½•éœ€è¦åˆ é™¤çš„å…ƒç´ çš„ç´¢å¼•
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>indexesToDelete</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>sli</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>v</span><span class=o>%</span><span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>indexesToDelete</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>indexesToDelete</span><span class=p>,</span> <span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å€’åºéå†éœ€è¦åˆ é™¤çš„å…ƒç´ çš„ç´¢å¼• å› ä¸ºåˆ é™¤å…ƒç´ å åˆ‡ç‰‡çš„é•¿åº¦ä¼šå‘ç”Ÿå˜åŒ–
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¦‚æœæ­£åºéå† åˆ™å¯èƒ½äº§ç”Ÿç´¢å¼•è¶Šç•Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=nb>len</span><span class=p>(</span><span class=nx>indexesToDelete</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span><span class=o>--</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>sli</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>sli</span><span class=p>[:</span><span class=nx>indexesToDelete</span><span class=p>[</span><span class=nx>i</span><span class=p>]],</span> <span class=nx>sli</span><span class=p>[</span><span class=nx>indexesToDelete</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span><span class=o>+</span><span class=mi>1</span><span class=p>:]</span><span class=o>...</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>sli</span><span class=p>)</span> <span class=c1>// [1 3 5 7 9]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ˜ å°„map>æ˜ å°„(map)</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åˆ‡ç‰‡ æˆ–è€… æ•°ç»„ è®¿é—®å…ƒç´ æ˜¯ç›´æ¥é€šè¿‡ç´¢å¼•è®¿é—®
</span></span></span><span class=line><span class=cl><span class=c1>// å¦‚æœæˆ‘è¦æ‰¾ä¸€ä¸ªå€¼ ä¸çŸ¥é“ç´¢å¼•çš„æƒ…å†µä¸‹ é‚£å°±å¾—æŠŠæ‰€æœ‰å…ƒç´ éƒ½éå†ä¸€é
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>slice</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>array</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>æ˜ å°„ï¼š</span><span class=c1>// å®šä¹‰keyå’Œvalueå¯¹çš„é›†
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// (å¯èƒ½æ˜¯æœ‰åºçš„/å¯èƒ½æ˜¯æ— åºçš„ Goä¸­æ˜¯æ— åºçš„ï¼šæ”¾å…¥keyçš„é¡ºåºä¸åœ¨å†…å­˜ä¸­çš„é¡ºåºæ— å…³ ä¸éå†æ— å…³)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=err>å«ä¹‰ï¼š</span> <span class=nx>ID</span> <span class=p>=&gt;</span> <span class=err>æ•°æ®</span>
</span></span><span class=line><span class=cl>    <span class=err>æ˜ å°„å®ç°æ–¹å¼ï¼š</span><span class=nf>hashtable</span><span class=p>(</span><span class=nx>go</span><span class=err>çš„å®ç°æ–¹å¼</span><span class=p>)</span> <span class=nx>treemap</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>key</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=err>é€šè¿‡</span><span class=nx>key</span><span class=err>å¯¹</span><span class=nx>value</span><span class=err>è¿›è¡Œå¢åˆ æŸ¥æ”¹</span>
</span></span><span class=line><span class=cl>    <span class=nx>key</span><span class=err>æ˜¯å”¯ä¸€çš„</span>
</span></span><span class=line><span class=cl>    <span class=nx>key</span><span class=err>ç±»å‹çš„è¦æ±‚ï¼šå¯ä»¥è¿›è¡Œ</span> <span class=o>==</span> <span class=o>!=</span><span class=err>åˆ¤æ–­</span> <span class=p>(</span><span class=err>ä¸èƒ½ä¸ºåˆ‡ç‰‡</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=err>ç±»å‹ä»»æ„</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>å®šä¹‰ï¼š</span><span class=kd>map</span><span class=p>[</span><span class=nx>keyType</span><span class=p>]</span><span class=nx>valueType</span>
</span></span><span class=line><span class=cl><span class=err>èµ‹å€¼ï¼š</span>
</span></span><span class=line><span class=cl>    <span class=nx>make</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=nx>keyType</span><span class=p>]</span><span class=nx>valueType</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=err>å­—é¢é‡ï¼š</span>
</span></span><span class=line><span class=cl>        <span class=kd>map</span><span class=p>[</span><span class=nx>keyType</span><span class=p>]</span><span class=nx>valueType</span><span class=p>{}</span>    <span class=c1>// ç©ºmap
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>map</span><span class=p>[</span><span class=nx>keyType</span><span class=p>]</span><span class=nx>valueType</span><span class=p>{</span><span class=nx>k1</span><span class=p>:</span><span class=nx>v</span><span class=p>,</span> <span class=nx>k2</span><span class=p>:</span><span class=nx>v</span><span class=p>,</span> <span class=nx>k3</span><span class=p>:</span><span class=nx>v</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=err>é›¶å€¼ï¼š</span><span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=err>æ“ä½œï¼š</span>
</span></span><span class=line><span class=cl>    <span class=err>å…ƒç´ æ•°é‡ï¼š</span><span class=nb>len</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=err>å…ƒç´ æ“ä½œï¼š</span>
</span></span><span class=line><span class=cl>        <span class=err>è·å–ï¼š</span><span class=nx>mapName</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=nx>key</span><span class=err>å­˜åœ¨ï¼š</span><span class=nx>mapName</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span> <span class=p>=&gt;</span> <span class=err>å¯¹åº”</span><span class=nx>value</span><span class=err>å€¼</span>
</span></span><span class=line><span class=cl>            <span class=nx>key</span><span class=err>ä¸å­˜åœ¨ï¼šä¸ä¼šæŠ¥é”™</span> <span class=err>è¿”å›å¯¹åº”</span><span class=nx>valueType</span><span class=err>ç±»å‹çš„é›¶å€¼</span> <span class=err>å› æ­¤</span> <span class=err>ä¸èƒ½é€šè¿‡é›¶å€¼æ¥åˆ¤æ–­</span><span class=nx>key</span><span class=err>å¦å­˜åœ¨</span>
</span></span><span class=line><span class=cl>            <span class=err>å¦‚ä½•åˆ¤æ–­</span><span class=nx>key</span><span class=err>æ˜¯å¦å­˜åœ¨ï¼š</span>
</span></span><span class=line><span class=cl>                <span class=nx>value</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>mapName</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span>  <span class=c1>// å¯ä»¥è¿”å›ä¸¤ä¸ªå€¼ okè¡¨ç¤ºkeyæ˜¯å¦å­˜åœ¨ true/false
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=nx>value</span> <span class=o>:=</span> <span class=nx>mapName</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=err>å¢ï¼š</span>
</span></span><span class=line><span class=cl>            <span class=nx>mapName</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span> <span class=p>=</span> <span class=nx>value</span> <span class=c1>// å­˜åœ¨ä¿®æ”¹ ä¸å­˜åœ¨å¢åŠ 
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=err>æ”¹ï¼š</span>
</span></span><span class=line><span class=cl>            <span class=nx>mapName</span><span class=p>[</span><span class=nx>key</span><span class=p>]</span> <span class=p>=</span> <span class=nx>value</span> 
</span></span><span class=line><span class=cl>        <span class=err>åˆ ï¼š</span>
</span></span><span class=line><span class=cl>            <span class=nb>delete</span><span class=p>(</span><span class=nx>mapName</span><span class=p>,</span> <span class=nx>key</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// name =&gt; count è®°å½•æ¯ä¸ªå­¦ç”Ÿä¸Šè¯¾æ¬¡æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// key: string  value: int
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>stats</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v, %v\n&#34;</span><span class=p>,</span> <span class=nx>stats</span><span class=p>,</span> <span class=nx>stats</span><span class=p>,</span> <span class=nx>stats</span> <span class=o>==</span> <span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>stats</span> <span class=p>=</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>{}</span> <span class=c1>// ç©ºmap ä¸ç­‰äºnil
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v, %v\n&#34;</span><span class=p>,</span> <span class=nx>stats</span><span class=p>,</span> <span class=nx>stats</span><span class=p>,</span> <span class=nx>stats</span> <span class=o>==</span> <span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>stats</span> <span class=p>=</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=s>&#34;minho&#34;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span> <span class=s>&#34;kk&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v, %v\n&#34;</span><span class=p>,</span> <span class=nx>stats</span><span class=p>,</span> <span class=nx>stats</span><span class=p>,</span> <span class=nx>stats</span> <span class=o>==</span> <span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>stats</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// stats = make(map[string]int)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Printf(&#34;%T, %v, %v\n&#34;, stats, stats, stats == nil)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// è·å–å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>stats</span><span class=p>[</span><span class=s>&#34;minho&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>stats</span><span class=p>[</span><span class=s>&#34;minho11&#34;</span><span class=p>])</span> <span class=c1>// keyä¸å­˜åœ¨ ä¸æŠ¥é”™
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span> <span class=o>:=</span> <span class=nx>stats</span><span class=p>[</span><span class=s>&#34;minho&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span> <span class=p>=</span> <span class=nx>stats</span><span class=p>[</span><span class=s>&#34;minho11&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>stats</span><span class=p>[</span><span class=s>&#34;minho&#34;</span><span class=p>]</span> <span class=c1>// è¿”å›ä¸¤ä¸ªå€¼ okè¡¨ç¤ºæ˜¯å¦å­˜åœ¨ true/false
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>value</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=p>,</span> <span class=nx>ok</span> <span class=p>=</span> <span class=nx>stats</span><span class=p>[</span><span class=s>&#34;minho11&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>value</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å¢åŠ å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>stats</span><span class=p>[</span><span class=s>&#34;karubin&#34;</span><span class=p>]</span> <span class=p>=</span> <span class=mi>11</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>stats</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ä¿®æ”¹å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>stats</span><span class=p>[</span><span class=s>&#34;karubin&#34;</span><span class=p>]</span> <span class=p>=</span> <span class=mi>9</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>stats</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ é™¤å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>stats</span><span class=p>[</span><span class=s>&#34;xxx&#34;</span><span class=p>]</span> <span class=p>=</span> <span class=mi>7</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>stats</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>delete</span><span class=p>(</span><span class=nx>stats</span><span class=p>,</span> <span class=s>&#34;xxx&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>delete</span><span class=p>(</span><span class=nx>stats</span><span class=p>,</span> <span class=s>&#34;xxxxxx&#34;</span><span class=p>)</span> <span class=c1>// åˆ é™¤çš„keyå¦‚æœä¸å­˜åœ¨ ä¸æŠ¥é”™
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>stats</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// éå† for range
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>key</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>stats</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>stats</span><span class=p>[</span><span class=nx>key</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>key</span><span class=p>,</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>stats</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ˜¾ç¤ºåˆå§‹åŒ–å€¼>æ˜¾ç¤ºåˆå§‹åŒ–å€¼</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>nilSlice</span> <span class=p>[]</span><span class=kt>int</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>nilMap</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span> <span class=p>=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ˜¾å¼ä¸ºåˆ‡ç‰‡å’Œmapè¿›è¡Œåˆå§‹åŒ–å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>append</span><span class=p>(</span><span class=nx>nilSlice</span><span class=p>,</span> <span class=mi>1</span><span class=p>))</span> <span class=c1>// [1]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nilMap</span><span class=p>[</span><span class=s>&#34;kk&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=nx>nilMap</span><span class=p>[</span><span class=s>&#34;kk&#34;</span><span class=p>]</span> <span class=p>=</span> <span class=mi>1</span> <span class=c1>// æ²¡æœ‰åˆå§‹åŒ–å€¼ æŠ¥é”™ nil map
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=å‡½æ•°>å‡½æ•°</h2><p>ä¸ºä»£ç ç‰‡æ®µå®šä¹‰ä¸€ä¸ªåç§°</p><h3 id=åŠŸèƒ½>åŠŸèƒ½</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=mf>1.</span> <span class=err>ä»£ç åŠŸèƒ½æ˜ç¡®</span>
</span></span><span class=line><span class=cl><span class=mf>2.</span> <span class=err>ä»£ç å¤ç”¨</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å®šä¹‰è°ƒç”¨>å®šä¹‰/è°ƒç”¨</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=err>å‡½æ•°åç§°</span><span class=p>(</span><span class=err>å‡½æ•°å‚æ•°</span><span class=p>,</span> <span class=o>...</span><span class=p>)</span> <span class=err>è¿”å›å€¼</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å‡½æ•°ä½“
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å‡½æ•°åç§°>å‡½æ•°åç§°</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// éœ€è¦æ»¡è¶³æ ‡è¯†ç¬¦è§„èŒƒ
</span></span></span></code></pre></td></tr></table></div></div><h4 id=å‡½æ•°å‚æ•°å½¢å‚>å‡½æ•°å‚æ•°(å½¢å‚)</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å¯ä»¥æ˜¯ä»»æ„å¤šä¸ª
</span></span></span><span class=line><span class=cl><span class=c1>// å‚æ•°ï¼šå‚æ•°åç§°(å˜é‡å) å‚æ•°ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1>// å®šä¹‰å‚æ•° å°±æ˜¯å®šä¹‰ä¸€ä¸ªå˜é‡
</span></span></span><span class=line><span class=cl><span class=c1>// å½¢å‚ä½œç”¨åŸŸï¼šåªèƒ½åœ¨è¯¥å‡½æ•°ä½“å†…ä½¿ç”¨
</span></span></span><span class=line><span class=cl><span class=c1>// å¤šä¸ªå‚æ•°ä½¿ç”¨é€—å·åˆ†å‰²
</span></span></span><span class=line><span class=cl><span class=c1>// goé‡Œé¢æ²¡æœ‰å‚æ•°é»˜è®¤å€¼
</span></span></span><span class=line><span class=cl><span class=c1>// å¤šä¸ªè¿ç»­å‚æ•°ç±»å‹ä¸€è‡´ åªä¿ç•™è¿ç»­å‚æ•°ä¸­æœ€åä¸€ä¸ªå‚æ•°ç±»å‹ å‰é¢nä¸ªå‚æ•°ç±»å‹çœç•¥
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// å¯å˜å‚æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æ— å‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>sayHello</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Hello, Go&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æœ‰å‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>sayHi</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Hi&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>add</span><span class=p>(</span><span class=nx>num1</span> <span class=kt>int</span><span class=p>,</span> <span class=nx>num2</span> <span class=kt>int</span><span class=p>)</span> <span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>num1</span> <span class=o>+</span> <span class=nx>num2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>num1</span> <span class=o>+</span> <span class=nx>num2</span><span class=p>,</span> <span class=s>&#34;add&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è¿ç»­åŒç±»å‹å‚æ•°çœç•¥ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>merge</span><span class=p>(</span><span class=nx>a1</span> <span class=kt>bool</span><span class=p>,</span> <span class=nx>a2</span><span class=p>,</span> <span class=nx>a3</span><span class=p>,</span> <span class=nx>a4</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a1</span><span class=p>,</span> <span class=nx>a2</span><span class=p>,</span> <span class=nx>a3</span><span class=p>,</span> <span class=nx>a4</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¯å˜å‚æ•°
</span></span></span><span class=line><span class=cl><span class=c1>// å˜é‡å ...T
</span></span></span><span class=line><span class=cl><span class=c1>// å¯å˜å‚æ•°åœ¨ä¸€ä¸ªå‡½æ•°å†…åªèƒ½å®šä¹‰ä¸€æ¬¡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>anyArgs</span><span class=p>(</span><span class=nx>args</span> <span class=o>...</span><span class=kt>string</span><span class=p>)</span> <span class=p>{</span> <span class=c1>// å¯ä»¥æ¥æ”¶ä»»æ„å¤šä¸ªstringç±»å‹çš„å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// argsæ˜¯åˆ‡ç‰‡ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¯å˜å‚æ•°å¯ä»¥å’Œå›ºå®šå‚æ•°ç»“åˆä½¿ç”¨ ä½†åªèƒ½æ”¾åœ¨æœ€æœ«å°¾
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>addN</span><span class=p>(</span><span class=nx>left</span><span class=p>,</span> <span class=nx>right</span> <span class=kt>int</span><span class=p>,</span> <span class=nx>args</span> <span class=o>...</span><span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>sum</span> <span class=o>:=</span> <span class=nx>left</span> <span class=o>+</span> <span class=nx>right</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>args</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>sum</span> <span class=o>+=</span> <span class=nx>value</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>sum</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>addN</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=è¿”å›å€¼>è¿”å›å€¼</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å¯ä»¥æ˜¯ä»»æ„å¤šä¸ª 
</span></span></span><span class=line><span class=cl><span class=c1>// æ— è¿”å›å€¼ä¸å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1>// æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼š éœ€å®šä¹‰è¿”å›å€¼çš„ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1>// å¤šä¸ªè¿”å›å€¼ï¼šéœ€å®šä¹‰æ‰€æœ‰è¿”å›å€¼çš„ç±»å‹ ç”¨é€—å·åˆ†å‰² ()åŒ…å« è¿ç»­ç›¸åŒè¿”å›ç±»å‹ åŒæ ·å¯ä»¥çœç•¥
</span></span></span><span class=line><span class=cl><span class=c1>// è¿”å›å€¼å¯ä»¥å®šä¹‰åç§°(å‘½åè¿”å›å€¼) å‘½åè¿”å›å€¼ å»ºè®®åœ¨å‡½æ•°ç®€å•çš„æ—¶å€™ä½¿ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// æœ‰è¿”å›å€¼ä¸€å®šè¦ç”¨returnå…³é”®å­—è¿”å›
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æ— è¿”å›å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>sayHello</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Hello, Go&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å•ä¸ªè¿”å›å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>add</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>2</span> <span class=o>+</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¤šä¸ªè¿”å›å€¼ åŒç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>calc</span><span class=p>()</span> <span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>2</span> <span class=o>+</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span> <span class=o>-</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span> <span class=o>*</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span> <span class=o>/</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è¿”å›å¤šä¸ªå€¼ ä¸åŒç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>returnType</span><span class=p>()</span> <span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>bool</span><span class=p>,</span> <span class=kt>string</span><span class=p>,</span> <span class=p>[]</span><span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>true</span><span class=p>,</span> <span class=s>&#34;string_return&#34;</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å‘½åè¿”å›å€¼
</span></span></span><span class=line><span class=cl><span class=c1>// å°†å‡½æ•°æ‰§è¡Œå®Œæˆæ—¶çš„nameè¿”å›
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>returnName</span><span class=p>()</span> <span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// return // å‘½åè¿”å›å€¼ å¯ä»¥ç›´æ¥åªå†™return è¿”å›&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>name</span> <span class=p>=</span> <span class=s>&#34;returnName&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>returnNameArgs</span><span class=p>()</span> <span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>isBoby</span> <span class=kt>bool</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span> <span class=p>=</span> <span class=nx>name</span> <span class=o>+</span> <span class=s>&#34;Minho&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>sayHello</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>r</span> <span class=o>:=</span> <span class=nf>add</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>r</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>num1</span><span class=p>,</span> <span class=nx>num2</span><span class=p>,</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>num4</span> <span class=o>:=</span> <span class=nf>calc</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>num1</span><span class=p>,</span> <span class=nx>num2</span><span class=p>,</span> <span class=nx>num4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>res1</span><span class=p>,</span> <span class=nx>res2</span><span class=p>,</span> <span class=nx>res3</span><span class=p>,</span> <span class=nx>res4</span> <span class=o>:=</span> <span class=nf>returnType</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>res1</span><span class=p>,</span> <span class=nx>res2</span><span class=p>,</span> <span class=nx>res3</span><span class=p>,</span> <span class=nx>res4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>res</span> <span class=o>:=</span> <span class=nf>returnName</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%q\n&#34;</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>name</span><span class=p>,</span> <span class=nx>isBody</span> <span class=o>:=</span> <span class=nf>returnNameArgs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%q, %v\n&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>isBody</span><span class=p>)</span> <span class=c1>// Minho false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å‡½æ•°è°ƒç”¨>å‡½æ•°è°ƒç”¨</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å‡½æ•°åç§°(å®å‚å‚æ•°) å®å‚çš„æ•°é‡ == å½¢å‚çš„æ•°é‡ 
</span></span></span><span class=line><span class=cl><span class=c1>// å®å‚å’Œå½¢å‚ï¼šæ•°é‡ éœ€è¦ä¸€è‡´ / ç±»å‹æŒ‰é¡ºåºä¸€è‡´ / æ•°æ®æŒ‰ç…§é¡ºåºä¼ é€’
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å‡½æ•°è°ƒç”¨ åœ¨æ ˆä¸Š ä¸€èˆ¬æ˜¯ç”³è¯·çš„è¿ç»­çš„åœ°å€
</span></span></span><span class=line><span class=cl><span class=c1>// é—­åŒ…ä½¿ç”¨åˆ°çš„å˜é‡ goä¼šå­˜åˆ°å †ä¸­ è¯¥ç±»å˜é‡ç”Ÿå‘½å‘¨æœŸè¾¹é•¿
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>go</span> <span class=nx>tool</span> <span class=nx>compile</span> <span class=o>-</span><span class=nx>m</span> <span class=o>-</span><span class=nx>l</span> <span class=nx>xxx</span><span class=p>.</span><span class=k>go</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xxx</span> <span class=nx>does</span> <span class=nx>not</span> <span class=nx>escape</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>xxx</span> <span class=nx>escapes</span> <span class=nx>to</span> <span class=nx>head</span> <span class=c1>// é€ƒé€¸åˆ°å †ä¸­
</span></span></span></code></pre></td></tr></table></div></div><h3 id=é€’å½’>é€’å½’</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å‡½æ•°é—´æ¥/ç›´æ¥è°ƒç”¨è‡ªå·±
</span></span></span><span class=line><span class=cl><span class=c1>// åˆ†æ²»é—®é¢˜ï¼šå°†ä¸€ä¸ªå¤§é—®é¢˜æ‹†åˆ†æˆNä¸ªç›¸åŒè§£å†³æ–¹æ³•çš„å°é—®é¢˜
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// é˜¶ä¹˜
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// é€’å½’å®ç°é˜¶ä¹˜
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int64</span><span class=p>)</span> <span class=kt>int64</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;call&#34;</span><span class=p>,</span> <span class=nx>n</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>||</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span> <span class=c1>// ç»ˆæ­¢æ¡ä»¶ æ²¡æœ‰çš„è¯ä¼šæ— é™è°ƒç”¨ è°ƒç”¨æ·±åº¦(çœ‹è¯­è¨€å±‚é¢æ˜¯å¦æœ‰é™åˆ¶)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>rt</span> <span class=o>:=</span> <span class=nx>n</span> <span class=o>*</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;result&#34;</span><span class=p>,</span> <span class=nx>n</span><span class=p>,</span> <span class=nx>rt</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>rt</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>fact</span><span class=p>(</span><span class=mi>5</span><span class=p>))</span> <span class=c1>// 120
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>$</span> <span class=k>go</span> <span class=nx>run</span> <span class=nx>fact</span><span class=p>.</span><span class=k>go</span> <span class=c1>// å…ˆè¿›å»çš„åå¾—åˆ°ç»“æœ ç±»ä¼¼æ ˆ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>call</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>call</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>call</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>call</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>call</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>result</span> <span class=mi>2</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>result</span> <span class=mi>3</span> <span class=mi>6</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>result</span> <span class=mi>4</span> <span class=mi>24</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>result</span> <span class=mi>5</span> <span class=mi>120</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// æ±‰è¯ºå¡”
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å°†layerä¸ªç›˜å­ä»t1ç§»åŠ¨åˆ°t3 å€ŸåŠ©t2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>tower</span><span class=p>(</span><span class=nx>t1</span><span class=p>,</span> <span class=nx>t2</span><span class=p>,</span> <span class=nx>t3</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>layer</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>layer</span> <span class=o>==</span> <span class=mi>1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s -&gt; %s\n&#34;</span><span class=p>,</span> <span class=nx>t1</span><span class=p>,</span> <span class=nx>t3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…ˆå°†layer-1ä¸ªä»t1 ç§»åŠ¨åˆ°t2 å€ŸåŠ©t3
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>tower</span><span class=p>(</span><span class=nx>t1</span><span class=p>,</span> <span class=nx>t3</span><span class=p>,</span> <span class=nx>t2</span><span class=p>,</span> <span class=nx>layer</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// t1 -&gt; t3
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s -&gt; %s\n&#34;</span><span class=p>,</span> <span class=nx>t1</span><span class=p>,</span> <span class=nx>t3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å°†layer-1ä¸ªt2 ç§»åŠ¨åˆ°t3 å€ŸåŠ©t1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>tower</span><span class=p>(</span><span class=nx>t2</span><span class=p>,</span> <span class=nx>t1</span><span class=p>,</span> <span class=nx>t3</span><span class=p>,</span> <span class=nx>layer</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>tower</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span> <span class=s>&#34;B&#34;</span><span class=p>,</span> <span class=s>&#34;C&#34;</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å‡½æ•°ç±»å‹>å‡½æ•°ç±»å‹</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å®šä¹‰å‡½æ•°ç±»å‹çš„å˜é‡ èµ‹å€¼ å‡½æ•°, è°ƒç”¨ =&gt; å…¶ä»–è¯­è¨€çš„é«˜é˜¶å‡½æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>add</span><span class=p>(</span><span class=nx>l</span><span class=p>,</span> <span class=nx>r</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>l</span> <span class=o>+</span> <span class=nx>r</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>mapFunc</span><span class=p>(</span><span class=nx>list</span> <span class=p>[]</span><span class=kt>int</span><span class=p>,</span> <span class=nx>tl</span> <span class=kd>func</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span> <span class=kt>int</span><span class=p>)</span> <span class=p>[]</span><span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>rt</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>list</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>rt</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>rt</span><span class=p>,</span> <span class=nf>tl</span><span class=p>(</span><span class=nx>value</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>rt</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>tlAdd</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>n</span> <span class=o>+</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T\n&#34;</span><span class=p>,</span> <span class=nx>add</span><span class=p>)</span> <span class=c1>// func(int, int) int
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// å®šä¹‰å‡½æ•°ç±»å‹çš„å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>f</span> <span class=kd>func</span><span class=p>(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=c1>// é›¶å€¼ nil
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>f</span> <span class=p>=</span> <span class=nx>add</span>                  <span class=c1>// å¼•ç”¨å‡½æ•°add
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T %v\n&#34;</span><span class=p>,</span> <span class=nx>f</span><span class=p>,</span> <span class=nx>f</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>f</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span> <span class=c1>// è°ƒç”¨å‡½æ•° 5
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// map filter reduce
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¯¹åˆ‡ç‰‡è¿›è¡Œæ“ä½œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// map: å¯¹åˆ‡ç‰‡ä¸­æ¯ä¸ªå…ƒç´ é€šè¿‡æŸç§è½¬æ¢å¾—åˆ°ç»“æœç»„æˆæ–°çš„åˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// filter: å¯¹åˆ‡ç‰‡çš„å…ƒç´ è¿›è¡Œè¿‡æ»¤
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// reduce: åˆå§‹åŒ–å…ƒç´  å°†1ä¸ªå…ƒç´ ä¸åˆå§‹åŒ–å…ƒç´  =&gt; result + 2 =&gt; result + 3
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// map =&gt; æ–°çš„åˆ‡ç‰‡ []int
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>mapFunc</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=nx>tlAdd</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=åŒ¿åå‡½æ•°>åŒ¿åå‡½æ•°</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>mapFunc</span><span class=p>(</span><span class=nx>list</span> <span class=p>[]</span><span class=kt>int</span><span class=p>,</span> <span class=nx>tl</span> <span class=kd>func</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span> <span class=kt>int</span><span class=p>)</span> <span class=p>[]</span><span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>rt</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>value</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>list</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>rt</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>rt</span><span class=p>,</span> <span class=nf>tl</span><span class=p>(</span><span class=nx>value</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>rt</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// åŒ¿åå‡½æ•°ï¼šæ²¡æœ‰åå­—çš„å‡½æ•° å®šä¹‰åç›´æ¥èµ‹å€¼ç»™æŸä¸ªå˜é‡ ç›´æ¥è°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¾€å¾€åšä¸€äº›è¾…åŠ©æ€§çš„åŠŸèƒ½(ä¸´æ—¶ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨) ç¼©çŸ­ä½œç”¨åŸŸ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// åŒ¿åç»“æ„ä½“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// åŒ¿åæ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>add</span> <span class=o>:=</span> <span class=kd>func</span><span class=p>(</span><span class=nx>left</span><span class=p>,</span> <span class=nx>right</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>left</span> <span class=o>+</span> <span class=nx>right</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>add</span><span class=p>,</span> <span class=nx>add</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>add</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// tlAdd5 := func(n int) int {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     return n + 5
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>mapFunc</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span> <span class=k>return</span> <span class=nx>n</span> <span class=o>+</span> <span class=mi>10</span> <span class=p>}))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>x</span> <span class=o>:=</span> <span class=kd>func</span><span class=p>(</span><span class=nx>left</span><span class=p>,</span> <span class=nx>right</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>left</span> <span class=o>+</span> <span class=nx>right</span>
</span></span><span class=line><span class=cl>    <span class=p>}(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>func</span><span class=p>(</span><span class=nx>left</span><span class=p>,</span> <span class=nx>right</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span> <span class=c1>// ä¸è¦è¿”å›å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>left</span><span class=p>,</span> <span class=nx>right</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>left</span> <span class=o>+</span> <span class=nx>right</span>
</span></span><span class=line><span class=cl>    <span class=p>}(</span><span class=mi>11</span><span class=p>,</span> <span class=mi>11</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=é—­åŒ…>é—­åŒ…</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åœ¨å‡½æ•°å†…éƒ¨ ä¼šå®šä¹‰åŒ¿åå‡½æ•° è¯¥åŒ¿åå‡½æ•°ä¼šå¼•ç”¨å¤–å±‚å‡½æ•°çš„å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•° æ¯æ¬¡è°ƒç”¨ç”Ÿæˆä¸€ä¸ªID =&gt; ä»startå¼€å§‹ idçš„é—´éš”æ˜¯step
</span></span></span><span class=line><span class=cl><span class=c1>// é¢å‘åˆ‡é¢ç¼–ç¨‹ è£…é¥°å™¨
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// generateIdæ‰§è¡Œå®Œæˆå start stepä¸èƒ½è¢«é”€æ¯ é—­åŒ…(å†…å±‚åŒ¿åå‡½æ•°ä½¿ç”¨äº†å¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡)ä½¿ä»–ä»¬çš„ç”Ÿå‘½å‘¨æœŸå˜é•¿
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>generateId</span><span class=p>(</span><span class=nx>start</span><span class=p>,</span> <span class=nx>step</span> <span class=kt>int</span><span class=p>)</span> <span class=kd>func</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kd>func</span><span class=p>()</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;start: %v\n&#34;</span><span class=p>,</span> <span class=nx>start</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span> <span class=o>:=</span> <span class=nx>start</span>
</span></span><span class=line><span class=cl>        <span class=nx>start</span> <span class=o>+=</span> <span class=nx>step</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>id</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>g1</span> <span class=o>:=</span> <span class=nf>generateId</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>g1</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>g1</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>g1</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>g1</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>g1</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>g100</span> <span class=o>:=</span> <span class=nf>generateId</span><span class=p>(</span><span class=mi>100</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>g100</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>g100</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>g100</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>g100</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// é—­åŒ…ï¼šæ”¹å˜äº†å˜é‡çš„ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ
</span></span></span><span class=line><span class=cl><span class=c1>// å˜é‡çš„å£°æ˜å‘¨æœŸï¼šä»å˜é‡åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹
</span></span></span><span class=line><span class=cl><span class=c1>// å˜é‡çš„ä½œç”¨åŸŸï¼šå˜é‡å¯ä»¥ä½¿ç”¨çš„èŒƒå›´
</span></span></span></code></pre></td></tr></table></div></div><h3 id=ç±»å‹>ç±»å‹</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>var</span> <span class=nx>t</span> <span class=nx>T</span>
</span></span><span class=line><span class=cl><span class=nx>tmp</span> <span class=o>:=</span> <span class=nx>t</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¯¹tmpè¿›è¡Œä¿®æ”¹ å¯èƒ½å½±å“åˆ°t =&gt; å¼•ç”¨ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1>// åä¹‹ ä»»ä½•æ“ä½œéƒ½ä¸èƒ½å½±å“t =&gt; å€¼ç±»å‹
</span></span></span></code></pre></td></tr></table></div></div><h4 id=å€¼ç±»å‹>å€¼ç±»å‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=kt>bool</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=o>...</span><span class=p>]</span><span class=kt>int</span> <span class=c1>// æ•°ç»„ ä¹Ÿæ˜¯å€¼ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>ç»“æ„ä½“</span>
</span></span><span class=line><span class=cl><span class=err>æŒ‡é’ˆ</span> <span class=nx>pointer</span> <span class=c1>// æœ‰äº‰è®® ä¸ºäº†é™ä½å‡½æ•°å‚æ•°æ‹·è´å¸¦æ¥çš„å†…å­˜ç¿»å€ ä¼šä½¿ç”¨æŒ‡é’ˆè¿›è¡Œä¼ é€’
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums</span> <span class=o>:=</span> <span class=p>[</span><span class=o>...</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>nums2</span> <span class=o>:=</span> <span class=nx>nums</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=nx>nums2</span><span class=p>)</span> <span class=c1>// [1 2 3 4 5] [1 2 3 4 5]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>nums2</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=p>=</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>nums</span><span class=p>,</span> <span class=nx>nums2</span><span class=p>)</span> <span class=c1>// [1 2 3 4 5] [1000 2 3 4 5]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å¼•ç”¨ç±»å‹>å¼•ç”¨ç±»å‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1>// æ˜ å°„
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// ä½¿ç”¨äº†æŒ‡é’ˆ æˆ– å†…å­˜åœ°å€
</span></span></span></code></pre></td></tr></table></div></div><h3 id=å€¼ä¼ é€’>å€¼ä¼ é€’</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>å½¢å‚</span> <span class=p>=</span> <span class=err>å®å‚</span>  
</span></span><span class=line><span class=cl><span class=c1>// æŠŠå®å‚ èµ‹å€¼ç»™äº†å®å‚ =&gt; æŠŠå®å‚çš„å†…å­˜åœ°å€ä¸­çš„æ•°æ®å¤åˆ¶ä¸€ä»½ èµ‹å€¼ç»™å½¢å‚
</span></span></span><span class=line><span class=cl><span class=c1>// å½¢å‚æ˜¯å®å‚çš„å‰¯æœ¬
</span></span></span><span class=line><span class=cl><span class=c1>// åœ¨å‡½æ•°å†…å¯¹å½¢å‚ä¿®æ”¹ ä¸ä¼šå¯¹å¤–é¢çš„å®å‚æœ‰å½±å“
</span></span></span><span class=line><span class=cl><span class=c1>// goä¸­ ä¸ç®¡å€¼ç±»å‹ è¿˜æ˜¯å¼•ç”¨ç±»å‹ éƒ½ä¼šæŠŠå®å‚å¯¹åº”å†…å­˜åœ°å€çš„å€¼å¤åˆ¶ä¸€ä»½ å¤åˆ¶ç»™å½¢å‚
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// æ³¨æ„ï¼šå½“ä¼ é€’çš„æ˜¯ å¼•ç”¨ç±»å‹çš„æ—¶å€™ æ¯”å¦‚åˆ‡ç‰‡ å› ä¸ºå…±äº«åº•å±‚æ•°ç»„çš„å…³ç³» åœ¨å‡½æ•°å†…ä¿®æ”¹ç´¢å¼•çš„å€¼ ä¼šå½±å“åº•å±‚æ•°ç»„çš„å€¼ ä»è€Œå½±å“å®å‚çš„å€¼
</span></span></span></code></pre></td></tr></table></div></div><h3 id=é”™è¯¯å¤„ç†>é”™è¯¯å¤„ç†</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// goæ ‡å‡†å»ºè®®æ˜¾å¼çš„å°†é”™è¯¯ä¿¡æ¯é€šè¿‡è¿”å›å€¼è¿”å›ç»™è°ƒç”¨è€… ç”±è°ƒç”¨è€…è‡ªè¡Œå¤„ç†
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span><span class=p>()</span> <span class=p>(</span><span class=nx>xxx1</span><span class=p>,</span> <span class=nx>xxx2</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;errors&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;strconv&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>é”™è¯¯ï¼š
</span></span></span><span class=line><span class=cl><span class=cm>    è¯­æ³•é”™è¯¯ =&gt; ç¼–è¯‘å¤±è´¥
</span></span></span><span class=line><span class=cl><span class=cm>    è¿è¡Œæ—¶ =&gt;
</span></span></span><span class=line><span class=cl><span class=cm>        å¯æ¢å¤é”™è¯¯/ä¸å¯æ¢å¤é”™è¯¯
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>        ç½‘ç»œé—®é¢˜å¤±è´¥
</span></span></span><span class=line><span class=cl><span class=cm>        è¯»å–æ–‡ä»¶å¤±è´¥
</span></span></span><span class=line><span class=cl><span class=cm>        å†™æ–‡ä»¶ç£ç›˜ç©ºé—´ä¸è¶³
</span></span></span><span class=line><span class=cl><span class=cm>        ...
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int64</span><span class=p>)</span> <span class=p>(</span><span class=kt>int64</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=p>&lt;</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=s>&#34;è®¡ç®—é”™è¯¯&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>1</span> <span class=o>||</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>r</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>==</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>n</span> <span class=o>*</span> <span class=nx>r</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;è®¡ç®—é”™è¯¯&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>i</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>err</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl>    <span class=c1>// i, err := strconv.Atoi(&#34;1.1.1.1&#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>i</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>Atoi</span><span class=p>(</span><span class=s>&#34;1.1.1.1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T %v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=panicæŠ›å‡ºé”™è¯¯>panicæŠ›å‡ºé”™è¯¯</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int64</span><span class=p>)</span> <span class=kt>int64</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=p>&lt;</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>panic</span><span class=p>(</span><span class=s>&#34;nä¸èƒ½å°äº0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>1</span> <span class=o>||</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>rt</span> <span class=o>:=</span> <span class=nx>n</span> <span class=o>*</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>rt</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>fact</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=æ•è·é”™è¯¯>æ•è·é”™è¯¯</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// recoverå…³é”®å­— =&gt; éœ€è¦æ”¾ç½®åœ¨å»¶è¿Ÿæ‰§è¡Œå†…éƒ¨
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int64</span><span class=p>)</span> <span class=kt>int64</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=p>&lt;</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>panic</span><span class=p>(</span><span class=s>&#34;nä¸èƒ½å°äº0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>1</span> <span class=o>||</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>rt</span> <span class=o>:=</span> <span class=nx>n</span> <span class=o>*</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>rt</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// defer å‡½æ•°è°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>defer</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>errMsg</span> <span class=o>:=</span> <span class=nb>recover</span><span class=p>();</span> <span class=nx>errMsg</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>errMsg</span><span class=p>)</span> <span class=c1>// ç›¸å½“äºæ•è·é”™è¯¯
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>fact</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å‡½æ•°å°†é”™è¯¯è¿”å›
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int64</span><span class=p>)</span> <span class=kt>int64</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=p>&lt;</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>panic</span><span class=p>(</span><span class=s>&#34;nä¸èƒ½å°äº0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>1</span> <span class=o>||</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>rt</span> <span class=o>:=</span> <span class=nx>n</span> <span class=o>*</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>rt</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>testError</span><span class=p>()</span> <span class=p>(</span><span class=nx>err</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// defer å‡½æ•°è°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>defer</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>errMsg</span> <span class=o>:=</span> <span class=nb>recover</span><span class=p>();</span> <span class=nx>errMsg</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>err</span> <span class=p>=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;%v&#34;</span><span class=p>,</span> <span class=nx>errMsg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>fact</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>testError</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å»¶è¿Ÿæ‰§è¡Œ>å»¶è¿Ÿæ‰§è¡Œ</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// æ‰§è¡Œå‡½æ•° ä¸ç®¡å†…éƒ¨é€»è¾‘æ˜¯å¦å‘ç”Ÿé”™è¯¯ éƒ½æƒ³è¦æ‰§è¡Œçš„ä»£ç 
</span></span></span><span class=line><span class=cl><span class=c1>// å…³é”®å­—ï¼šdefer åé¢å¿…é¡»è·Ÿå‡½æ•°è°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int64</span><span class=p>)</span> <span class=kt>int64</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=p>&lt;</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>panic</span><span class=p>(</span><span class=s>&#34;nä¸èƒ½å°äº0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>1</span> <span class=o>||</span> <span class=nx>n</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>rt</span> <span class=o>:=</span> <span class=nx>n</span> <span class=o>*</span> <span class=nf>fact</span><span class=p>(</span><span class=nx>n</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>rt</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// defer å‡½æ•°è°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>defer</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;main&#34;</span><span class=p>)</span> <span class=c1>// ä¸ç®¡æ˜¯å¦æœ‰é”™è¯¯ éƒ½åœ¨æ‰€åœ¨çš„å‡½æ•°é€€å‡ºçš„æ—¶å€™æ‰§è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>defer</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;defer 1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;defer 2&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;defer 3&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>fact</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// $ go run panic.go // åŒä¸€ä¸ªå‡½æ•°å†…å¤šä¸ªdefer å…ˆå®šä¹‰çš„åæ‰§è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1>// defer 3
</span></span></span><span class=line><span class=cl><span class=c1>// defer 2
</span></span></span><span class=line><span class=cl><span class=c1>// defer 1
</span></span></span><span class=line><span class=cl><span class=c1>// main
</span></span></span></code></pre></td></tr></table></div></div><h4 id=deferæ³¨æ„äº‹é¡¹>deferæ³¨æ„äº‹é¡¹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// deferå†…ä¿®æ”¹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>test</span><span class=p>()</span> <span class=p>(</span><span class=nx>i</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// defer å‡½æ•°é€€å‡ºå‰æ‰§è¡Œ è¿™ä¸ªæ—¶å€™è¿”å›2
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// é™¤äº†erroråœºæ™¯ ä¸è¦åœ¨deferä¸­ä½¿ç”¨ä¿®æ”¹è¿”å›å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>i</span> <span class=p>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>i</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>i</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>test</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// é—­åŒ…é™·é˜±
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;start&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span> <span class=c1>// å‡½æ•°é€€å‡ºçš„æ—¶å€™ içš„å€¼ä¸º3 é—­åŒ…é™·é˜±
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>defer</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;end&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// $ go run defer2.go
</span></span></span><span class=line><span class=cl><span class=c1>// start
</span></span></span><span class=line><span class=cl><span class=c1>// end
</span></span></span><span class=line><span class=cl><span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// æ³¨æ„ï¼šdeferä¸è¦å†™åœ¨å¾ªç¯ä¹‹å†…
</span></span></span></code></pre></td></tr></table></div></div><h2 id=ä½œç”¨åŸŸ>ä½œç”¨åŸŸ</h2><ul><li>ä½œç”¨åŸŸå†…å®šä¹‰å˜é‡åªèƒ½è¢«å£°æ˜ä¸€æ¬¡ä¸”å˜é‡å¿…é¡»ä½¿ç”¨ å¦åˆ™ç¼–è¯‘é”™è¯¯</li><li>åœ¨ä¸åŒä½œç”¨åŸŸå¯å®šä¹‰ç›¸åŒçš„å˜é‡ æ­¤æ—¶å±€éƒ¨å°†è¦†ç›–å…¨å±€</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>version</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;1.1.1&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span> <span class=c1>// mainä½œç”¨åŸŸ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// ä½œç”¨åŸŸï¼š å˜é‡çš„å¯ä½¿ç”¨èŒƒå›´
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// {}æ˜¾ç¤ºçš„å£°æ˜ä¸€ä¸ªä½œç”¨åŸŸèŒƒå›´ - åµŒå¥—{}å¯ä»¥æƒ³è±¡ä¸ºä¸€ä¸ªæ ‘çŠ¶å›¾
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 1. åœ¨æŸä¸ªä½œç”¨åŸŸèŒƒå›´å†…å®šä¹‰çš„å˜é‡ å¯ä»¥åœ¨å…¶ä½œç”¨åŸŸæ¯ä½¿ç”¨ï¼›å­å­™å®šä¹‰çš„ çˆ¶çœ‹ä¸è§
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 2. è‹¥æ ‡è¯†ç¬¦åœ¨æŸä¸ªä½œç”¨åŸŸä¸­æœ‰å®šä¹‰ è‹¥å­å­™æŸå±‚ä½œç”¨åŸŸå†…é‡æ–°å®šä¹‰ åˆ™è¢«è¦†ç›–
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¯¹å†…ç©¿é€ å°±è¿‘åŸåˆ™ å¯¹å¤–ä¸å¯è§(ç±»æ¯”Pythonä½œç”¨åŸŸè®°å¿†)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;version1&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>)</span> <span class=c1>// 1.1.1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>funcVersion</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;2.2.2&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>version</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;1.2.3&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;version2&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>)</span> <span class=c1>// 1.2.3
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>//  funcVersion string = &#34;2.3.4&#34;  // æŠ¥é”™ åŒä¸€å—ä½œç”¨åŸŸ ä¸èƒ½é‡æ–°å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>{</span> <span class=c1>// A{}å—
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;version3&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>)</span> <span class=c1>// 1.2.3
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>version</span> <span class=p>=</span> <span class=s>&#34;AAAAA&#34;</span>                <span class=c1>// è¿™é‡Œç›´æ¥ä¿®æ”¹çš„ main.version é‡æ–°èµ‹å€¼å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;version4&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>)</span> <span class=c1>// AAAAA
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;version5&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>)</span> <span class=c1>// AAAAA
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=c1>// B{}å—
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;version6&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>)</span> <span class=c1>// AAAA  main.version
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>var</span> <span class=nx>version</span> <span class=kt>string</span> <span class=p>=</span> <span class=s>&#34;BBBBB&#34;</span>     <span class=c1>// åœ¨Bå—ä½œç”¨åŸŸå†…é‡æ–°å®šä¹‰äº†ä¸€ä¸ªversion æ²¡æœ‰æ”¹å˜main.version
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;version7&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>)</span> <span class=c1>// BBBBB
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;version8&#34;</span><span class=p>,</span> <span class=nx>version</span><span class=p>)</span> <span class=c1>// AAAAA
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>version</span><span class=p>,</span> <span class=nx>funcVersion</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>$</span> <span class=k>go</span> <span class=nx>run</span> <span class=nx>scope</span><span class=p>.</span><span class=k>go</span> 
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>version1</span> <span class=mf>1.1.1</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>version2</span> <span class=mf>1.2.3</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>version3</span> <span class=mf>1.2.3</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>version4</span> <span class=nx>AAAAA</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>version5</span> <span class=nx>AAAAA</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>version6</span> <span class=nx>AAAAA</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>version7</span> <span class=nx>BBBBB</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>version8</span> <span class=nx>AAAAA</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>AAAAA</span> <span class=mf>2.2.2</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ˜¾å¼ä½œç”¨åŸŸ>æ˜¾å¼ä½œç”¨åŸŸ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>æ˜¾å¼å£°æ˜ä½œç”¨åŸŸï¼š</span>
</span></span><span class=line><span class=cl>  <span class=p>{}</span> <span class=err>å¤§æ‹¬å·</span> 
</span></span></code></pre></td></tr></table></div></div><h2 id=éšå¼ä½œç”¨åŸŸ>éšå¼ä½œç”¨åŸŸ</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>éšå¼å£°æ˜ä½œç”¨åŸŸï¼š</span>
</span></span><span class=line><span class=cl>  <span class=mf>1.</span> <span class=err>å…¨å±€ä½œç”¨åŸŸ</span>
</span></span><span class=line><span class=cl>  <span class=mf>2.</span> <span class=err>åŒ…ä½œç”¨åŸŸ</span>
</span></span><span class=line><span class=cl>  <span class=mf>3.</span> <span class=err>æ–‡ä»¶ä½œç”¨åŸŸ</span>
</span></span><span class=line><span class=cl>  <span class=mf>4.</span> <span class=k>if</span> <span class=k>switch</span> <span class=k>for</span> <span class=k>select</span> <span class=nx>case</span><span class=err>è¯­å¥å—</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=æµç¨‹æ§åˆ¶>æµç¨‹æ§åˆ¶</h2><h3 id=if>if</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>if</span> <span class=nx>expr1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>cmd1</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>expr2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>cmd2</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>exprn</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>cmdn</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>default_cmd</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ifå¿…é¡»æœ‰ 
</span></span></span><span class=line><span class=cl><span class=c1>// else ifä»»æ„å¤šä¸ª
</span></span></span><span class=line><span class=cl><span class=c1>// esle 0ä¸ªæˆ–1ä¸ª
</span></span></span></code></pre></td></tr></table></div></div><h3 id=switch>switch</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>value</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Scan</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>value</span><span class=p>)</span> <span class=c1>// ä»consoleè·å–å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=nx>value</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s>&#34;sg&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;gre2&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s>&#34;us&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;gre3&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s>&#34;tw&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;gre4&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;gre1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=for>for</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// var s string = &#34;My name is Minho&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// for init; expr; end {}
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 1 + 2 + ... + 100
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>total</span> <span class=kt>int</span> <span class=p>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>1</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;=</span> <span class=mi>100</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>total</span> <span class=o>+=</span> <span class=nx>i</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>total</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>total</span> <span class=p>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>i</span> <span class=kt>int</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>&lt;=</span> <span class=mi>100</span> <span class=p>{</span> <span class=c1>// ç±»whileå†™æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>total</span> <span class=o>+=</span> <span class=nx>i</span>
</span></span><span class=line><span class=cl>        <span class=nx>i</span><span class=o>++</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>total</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// var nums int = 0
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// for { // æ­»å¾ªç¯ ç±»ä¼¼äºpythonï¼š while True: cmd
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     nums++
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     fmt.Println(nums)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// break
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>1</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>i</span> <span class=o>==</span> <span class=mi>3</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span> <span class=c1>// ç»“æŸå¾ªç¯
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// continue
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>1</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>i</span> <span class=o>==</span> <span class=mi>3</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span> <span class=c1>// è·³è¿‡æœ¬æ¬¡å¾ªç¯ ä¸‹æ¬¡ç»§ç»­
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// continue breakåªèƒ½è·³å‡ºæˆ–ç»“æŸå½“å‰å¾ªç¯
</span></span></span><span class=line><span class=cl><span class=c1>// é…åˆlabelä½¿ç”¨ å¯ä»¥è·³å‡ºåˆ°æŒ‡å®šlabel
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>BEXIT</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>j</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>j</span> <span class=p>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=nx>j</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>j</span> <span class=o>==</span> <span class=mi>1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span> <span class=nx>BEXIT</span> <span class=c1>// ç›´æ¥è·³å‡ºforå¾ªç¯
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>CEXIT</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>j</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>j</span> <span class=p>&lt;</span> <span class=mi>3</span><span class=p>;</span> <span class=nx>j</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>j</span> <span class=o>==</span> <span class=mi>1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span> <span class=nx>CEXIT</span> <span class=c1>// ç›´æ¥è·³å‡ºåˆ°forå¾ªç¯
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=goto>goto</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>total</span><span class=p>,</span> <span class=nx>incr</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>START</span><span class=p>:</span> <span class=c1>// labelè¡¨ç¤º  æ ‡è¯†ç¬¦:
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>total</span> <span class=o>+=</span> <span class=nx>incr</span>
</span></span><span class=line><span class=cl>    <span class=nx>incr</span><span class=o>++</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>incr</span> <span class=o>&lt;=</span> <span class=mi>100</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>goto</span> <span class=nx>START</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>goto</span> <span class=nx>END</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>total</span><span class=p>)</span> <span class=c1>// æ­¤æ—¶ æ°¸è¿œæ— æ³•æ‰§è¡Œè¿™ä¸ªprintè¯­å¥
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>END</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;total:&#34;</span><span class=p>,</span> <span class=nx>total</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=å•æ­¥è°ƒè¯•å·¥å…·-dlv>å•æ­¥è°ƒè¯•å·¥å…· dlv</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ dlv debug xxx.go  <span class=c1># helpæŸ¥çœ‹å®Œæ•´å¸®åŠ©</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># vscodeæœ‰å›¾å½¢ç•Œé¢å¯ä»¥è°ƒè¯• debugæ¨¡å¼</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=åŒ…ç®¡ç†æ¨¡å—>åŒ…ç®¡ç†/æ¨¡å—</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åŒ… æ¨¡å—
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>ä»£ç </span><span class=nx>main</span> <span class=p>=&gt;</span> <span class=err>åˆ†å‡½æ•°</span> <span class=p>=&gt;</span> <span class=err>åˆ†æ–‡ä»¶</span> <span class=p>=&gt;</span> <span class=err>åˆ†æ–‡ä»¶å¤¹</span> <span class=c1>// ä»£ç æ•´ç†(é¡¹ç›®çš„ç»„ç»‡æ–¹å¼)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=err>ç¬¬ä¸‰æ–¹åˆ«äººå¼€å‘çš„åŒ…</span> <span class=o>-</span><span class=p>&gt;</span> <span class=nx>github</span><span class=p>.</span><span class=nx>com</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span><span class=p>&gt;</span> <span class=err>ä¸‹è½½</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span><span class=p>&gt;</span> <span class=nx>GOPATH</span> <span class=nx>src</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>go</span><span class=err>å·¥å…·ï¼š</span>
</span></span><span class=line><span class=cl>  <span class=k>go</span> <span class=nx>build</span>
</span></span><span class=line><span class=cl>  <span class=k>go</span> <span class=nx>install</span> <span class=err>ç¬¬ä¸‰æ–¹åŒ…åœ°å€</span>
</span></span><span class=line><span class=cl>  <span class=k>go</span> <span class=nx>get</span> <span class=err>ç¬¬ä¸‰æ–¹åŒ…åœ°å€</span> <span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>ilolicon</span><span class=o>/</span><span class=nx>xxx</span>  <span class=c1>// ä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=nx>git</span><span class=o>/</span><span class=nx>svn</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>ç¬¬ä¸‰æ–¹åŒ…æŸ¥æ‰¾åœ°å€ï¼š</span>
</span></span><span class=line><span class=cl>  <span class=nx>https</span><span class=p>:</span><span class=c1>//godoc.org/
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>https</span><span class=p>:</span><span class=c1>//gowalker.org/
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=err>å˜é‡å¯è§æ€§ï¼š</span>
</span></span><span class=line><span class=cl>  <span class=err>é¦–å­—æ¯å¤§å°å†™çš„é—®é¢˜</span>
</span></span><span class=line><span class=cl>    <span class=err>é¦–å­—æ¯å°å†™çš„å˜é‡åªå¯¹åŒ…å†…å¯è§</span>
</span></span><span class=line><span class=cl>    <span class=err>é¦–å­—æ¯å¤§å†™æ‰å¯¹å¤–éƒ¨çš„å…¶ä»–åŒ…å¯è§</span><span class=p>(</span><span class=err>å¯ä»¥è°ƒç”¨</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// åŒ…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>åŒ…åï¼šåœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹å†…</span> <span class=err>åŒ…åå¿…é¡»ä¸€è‡´</span>
</span></span><span class=line><span class=cl><span class=nx>main</span><span class=err>åŒ…ï¼šå¯ç¼–è¯‘ä¸ºå¯æ‰§è¡Œçš„ç»“æœ</span><span class=p>(</span><span class=err>äºŒè¿›åˆ¶ç¨‹åº</span><span class=p>)</span> <span class=kn>package</span> <span class=err>å®šä¹‰ä¸º</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl><span class=err>åŠŸèƒ½ä»£ç ï¼šè‹¥åŠŸèƒ½ä¸éœ€è¦ç¼–è¯‘ä¸ºå¯æ‰§è¡Œç¨‹åº</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>å‘½åä¸ºé</span><span class=nx>main</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>å¯ä»¥ä»»æ„å®šä¹‰</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>æ ‡è¯†ç¬¦è§„èŒƒ</span><span class=p>(</span><span class=err>ä¸€èˆ¬ä½¿ç”¨æ–‡ä»¶å¤¹åç§°</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=err>è‹¥ä¸åœ¨åŒä¸€ä¸ªåŒ…ä¸‹é¢è°ƒç”¨ä¸åŒæ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°</span>
</span></span><span class=line><span class=cl>  <span class=err>å¯¼å…¥ï¼š</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=nx>package</span><span class=err>åŒ…åå’Œç›®å½•ä¸€è‡´ï¼šå¯¼å…¥ç›®å½•è·¯å¾„</span><span class=p>(</span><span class=nx>GOPATH</span> <span class=nx>src</span><span class=err>åé¢çš„ç›®å½•è·¯å¾„</span><span class=p>)</span> <span class=kn>import</span> <span class=s>&#34;cmdb/user&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>-</span> <span class=nx>package</span><span class=err>åŒ…åå’Œç›®å½•ä¸ä¸€è‡´ï¼š</span><span class=kn>import</span> <span class=s>&#34;cmdb/idc&#34;</span> <span class=err>æ³¨æ„</span> <span class=err>å¯¼å…¥ä»æ˜¯è·¯å¾„</span> <span class=err>ä½†æ˜¯è¿™ä¸ªè°ƒç”¨çš„åŒ…ååˆ™ä¸ä¸€è‡´</span>
</span></span><span class=line><span class=cl>  <span class=err>è°ƒç”¨ï¼šé€šè¿‡åŒ…å</span><span class=p>.</span><span class=err>å‡½æ•°åç§°</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// GO111MODULE
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>GO111MODULE</span><span class=p>=</span><span class=nx>on</span><span class=o>/</span><span class=nx>off</span><span class=o>/</span><span class=nx>auto</span>
</span></span><span class=line><span class=cl><span class=nx>on</span>   <span class=o>-</span><span class=p>&gt;</span> <span class=err>å¯åŠ¨</span><span class=nx>module</span>
</span></span><span class=line><span class=cl><span class=nx>off</span>  <span class=o>-</span><span class=p>&gt;</span> <span class=err>å…³é—­</span><span class=nx>module</span> <span class=o>-</span><span class=p>&gt;</span> <span class=nx>gopath</span> <span class=o>+</span> <span class=nx>vendor</span>
</span></span><span class=line><span class=cl><span class=nx>auto</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>è‡ªåŠ¨åˆ¤æ–­</span>
</span></span><span class=line><span class=cl>        <span class=err>ä¾æ®ï¼šä»£ç ä¸å†</span><span class=nx>GOPATH</span><span class=err>ç›®å½•</span> <span class=err>ç›®å½•å­˜åœ¨</span><span class=k>go</span><span class=p>.</span><span class=nx>mod</span><span class=err>æ–‡ä»¶</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>éƒ½æ»¡è¶³ä¸º</span><span class=nx>module</span> <span class=err>å¦åˆ™ä¸º</span><span class=nx>gopath</span><span class=o>+</span><span class=nx>vendor</span><span class=err>æ–¹å¼</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=gopath--vendor>GOPATH + vendor</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>æ–¹æ¡ˆ</span><span class=mi>1</span><span class=err>ï¼š</span><span class=mf>1.11</span> <span class=err>ä¹‹å‰</span> <span class=nx>gopath</span> <span class=o>+</span> <span class=nx>vendor</span><span class=err>æ–¹å¼</span><span class=o>/</span><span class=err>å…¶ä»–å¼€æºæ–¹æ¡ˆ</span>
</span></span><span class=line><span class=cl><span class=nx>gopath</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span><span class=p>&gt;</span> <span class=nf>GOPATH</span><span class=p>(</span><span class=err>é…ç½®ä¸€ä¸ªæˆ–è€…å¤šä¸ªç›®å½•</span><span class=p>)</span> <span class=c1>// GOPATH=C:\Users\97431\go
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=c1>// ä»£ç å¿…é¡»æ”¾åœ¨GOPATHç›®å½•ä¸‹
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=nx>src</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>æºç </span>
</span></span><span class=line><span class=cl>     <span class=nx>bin</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>æ”¾äºŒè¿›åˆ¶æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>     <span class=nx>pkg</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>ç¬¬ä¸‰æ–¹åŒ…</span><span class=p>(</span><span class=err>ç»è¿‡ç¼–è¯‘è¿‡çš„</span><span class=p>.</span><span class=nx>a</span><span class=err>æ–‡ä»¶</span><span class=p>)</span> <span class=c1>// go install xxçš„æ—¶å€™ä¼šç”Ÿæˆç›¸å…³ä¾èµ–çš„.aæ–‡ä»¶ -&gt; ç¼–è¯‘å¿«
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>vendor</span><span class=p>:</span> <span class=err>ä¸»è¦è§£å†³å¤šç‰ˆæœ¬é—®é¢˜</span> <span class=err>ä¼˜å…ˆè°ƒç”¨</span><span class=nx>vendor</span><span class=err>ç›®å½•ä¸‹é¢çš„ç‰ˆæœ¬</span><span class=p>(</span><span class=err>ä»£ç </span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>vendor</span><span class=err>ï¼šå¯ä»¥æ”¾åœ¨ä»»ä½•ç›®å½•</span> <span class=err>æŸ¥æ‰¾çš„æ—¶å€™ï¼š</span>
</span></span><span class=line><span class=cl>        <span class=err>å½“å‰ç›®å½•æŸ¥æ‰¾</span><span class=nf>vendor</span><span class=p>(</span><span class=err>æ— </span><span class=nx>vendor</span><span class=o>/</span><span class=err>æœ‰</span><span class=nx>vendor</span><span class=err>æ— åŒ…</span><span class=p>)</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>ä¸Šä¸€çº§ç›®å½•</span> <span class=o>-</span><span class=p>&gt;</span> <span class=o>...</span> <span class=o>-</span><span class=p>&gt;</span> <span class=nx>GOPATH</span> <span class=nx>vendor</span> <span class=o>-</span><span class=p>&gt;</span> <span class=nx>GOPATH</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>æ ‡å‡†åº“</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>æŠ¥é”™</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä»£ç æ”¾åœ¨GOPATHç›®å½•ä¸‹ å¯ä»¥åœ¨ä»»æ„ç›®å½•build
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>go</span> <span class=nx>build</span> <span class=p>.</span> <span class=o>||</span> <span class=k>go</span> <span class=nx>build</span> <span class=nf>user</span><span class=p>(</span><span class=nx>GOPATH</span> <span class=nx>src</span><span class=err>ä¸‹é¢çš„ç›®å½•å</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// cp $WORK\b001\exe\a.out.exe C:\GoWorkspace\go\bin\user.exe 
</span></span></span><span class=line><span class=cl><span class=c1>// å°†ç¨‹åºç¼–è¯‘å¹¶æ‹·è´åˆ°GOPATHçš„binç›®å½•ä¸‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>go</span> <span class=nx>install</span> <span class=o>-</span><span class=nx>x</span> <span class=nf>user</span><span class=p>(</span><span class=nx>GOPATH</span> <span class=nx>src</span><span class=err>ä¸‹é¢çš„ç›®å½•å</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¯¼å…¥åŒ…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>GOPATH/
</span></span></span><span class=line><span class=cl><span class=cm>  cmdb/
</span></span></span><span class=line><span class=cl><span class=cm>    user/
</span></span></span><span class=line><span class=cl><span class=cm>      main.go  // éƒ½åœ¨useråŒ…é‡Œé¢ è°ƒç”¨user.goé‡Œé¢çš„å‡½æ•° ç›´æ¥ä½¿ç”¨å‡½æ•°åç§°è°ƒç”¨å³å¯
</span></span></span><span class=line><span class=cl><span class=cm>      user.go  // éƒ½åœ¨useråŒ…é‡Œé¢ 
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// åœ¨åŒä¸€ä¸ªåŒ…ä¸‹é¢è°ƒç”¨ä¸åŒæ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•° -&gt; ç›´æ¥è°ƒç”¨å‡½æ•°åç§°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>add</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nf>modify</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>delete</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nf>find</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>------------------------------</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>GOPATH/
</span></span></span><span class=line><span class=cl><span class=cm>  cmdb/
</span></span></span><span class=line><span class=cl><span class=cm>    user/
</span></span></span><span class=line><span class=cl><span class=cm>      user.go  // åŠŸèƒ½ä»£ç 
</span></span></span><span class=line><span class=cl><span class=cm>    idc/
</span></span></span><span class=line><span class=cl><span class=cm>      idc.go  // åŠŸèƒ½ä»£ç 
</span></span></span><span class=line><span class=cl><span class=cm>    main.go
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;cmdb/user&#34;</span> <span class=c1>// GOPATH srcåé¢çš„ç›®å½•è·¯å¾„
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// åœ¨ä¸åŒåŒ…ä¸‹é¢è°ƒç”¨ä¸åŒæ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•° -&gt; å…ˆå¯¼å…¥åŒ… -&gt; é€šé“åŒ…å.å‡½æ•°åç§°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ä½†æ˜¯è¿™é‡Œä¼šæŠ¥é”™ =&gt; å˜é‡å¯è§æ€§é—®é¢˜ æ ‡è¯†ç¬¦é¦–å­—ç¬¦å°å†™ åªèƒ½åŒ…å†…ä½¿ç”¨ ä¸èƒ½å¯¼å‡º
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>user</span><span class=p>.</span><span class=nf>add</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=p>.</span><span class=nf>modify</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=p>.</span><span class=nb>delete</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=p>.</span><span class=nf>find</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=module>MODULE</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>æ–¹æ¡ˆ</span><span class=mi>2</span><span class=err>ï¼š</span><span class=mf>1.11</span><span class=err>åŠä¹‹å</span> <span class=nf>GOMODULE</span><span class=p>(</span><span class=err>é‡ç‚¹</span><span class=p>)</span> <span class=c1>// GO 1.11 MODULE
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=err>ä¼˜åŠ¿ï¼š</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>ä¸ç”¨è®¾ç½®</span><span class=nx>GOPATH</span> <span class=err>ä»£ç å¯ä»¥ä»»æ„æ”¾ç½®</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>è‡ªåŠ¨ä¸‹è½½ä¾èµ–ç®¡ç†</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>ç‰ˆæœ¬æ§åˆ¶</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>ä¸å…è®¸ä½¿ç”¨ç›¸å¯¹å¯¼å…¥</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=nx>replace</span><span class=err>æœºåˆ¶</span><span class=p>(</span><span class=err>ç½‘ç»œé—®é¢˜</span><span class=nx>goproxy</span> <span class=err>å’Œ</span> <span class=err>åŒ…é‡å‘½åé—®é¢˜</span> <span class=err>ç°åœ¨å¾ˆå°‘ä½¿ç”¨</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>GO111MODULE</span>
</span></span><span class=line><span class=cl>  <span class=c1>// åˆå§‹åŒ–æ¨¡å—
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>go</span> <span class=nx>mod</span> <span class=nx>init</span> <span class=err>æ¨¡å—åç§°</span> <span class=c1>// go mod init cmdb
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>go</span> <span class=nx>mod</span> <span class=nx>tidy</span> <span class=c1>// ä¸‹è½½ä¾èµ–çš„ç¬¬ä¸‰æ–¹æ¨¡å—
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=err>æ‰§è¡Œï¼š</span><span class=k>go</span> <span class=nx>run</span> <span class=p>.</span>
</span></span><span class=line><span class=cl>       <span class=k>go</span> <span class=nx>build</span> <span class=p>.</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>  <span class=c1>// æ¨¡å—åç§°å‘½å
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=mf>1.</span> <span class=err>è¿œç¨‹ä»“åº“çš„å‘½åç§°</span> <span class=nx>cmdb</span> <span class=o>-</span><span class=p>&gt;</span> <span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>ilolicon</span><span class=o>/</span><span class=nx>cmdb</span> <span class=c1>// ç®€å• ä¸èƒ½ä½œä¸ºç¬¬ä¸‰æ–¹åŒ…ä½¿ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=mf>2.</span> <span class=err>å¸¦ä¸Šä»“åº“åœ°å€ï¼š</span><span class=nx>git</span> <span class=nx>mod</span> <span class=nx>init</span> <span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>ilolicon</span><span class=o>/</span><span class=nx>cmdb</span> <span class=c1>// githubåœ°å€ + ç”¨æˆ·å + è´¦å·åç§°
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=err>æŒ‡å®šç‰ˆæœ¬ï¼šä¾èµ–</span><span class=nx>tag</span> <span class=nx>git</span><span class=o>/</span><span class=nx>svn</span> <span class=o>-</span><span class=p>&gt;</span> <span class=nx>tag</span> <span class=nx>v0</span><span class=p>.</span><span class=nx>x</span><span class=p>.</span><span class=nx>x</span> <span class=nx>v1</span><span class=p>.</span><span class=nx>x</span><span class=p>.</span><span class=nx>x</span>
</span></span><span class=line><span class=cl>     <span class=err>ä¸‹è½½æŒ‡å®šç‰ˆæœ¬ï¼š</span><span class=k>go</span> <span class=nx>get</span> <span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>ilolicon</span><span class=o>/</span><span class=nx>math</span><span class=err>@</span><span class=nx>v1</span><span class=mf>.0.0</span> <span class=err>æˆ–è€…æ‰‹åŠ¨ä¿®æ”¹</span><span class=k>go</span><span class=p>.</span><span class=nx>mod</span><span class=err>æ–‡ä»¶</span> <span class=err>é‡æ–°</span><span class=k>go</span> <span class=nx>mod</span> <span class=nx>tidy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// GO111MODULE å¯¼å…¥åŒ… åŒæ¨¡å—
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=c1>// åŒæ¨¡å— -&gt; modulename(go mod initåˆå§‹åŒ–æ—¶ç»™å‡ºçš„æ¨¡å—åç§°)/ç›®å½•è·¯å¾„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// go.modæ–‡æœ¬æ–‡ä»¶ ä¾èµ– æ¨¡å—åç§° å¯ä»¥ç›´æ¥ä¿®æ”¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s>&#34;cmdbxx/user&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Hello, World&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=p>.</span><span class=nf>Add</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>-----------------------</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;cmdb/user&#34;</span> <span class=c1>// åŒæ¨¡å— -&gt; modulename/ç›®å½•è·¯å¾„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/beego/beego/v2/server/web&#34;</span> <span class=c1>// ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å— go mod tidy
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Hello, World&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span><span class=p>.</span><span class=nf>Add</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>web</span><span class=p>.</span><span class=nf>Run</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¯¼å…¥è¿œç¨‹ç¬¬ä¸‰æ–¹åŒ…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       <span class=c1>// go mod tidy ä¼šè‡ªåŠ¨å»ä¸‹è½½
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s>&#34;github.com/ilolicon/math&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>math</span><span class=p>.</span><span class=nx>PI</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>math</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// mathåŒ…è®¾ç½® æ¨¡å—åä»¥ github.com + ç”¨æˆ·å + æ¨¡å—å è®¾ç½®
</span></span></span><span class=line><span class=cl><span class=c1>// go mod init github.com/ilolicon/math
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>math</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=nx>PI</span> <span class=kt>float32</span> <span class=p>=</span> <span class=mf>3.141592653</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Add</span><span class=p>(</span><span class=nx>l</span><span class=p>,</span> <span class=nx>r</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>l</span> <span class=o>+</span> <span class=nx>r</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// åŒ…åå†²çª ä½¿ç”¨åˆ«åè§£å†³
</span></span></span><span class=line><span class=cl><span class=c1>// åˆ«åå¯¼å…¥
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>testmod</span><span class=o>/</span><span class=nx>aaa</span><span class=o>/</span><span class=nx>math</span><span class=s>&#34;  // ç»å¯¹è·¯å¾„å¯¼å…¥ -&gt; è¿˜æœ‰ç›¸å¯¹è·¯å¾„å¯¼å…¥ gomodç¦ç”¨
</span></span></span><span class=line><span class=cl><span class=s>    bmath &#34;</span><span class=nx>testmod</span><span class=o>/</span><span class=nx>bbb</span><span class=o>/</span><span class=nx>math</span><span class=s>&#34; // åˆ«åç›´æ¥åœ¨å¯¼å…¥åŒ…å‰é¢è®¾ç½®å³å¯
</span></span></span><span class=line><span class=cl><span class=s>)
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>func main() {
</span></span></span><span class=line><span class=cl><span class=s>    math.Add(1, 1)
</span></span></span><span class=line><span class=cl><span class=s>    bmath.Add(1, 1)
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>// ç‚¹å¯¼å…¥
</span></span></span><span class=line><span class=cl><span class=s>import (
</span></span></span><span class=line><span class=cl><span class=s>    . &#34;</span><span class=nx>testmod</span><span class=o>/</span><span class=nx>aaa</span><span class=o>/</span><span class=nx>math</span><span class=s>&#34; // ç‚¹å¯¼å…¥ è°ƒç”¨åŒ…å†…å‡½æ•°çš„å˜é‡ ä¸ç”¨åŠ åŒ…å å°½é‡ä¸ç”¨ å‡å°‘å˜é‡æ±¡æŸ“
</span></span></span><span class=line><span class=cl><span class=s>)
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>func main() {
</span></span></span><span class=line><span class=cl><span class=s>    Add(1, 1)
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>// ä¸‹åˆ’çº¿å¯¼å…¥
</span></span></span><span class=line><span class=cl><span class=s>// åŒ…å¯¼å…¥ä¸ä½¿ç”¨ ä¼šæŠ¥é”™ å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿å¯¼å…¥
</span></span></span><span class=line><span class=cl><span class=s>// ä¸ä½¿ç”¨è¿˜å¯¼å…¥ æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ -&gt; åŒ…åˆå§‹åŒ– æ‰§è¡ŒåŒ…å†…åˆå§‹åŒ–å‡½æ•° func init() {}
</span></span></span><span class=line><span class=cl><span class=s>import (
</span></span></span><span class=line><span class=cl><span class=s>    _ &#34;</span><span class=nx>testmod</span><span class=o>/</span><span class=nx>aaa</span><span class=o>/</span><span class=nx>math</span><span class=err>&#34;</span>  <span class=c1>// åˆ«åå¯¼å…¥çš„ç‰¹æ®Šå½¢å¼ æ³¨å†Œæœºåˆ¶ä¼šç”¨åˆ°
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=å¯¼å…¥æ€»ç»“>å¯¼å…¥æ€»ç»“</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=cm>/* 
</span></span></span><span class=line><span class=cl><span class=cm>å¯¼å…¥åŒ…
</span></span></span><span class=line><span class=cl><span class=cm> ç»å¯¹è·¯å¾„å¯¼å…¥
</span></span></span><span class=line><span class=cl><span class=cm>   GOPATH srcä¸‹çš„ç›®å½•
</span></span></span><span class=line><span class=cl><span class=cm>   gomod åŒæ¨¡å— æ¨¡å—åç§°/è·¯å¾„
</span></span></span><span class=line><span class=cl><span class=cm>         ç¬¬ä¸‰æ–¹æ¨¡å— ç¬¬ä¸‰æ–¹æ¨¡å—åç§°/è·¯å¾„
</span></span></span><span class=line><span class=cl><span class=cm> åˆ«åå¯¼å…¥
</span></span></span><span class=line><span class=cl><span class=cm>   å¯¼å…¥å¤šä¸ªç›¸åŒåç§°çš„åŒ…
</span></span></span><span class=line><span class=cl><span class=cm>   
</span></span></span><span class=line><span class=cl><span class=cm> ä¸‹åˆ’çº¿å¯¼å…¥
</span></span></span><span class=line><span class=cl><span class=cm>   åŒ…åˆå§‹åŒ– init ä¸è¦ä¾èµ–ä»–çš„é¡ºåº
</span></span></span><span class=line><span class=cl><span class=cm>   
</span></span></span><span class=line><span class=cl><span class=cm> ç›¸å¯¹è·¯å¾„å¯¼å…¥
</span></span></span><span class=line><span class=cl><span class=cm>   gomodä¸­ç¦ç”¨
</span></span></span><span class=line><span class=cl><span class=cm>   
</span></span></span><span class=line><span class=cl><span class=cm> ç‚¹å¯¼å…¥
</span></span></span><span class=line><span class=cl><span class=cm>   å°½é‡ä¸ç”¨ å®¹æ˜“å˜é‡å†²çª æ±¡æŸ“
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=initå‡½æ•°>initå‡½æ•°</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å¯¼å…¥åŒ… ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥åŒ…å†…çš„initå‡½æ•°
</span></span></span><span class=line><span class=cl><span class=c1>// ä¸€ä¸ªåŒ…å†…å¯ä»¥æœ‰ä»»æ„å¤šä¸ª å¯ä»¥å®šä¹‰æ— æ•°æ¬¡ ä½†å»ºè®®åªå†™1ä¸ª
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>init</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>cmd</span> <span class=c1>// goå®šä¹‰çš„åˆå§‹åŒ–å‡½æ•° æ²¡æœ‰å‚æ•° æ²¡æœ‰è¿”å›å€¼ åŒ…è¢«å¯¼å…¥çš„æ—¶å€™ è‡ªåŠ¨æ‰§è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å¯è§æ€§>å¯è§æ€§</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åªèƒ½åœ¨åŒ…å†…å¯ç”¨ï¼šåŒ…å†…å¯è§ å˜é‡åç§°å°å†™
</span></span></span><span class=line><span class=cl><span class=c1>// å¯ä»¥åœ¨åŒ…å¤–ä½¿ç”¨ï¼šåŒ…å¤–å¯è§ å˜é‡åç§°å¤§å†™
</span></span></span></code></pre></td></tr></table></div></div><h2 id=æ ‡å‡†åº“åŠç¬¬ä¸‰æ–¹åº“>æ ‡å‡†åº“åŠç¬¬ä¸‰æ–¹åº“</h2><p><a class=link href=https://golang.google.cn/pkg/ target=_blank rel=noopener>æ ‡å‡†åº“å®˜ç½‘æ–‡æ¡£</a></p><p><a class=link href=https://studygolang.com/pkgdoc target=_blank rel=noopener>Golangæ ‡å‡†åº“ä¸­æ–‡æ–‡æ¡£</a></p><h3 id=fmt>fmt</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>()</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>æ ¼å¼åŒ–çš„å­—ç¬¦ä¸² å ä½ åé¢çš„æ•°æ®è¿›è¡Œå¡«å……
</span></span></span><span class=line><span class=cl><span class=cm>  å ä½ç¬¦
</span></span></span><span class=line><span class=cl><span class=cm>    %T %v %#V ä¸æ•°æ®ç±»å‹æ— å…³ æ‰“å°å˜é‡ç±»å‹ %v %#V ä»¥å¯è¯†åˆ«çš„æ ¼å¼æ‰“å°
</span></span></span><span class=line><span class=cl><span class=cm>    %s å­—ç¬¦ä¸²
</span></span></span><span class=line><span class=cl><span class=cm>    %d æ•´æ•°
</span></span></span><span class=line><span class=cl><span class=cm>    %t å¸ƒå°”å€¼true|false
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>name</span> <span class=p>=</span> <span class=s>&#34;minho&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>id</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;name: %T, id: %T\n&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;name: %v, id: %v\n&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;name: %#v, id: %#v\n&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;name: %s, id: %d\n&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>id</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>$</span> <span class=k>go</span> <span class=nx>run</span> <span class=nx>debug</span><span class=p>.</span><span class=k>go</span> 
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>name</span><span class=p>:</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>id</span><span class=p>:</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>name</span><span class=p>:</span> <span class=nx>minho</span><span class=p>,</span> <span class=nx>id</span><span class=p>:</span> <span class=mi>1</span>   
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>name</span><span class=p>:</span> <span class=s>&#34;minho&#34;</span><span class=p>,</span> <span class=nx>id</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;</span><span class=p>&gt;</span> <span class=nx>name</span><span class=p>:</span> <span class=nx>minho</span><span class=p>,</span> <span class=nx>id</span><span class=p>:</span> <span class=mi>1</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>è¾“å…¥è¾“å‡º</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// è¾“å‡º
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>å ä½ç¬¦</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è¾“å…¥(ä»æ§åˆ¶å°è·å–è¾“å…¥)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Scan</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…ˆå®šä¹‰æ¯”å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1>// fmt.Scan(&amp;å˜é‡å)
</span></span></span></code></pre></td></tr></table></div></div><h3 id=strconv>strconv</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// import &#34;strconv&#34;
</span></span></span><span class=line><span class=cl><span class=c1>// strconvåŒ…å®ç°äº†åŸºæœ¬æ•°æ®ç±»å‹å’Œå…¶å­—ç¬¦ä¸²è¡¨ç¤ºçš„ç›¸äº’è½¬æ¢
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;strconv&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// i, err := strconv.Atoi(&#34;10&#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// if err != nil {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     panic(err)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Printf(&#34;%T, %v\n&#34;, i, i)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// ä¸Šé¢éƒ¨åˆ†å¯ä»¥å†™åœ¨ä¸€è¡Œ ifæ”¾åœ¨æœ€å‰é¢ è¿™æ ·å˜é‡i errå°±æˆäº†ifå—çš„å±€éƒ¨å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>Atoi</span><span class=p>(</span><span class=s>&#34;10&#34;</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span> <span class=c1>// string =&gt; int
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nb>panic</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// int =&gt; string
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>Itoa</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>Itoa</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// string =&gt; float64
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>f</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>ParseFloat</span><span class=p>(</span><span class=s>&#34;12.2&#34;</span><span class=p>,</span> <span class=mi>64</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nb>panic</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>f</span><span class=p>,</span> <span class=nx>f</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// float64 =&gt; string
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strconv</span><span class=p>.</span><span class=nf>FormatFloat</span><span class=p>(</span><span class=mf>12.2</span><span class=p>,</span> <span class=sc>&#39;E&#39;</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>64</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strconv</span><span class=p>.</span><span class=nf>FormatFloat</span><span class=p>(</span><span class=mf>12.2</span><span class=p>,</span> <span class=sc>&#39;f&#39;</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>64</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// string =&gt; int8 int16 int32 int64 -&gt; ParseInt ParseUint
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// int8 int16 int32 int64 =&gt; string -&gt; FormatInt FormatUint
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=strings>strings</h3><p><a class=link href=https://golang.google.cn/pkg/strings/ target=_blank rel=noopener>ç”¨äºæ“ä½œå­—ç¬¦çš„ç®€å•å‡½æ•°</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;strings&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Compare</span><span class=p>(</span><span class=s>&#34;abc&#34;</span><span class=p>,</span> <span class=s>&#34;ade&#34;</span><span class=p>))</span>        <span class=c1>// -1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Contains</span><span class=p>(</span><span class=s>&#34;abc&#34;</span><span class=p>,</span> <span class=s>&#34;ab&#34;</span><span class=p>))</span>        <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Count</span><span class=p>(</span><span class=s>&#34;abcabcabc&#34;</span><span class=p>,</span> <span class=s>&#34;ab&#34;</span><span class=p>))</span>     <span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>EqualFold</span><span class=p>(</span><span class=s>&#34;ab&#34;</span><span class=p>,</span> <span class=s>&#34;AB&#34;</span><span class=p>))</span>        <span class=c1>// true æ¯”è¾ƒ å¿½ç•¥å¤§å°å†™
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Fields</span><span class=p>(</span><span class=s>&#34;a b\tc\r\nd\fe&#34;</span><span class=p>))</span>     <span class=c1>// [a b c d e]
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>HasPrefix</span><span class=p>(</span><span class=s>&#34;test.go&#34;</span><span class=p>,</span> <span class=s>&#34;test&#34;</span><span class=p>))</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>HasSuffix</span><span class=p>(</span><span class=s>&#34;test.go&#34;</span><span class=p>,</span> <span class=s>&#34;.exe&#34;</span><span class=p>))</span> <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Index</span><span class=p>(</span><span class=s>&#34;1abcabc&#34;</span><span class=p>,</span> <span class=s>&#34;ab&#34;</span><span class=p>))</span>       <span class=c1>// 1 å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­å‡ºç°çš„ä½ç½®(ç´¢å¼•) æ²¡æ‰¾åˆ°è¿”å›-1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>LastIndex</span><span class=p>(</span><span class=s>&#34;1abcabc&#34;</span><span class=p>,</span> <span class=s>&#34;ab&#34;</span><span class=p>))</span>   <span class=c1>// 4
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// è¿æ¥ä¸åˆ†å‰²
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Join</span><span class=p>([]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;a&#34;</span><span class=p>,</span> <span class=s>&#34;b&#34;</span><span class=p>,</span> <span class=s>&#34;c&#34;</span><span class=p>},</span> <span class=s>&#34;-&#34;</span><span class=p>))</span> <span class=c1>// a-b-c
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Split</span><span class=p>(</span><span class=s>&#34;a-b-c&#34;</span><span class=p>,</span> <span class=s>&#34;-&#34;</span><span class=p>))</span>                <span class=c1>// åˆ†å‰²ä¸ºåˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>SplitN</span><span class=p>(</span><span class=s>&#34;a-b-c&#34;</span><span class=p>,</span> <span class=s>&#34;-&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>            <span class=c1>// [a b-c]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Repeat</span><span class=p>(</span><span class=s>&#34;*&#34;</span><span class=p>,</span> <span class=mi>20</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Replace</span><span class=p>(</span><span class=s>&#34;abc,abc,abcd, abd&#34;</span><span class=p>,</span> <span class=s>&#34;abc&#34;</span><span class=p>,</span> <span class=s>&#34;xyz&#34;</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>))</span> <span class=c1>// -1 == ReplaceAll
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>Trim</span><span class=p>(</span><span class=s>&#34;bcaAbcdeacb&#34;</span><span class=p>,</span> <span class=s>&#34;abc&#34;</span><span class=p>))</span> <span class=c1>// Abcde å·¦å³éƒ½ç§»é™¤
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// TrimLeft/TrimRight å’Œ TrimSuffix/TrimPreffix åŒºåˆ«
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// TrimLeft/TrimRight æŠŠç»™å‡ºçš„å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ éƒ½å»ç›®æ ‡å­—ç¬¦ä¸²ä¸­ç§»é™¤
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// TrimSuffix/TrimPreffix æŠŠç»™å‡ºçš„å­—ç¬¦ä¸²å½“ä½œä¸€ä¸ªæ•´ä½“ å»ç›®æ ‡å­—ç¬¦ä¸²ä¸­ç§»é™¤
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>strings</span><span class=p>.</span><span class=nf>TrimSpace</span><span class=p>(</span><span class=s>&#34; abc abc\r\n\f&#34;</span><span class=p>))</span> <span class=c1>// abc abc å»é™¤å‰åç©ºç™½å­—ç¬¦
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç±»æ¯” bytesåŒ… ä¸€ä¸ªå¯¹å­—ç¬¦ä¸²æ“ä½œ ä¸€ä¸ªå¯¹å­—èŠ‚åˆ‡ç‰‡æ“ä½œ
</span></span></span></code></pre></td></tr></table></div></div><h3 id=sync>sync</h3><h4 id=syncatomic>sync.atomic</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åŸå­æ“ä½œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>åŸå­æ“ä½œæ˜¯æŒ‡è¿‡ç¨‹ä¸­ä¸èƒ½ä¸­æ–­çš„æ“ä½œ</span><span class=nx>s</span> <span class=nx>Go</span><span class=err>è¯­è¨€</span><span class=nx>sync</span><span class=o>/</span><span class=nx>atomic</span><span class=err>åŒ…ä¸­æä¾›äº†äº”ç±»åŸå­æ“ä½œå‡½æ•°</span> <span class=err>å…¶æ“ä½œå¯¹è±¡ä¸ºæ•´æ•°å‹æˆ–æ•´æ•°æŒ‡é’ˆ</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>-</span> <span class=nx>Add</span><span class=o>*</span> <span class=err>å¢åŠ </span><span class=o>/</span><span class=err>å‡å°‘</span><span class=nx>s</span>
</span></span><span class=line><span class=cl><span class=o>-</span> <span class=nx>Load</span><span class=o>*</span> <span class=err>è½½å…¥</span>
</span></span><span class=line><span class=cl><span class=o>-</span> <span class=nx>Store</span><span class=o>*</span> <span class=err>å­˜å‚¨</span>
</span></span><span class=line><span class=cl><span class=o>-</span> <span class=nx>Swap</span><span class=o>*</span> <span class=err>æ›´æ–°</span>
</span></span><span class=line><span class=cl><span class=o>-</span> <span class=nx>CompareAndSwap</span><span class=o>*</span> <span class=err>æ¯”è¾ƒç¬¬ä¸€ä¸ªå‚æ•°å¼•ç”¨å€¼æ˜¯å¦ä¸ç¬¬äºŒä¸ªå‚æ•°å€¼ç›¸åŒ</span> <span class=err>è‹¥ç›¸åŒåˆ™å°†ç¬¬ä¸€ä¸ªå‚æ•°å€¼æ›´æ–°ä¸ºç¬¬ä¸‰ä¸ªå‚æ•°</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å¯¹å…±äº«å†…å­˜æ“ä½œ - åŠ é”
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sync&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>counter</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>wg</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>locker</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>Mutex</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=nx>x</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>x</span> <span class=p>&lt;</span> <span class=mi>10000</span><span class=p>;</span> <span class=nx>x</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>locker</span><span class=p>.</span><span class=nf>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=nx>counter</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                <span class=nx>locker</span><span class=p>.</span><span class=nf>Unlock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}()</span>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=nx>x</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>x</span> <span class=p>&lt;</span> <span class=mi>10000</span><span class=p>;</span> <span class=nx>x</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>locker</span><span class=p>.</span><span class=nf>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=nx>counter</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                <span class=nx>locker</span><span class=p>.</span><span class=nf>Unlock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Wait</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>counter</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ä¸åŠ goå…³é”®å­—ä½¿ç”¨åç¨‹ ç»“æœä¸º0
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ä½¿ç”¨goå¯åŠ¨åç¨‹ä¹‹å å¯¹åŒä¸€ä¸ªå†…å­˜(&amp;counter)è¿›è¡Œæ“ä½œ ä¼šæœ‰å†²çª éœ€è¦åŠ é” æˆ– åŸå­æ“ä½œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åŸå­æ“ä½œ æ“ä½œç±»å‹æœ‰é™ ä½¿ç”¨è¾ƒå°‘
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sync&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sync/atomic&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>counter</span> <span class=kt>int64</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>wg</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=nx>x</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>x</span> <span class=p>&lt;</span> <span class=mi>10000</span><span class=p>;</span> <span class=nx>x</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>atomic</span><span class=p>.</span><span class=nf>AddInt64</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>counter</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}()</span>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=nx>x</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>x</span> <span class=p>&lt;</span> <span class=mi>10000</span><span class=p>;</span> <span class=nx>x</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>atomic</span><span class=p>.</span><span class=nf>AddInt64</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>counter</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Wait</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>counter</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=syncmutexrwmutex>sync.Mutex/RWMutex</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// sync.Mutex äº’æ–¥é”
</span></span></span><span class=line><span class=cl><span class=c1>// sync.RWMutex è¯»å†™é”
</span></span></span><span class=line><span class=cl><span class=c1>// obj =&gt; å†™write: g1 write; g2 write éœ€è¦åŠ é” ä¸èƒ½åŒæ—¶å†™ äº’æ–¥ =&gt; äº’æ–¥é”
</span></span></span><span class=line><span class=cl><span class=c1>// obj =&gt; è¯»read: g1 read; g2 write æ­£åœ¨å†™ä¸è®©è¯» æ­£åœ¨è¯»ä¸è®©å†™ =&gt; äº’æ–¥é”
</span></span></span><span class=line><span class=cl><span class=c1>// obj =&gt; è¯»readï¼š g1 read; g2 read æ­£åœ¨è¯»è¢«å…¶ä»–è¯»(å¯ä»¥å…è®¸ å¦‚æœä½¿ç”¨Mutex æœ‰é”ä¸ä¼šè®©å…¶ä»–åç¨‹è¯») =&gt; è¯»å†™é”
</span></span></span></code></pre></td></tr></table></div></div><h4 id=syncmap>sync.Map</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Goçš„å†…ç½®ç±»å‹ map ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„
</span></span></span><span class=line><span class=cl><span class=c1>// sync.Mapæ˜¯çº¿ç¨‹å®‰å…¨çš„ ä½†æ“ä½œçš„ç±»å‹éƒ½æ˜¯æ¥å£ç±»å‹ éœ€è¦è¿›è¡Œæ–­è¨€(ç±»å‹è½¬æ¢)
</span></span></span></code></pre></td></tr></table></div></div><h4 id=synconce>sync.Once</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// æ§åˆ¶ç¨‹åºåªæ‰§è¡Œä¸€æ¬¡ åŒ…æ‹¬å¹¶å‘çš„æƒ…å†µä¸‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sync&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>conf</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;conf&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>once</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>Once</span>
</span></span><span class=line><span class=cl>    <span class=c1>// once.Do(conf)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// once.Do(conf)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// once.Do(conf)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>wg</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>once</span><span class=p>.</span><span class=nf>Do</span><span class=p>(</span><span class=nx>conf</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1>// conf()
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Wait</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=syncpool>sync.Pool</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// sync.Pool
</span></span></span><span class=line><span class=cl><span class=c1>// éœ€è¦èµ„æº ä»æ± å­é‡Œé¢è·å– å½“æ± å­ä¸­æ²¡æœ‰ä¼šè¿›è¡Œåˆ›å»ºå¹¶è¿”å› æœ‰åˆ™ç›´æ¥å¤ç”¨ ç”¨å®Œåå½’è¿˜ èµ„æºçš„é‡å¤åˆ©ç”¨
</span></span></span><span class=line><span class=cl><span class=c1>// å¯¹è±¡åˆ›å»ºæ—¶è€—è´¹èµ„æº
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// ç½‘ç»œè¿æ¥æ± 
</span></span></span><span class=line><span class=cl><span class=c1>// æ•°æ®åº“è¿æ¥æ± 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sync&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>objPool</span> <span class=o>:=</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>Pool</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>New</span><span class=p>:</span> <span class=kd>func</span><span class=p>()</span> <span class=kd>interface</span><span class=p>{}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;new&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=s>&#34;123456789&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>obj</span> <span class=o>:=</span> <span class=nx>objPool</span><span class=p>.</span><span class=nf>Get</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>obj</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>obj2</span> <span class=o>:=</span> <span class=nx>objPool</span><span class=p>.</span><span class=nf>Get</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>obj2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>objPool</span><span class=p>.</span><span class=nf>Put</span><span class=p>(</span><span class=nx>obj</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>obj3</span> <span class=o>:=</span> <span class=nx>objPool</span><span class=p>.</span><span class=nf>Get</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>obj3</span><span class=p>)</span> <span class=c1>// ç›´æ¥æ‰“å°123..9 ä¸ä¼šè°ƒç”¨æ‰“å°new
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è‡ªå®šä¹‰è¿æ¥æ± ç»“æ„ä½“
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>TCPPool</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>addr</span>    <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>pool</span>    <span class=o>*</span><span class=nx>sync</span><span class=p>.</span><span class=nx>Pool</span>
</span></span><span class=line><span class=cl>    <span class=nx>max</span>        <span class=kt>int</span> <span class=c1>// æ± å­ä¸­ä¿æŒçš„ æœ€å¤§è¿æ¥æ•° è¶…è¿‡æŠ¥é”™
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>idle</span>    <span class=kt>int</span> <span class=c1>// æ± å­ä¸­é—²ç½®çš„è¿æ¥æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>min</span>     <span class=kt>int</span> <span class=c1>// æ± å­ä¸­æœ€å°çš„è¿æ¥æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>poolCnt</span> <span class=kt>int</span> <span class=c1>// æ± å­çš„è¿æ¥æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>count</span>     <span class=kt>int</span> <span class=c1>// æ€»çš„è¿æ¥æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>locker</span>     <span class=o>*</span><span class=nx>sync</span><span class=p>.</span><span class=nx>Mutex</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=runtime>runtime</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// go doc runtime goè¿è¡Œæ—¶çš„ä¸€äº›é…ç½®ä¿¡æ¯
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>GOMAXPROCS</span><span class=p>(</span><span class=nx>n</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=c1>// é…ç½®GMPæ¨¡å‹ä¸­ Pçš„æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>GOROOT</span><span class=p>()</span> <span class=kt>string</span> <span class=c1>// è·å–Goçš„å®‰è£…ç›®å½•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>Gosched</span><span class=p>()</span> <span class=c1>// è®©å‡ºæ—¶é—´ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>NumCPU</span><span class=p>()</span> <span class=kt>int</span> <span class=c1>// è·å–CPUæ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>NumGoroutine</span><span class=p>()</span> <span class=kt>int</span> <span class=c1>// è·å–åç¨‹æ•°é‡
</span></span></span></code></pre></td></tr></table></div></div><h3 id=logr>logr</h3><h4 id=logrus>logrus</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>logger</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;path&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;runtime&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;strconv&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>log</span> <span class=s>&#34;github.com/sirupsen/logrus&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;gopkg.in/natefinch/lumberjack.v2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>RotateLogger</span><span class=p>(</span><span class=nx>logName</span> <span class=kt>string</span><span class=p>)</span> <span class=o>*</span><span class=nx>lumberjack</span><span class=p>.</span><span class=nx>Logger</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>cfg</span> <span class=o>:=</span> <span class=nx>global</span><span class=p>.</span><span class=nx>CFG</span><span class=p>.</span><span class=nx>Log</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>lumberjack</span><span class=p>.</span><span class=nx>Logger</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Filename</span><span class=p>:</span>   <span class=nx>logName</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>MaxSize</span><span class=p>:</span>    <span class=nx>cfg</span><span class=p>.</span><span class=nx>MaxSize</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>MaxBackups</span><span class=p>:</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>MaxBackups</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>LocalTime</span><span class=p>:</span>  <span class=nx>cfg</span><span class=p>.</span><span class=nx>LocalTime</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>Compress</span><span class=p>:</span>   <span class=nx>cfg</span><span class=p>.</span><span class=nx>Compress</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Logger</span><span class=p>(</span><span class=nx>cfg</span> <span class=o>*</span><span class=nx>config</span><span class=p>.</span><span class=nx>Config</span><span class=p>)</span> <span class=o>*</span><span class=nx>log</span><span class=p>.</span><span class=nx>Logger</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>ServerLog</span> <span class=o>==</span> <span class=s>&#34;&#34;</span> <span class=o>||</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>MaxSize</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=s>&#34;invalid configurations, please check&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>l</span> <span class=o>:=</span> <span class=nf>RotateLogger</span><span class=p>(</span><span class=nx>cfg</span><span class=p>.</span><span class=nx>ServerLog</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span> <span class=o>:=</span> <span class=nx>log</span><span class=p>.</span><span class=nf>New</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span><span class=p>.</span><span class=nf>SetOutput</span><span class=p>(</span><span class=nx>l</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>level</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>log</span><span class=p>.</span><span class=nf>ParseLevel</span><span class=p>(</span><span class=nx>cfg</span><span class=p>.</span><span class=nx>LogLevel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatalf</span><span class=p>(</span><span class=s>&#34;invalid log level: %s&#34;</span><span class=p>,</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>LogLevel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span><span class=p>.</span><span class=nf>SetLevel</span><span class=p>(</span><span class=nx>level</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span><span class=p>.</span><span class=nf>SetReportCaller</span><span class=p>(</span><span class=nx>cfg</span><span class=p>.</span><span class=nx>ReportCaller</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span><span class=p>.</span><span class=nf>SetFormatter</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>log</span><span class=p>.</span><span class=nx>TextFormatter</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>DisableColors</span><span class=p>:</span>   <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>TimestampFormat</span><span class=p>:</span> <span class=s>&#34;2006-01-02 15:04:05&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>CallerPrettyfier</span><span class=p>:</span> <span class=kd>func</span><span class=p>(</span><span class=nx>f</span> <span class=o>*</span><span class=nx>runtime</span><span class=p>.</span><span class=nx>Frame</span><span class=p>)</span> <span class=p>(</span><span class=nx>function</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>file</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;%s:%s&#34;</span><span class=p>,</span> <span class=nx>path</span><span class=p>.</span><span class=nf>Base</span><span class=p>(</span><span class=nx>f</span><span class=p>.</span><span class=nx>File</span><span class=p>),</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>Itoa</span><span class=p>(</span><span class=nx>f</span><span class=p>.</span><span class=nx>Line</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>l</span><span class=p>.</span><span class=nf>Close</span><span class=p>();</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>logger</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=zap>zap</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>logger</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.uber.org/zap&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;go.uber.org/zap/zapcore&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;gopkg.in/natefinch/lumberjack.v2&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Logger</span><span class=p>(</span><span class=nx>cfg</span> <span class=o>*</span><span class=nx>config</span><span class=p>.</span><span class=nx>Config</span><span class=p>)</span> <span class=o>*</span><span class=nx>zap</span><span class=p>.</span><span class=nx>Logger</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>customLevelEncoder</span> <span class=p>=</span> <span class=kd>func</span><span class=p>(</span><span class=nx>level</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nx>Level</span><span class=p>,</span> <span class=nx>encoder</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nx>PrimitiveArrayEncoder</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>encoder</span><span class=p>.</span><span class=nf>AppendString</span><span class=p>(</span><span class=nx>level</span><span class=p>.</span><span class=nf>String</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>customTimeEncoder</span> <span class=p>=</span> <span class=kd>func</span><span class=p>(</span><span class=nx>t</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span><span class=p>,</span> <span class=nx>encoder</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nx>PrimitiveArrayEncoder</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>encoder</span><span class=p>.</span><span class=nf>AppendString</span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nf>Format</span><span class=p>(</span><span class=s>&#34;2006-01-02 15:04:05.000&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>encoderConfig</span> <span class=o>:=</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nx>EncoderConfig</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>MessageKey</span><span class=p>:</span>     <span class=s>&#34;msg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>LevelKey</span><span class=p>:</span>       <span class=s>&#34;level&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>TimeKey</span><span class=p>:</span>        <span class=s>&#34;time&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>NameKey</span><span class=p>:</span>        <span class=s>&#34;logger&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>CallerKey</span><span class=p>:</span>      <span class=s>&#34;caller&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>StacktraceKey</span><span class=p>:</span>  <span class=s>&#34;stacktrace&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>LineEnding</span><span class=p>:</span>     <span class=nx>zapcore</span><span class=p>.</span><span class=nx>DefaultLineEnding</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>EncodeLevel</span><span class=p>:</span>    <span class=nx>customLevelEncoder</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>EncodeTime</span><span class=p>:</span>     <span class=nx>customTimeEncoder</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>EncodeDuration</span><span class=p>:</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nx>SecondsDurationEncoder</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>EncodeCaller</span><span class=p>:</span>   <span class=nx>zapcore</span><span class=p>.</span><span class=nx>ShortCallerEncoder</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>encoder</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nx>Encoder</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nx>JsonFormat</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>encoder</span> <span class=p>=</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nf>NewJSONEncoder</span><span class=p>(</span><span class=nx>encoderConfig</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>encoder</span> <span class=p>=</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nf>NewConsoleEncoder</span><span class=p>(</span><span class=nx>encoderConfig</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ—¥å¿—è½®è¯¢
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>lumberjackLogger</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>lumberjack</span><span class=p>.</span><span class=nx>Logger</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>Filename</span><span class=p>:</span>   <span class=nx>cfg</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nx>Filename</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>MaxSize</span><span class=p>:</span>    <span class=nx>cfg</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nx>MaxSize</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>MaxAge</span><span class=p>:</span>     <span class=nx>cfg</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nx>MaxAge</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>MaxBackups</span><span class=p>:</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nx>MaxBackups</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>Compress</span><span class=p>:</span>   <span class=nx>cfg</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nx>Compress</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>syncer</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nx>WriteSyncer</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nx>LogInConsole</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>syncer</span> <span class=p>=</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nf>NewMultiWriteSyncer</span><span class=p>(</span><span class=nx>zapcore</span><span class=p>.</span><span class=nf>AddSync</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdout</span><span class=p>),</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nf>AddSync</span><span class=p>(</span><span class=nx>lumberjackLogger</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>syncer</span> <span class=p>=</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nf>AddSync</span><span class=p>(</span><span class=nx>lumberjackLogger</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>core</span> <span class=o>:=</span> <span class=nx>zapcore</span><span class=p>.</span><span class=nf>NewCore</span><span class=p>(</span><span class=nx>encoder</span><span class=p>,</span> <span class=nx>syncer</span><span class=p>,</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nf>UnmarshalLevel</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nx>logger</span> <span class=o>:=</span> <span class=nx>zap</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>core</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>cfg</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nx>ShowLine</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>logger</span> <span class=p>=</span> <span class=nx>logger</span><span class=p>.</span><span class=nf>WithOptions</span><span class=p>(</span><span class=nx>zap</span><span class=p>.</span><span class=nf>AddCaller</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>logger</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=é¢å‘å¯¹è±¡>é¢å‘å¯¹è±¡</h2><h3 id=è‡ªå®šä¹‰ç±»å‹>è‡ªå®šä¹‰ç±»å‹</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=o>-</span> <span class=err>æƒ³è¦è‡ªå·±å®šä¹‰ä¸€ä¸ªç”±ä¸åŒç±»å‹å…ƒç´ </span><span class=p>(</span><span class=err>å±æ€§</span> <span class=err>å­—æ®µ</span><span class=p>)</span><span class=err>ç»„æˆä¸€ä¸ªå¤åˆç±»å‹</span> <span class=o>-</span> <span class=err>ç»“æ„ä½“</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>åˆ«å</span><span class=o>&amp;</span><span class=err>é‡æ–°å®šä¹‰</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>åˆ«å</span> <span class=err>ä¸åŸæœ‰ç±»å‹ç›¸åŒ</span> <span class=err>æ— åŒºåˆ«</span> <span class=err>ä¸èƒ½å®šä¹‰æ–°çš„æ–¹æ³•</span>
</span></span><span class=line><span class=cl>  <span class=o>-</span> <span class=err>é‡æ–°å®šä¹‰ï¼šå°†ç°æœ‰çš„ç±»å‹è¿›è¡Œé‡æ–°å®šä¹‰</span> <span class=err>å¯¹æ–°çš„ç±»å‹æä¾›ä¸€äº›æ–¹æ³•</span> <span class=err>ä¸åŸæœ‰ç±»å‹çš„ç±»å‹æ— å…³</span> <span class=err>å…·æœ‰åŸæœ‰ç±»å‹ç‰¹æ€§</span> <span class=err>ä½†æ˜¯å¯ä»¥ä¸åŸæœ‰ç±»å‹è¿›è¡Œç›¸äº’è½¬æ¢</span> <span class=err>å¦‚ï¼šè®¡æ•°åŠŸèƒ½</span> <span class=kt>int</span> <span class=o>-</span><span class=p>&gt;</span> <span class=err>è®¡æ•°ç±»å‹</span><span class=p>;</span> <span class=nx>http</span><span class=err>åŒ…é‡Œçš„</span><span class=nx>Header</span> <span class=kd>type</span> <span class=nx>Header</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>][]</span><span class=kt>string</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>é¢å‘å¯¹è±¡ï¼š</span>
</span></span><span class=line><span class=cl>  <span class=err>ä»£ç å¤ç”¨</span> <span class=p>=&gt;</span> <span class=err>ç»§æ‰¿</span> <span class=err>ç»„åˆ</span>
</span></span><span class=line><span class=cl>  <span class=nx>Go</span><span class=p>:</span> <span class=err>åµŒå…¥</span> <span class=p>=&gt;</span> <span class=err>ç»„åˆæ¨¡å¼</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å®šä¹‰>å®šä¹‰</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å®šä¹‰çš„å…³é”®å­—
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span>   <span class=c1>// å˜é‡å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>const</span> <span class=c1>// å¸¸é‡å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span>  <span class=c1>// å‡½æ•°å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span>  <span class=c1>// è‡ªå®šä¹‰ç±»å‹å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>TypeName</span> <span class=nx>Formatter</span>
</span></span><span class=line><span class=cl><span class=err>é‡å®šä¹‰ï¼š</span><span class=kd>type</span> <span class=nx>Counter</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=err>ç»“æ„ä½“ï¼š</span><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=err>å±æ€§åç§°</span><span class=mi>1</span> <span class=err>å±æ€§ç±»å‹</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=err>å±æ€§åç§°</span><span class=mi>2</span> <span class=err>å±æ€§ç±»å‹</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=err>å±æ€§åç§°</span><span class=mi>3</span> <span class=err>å±æ€§ç±»å‹</span><span class=mi>3</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>åˆ«åï¼š</span><span class=kd>type</span> <span class=nx>TypeName</span> <span class=p>=</span> <span class=nx>Formatter</span>
</span></span><span class=line><span class=cl>  <span class=kd>type</span> <span class=kt>byte</span> <span class=p>=</span> <span class=kt>uint8</span>
</span></span><span class=line><span class=cl>  <span class=kd>type</span> <span class=kt>rune</span> <span class=p>=</span> <span class=kt>int32</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=åˆ«åä¸é‡å®šä¹‰>åˆ«åä¸é‡å®šä¹‰</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Counter</span> <span class=p>=</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Counter2</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>count</span> <span class=nx>Counter</span>
</span></span><span class=line><span class=cl>    <span class=nx>count</span> <span class=p>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T\n&#34;</span><span class=p>,</span> <span class=nx>count</span><span class=p>)</span> <span class=c1>// int
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>count2</span> <span class=nx>Counter2</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T %v\n&#34;</span><span class=p>,</span> <span class=nx>count2</span><span class=p>,</span> <span class=nx>count2</span><span class=p>)</span> <span class=c1>// main.Counter2 0
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>count2</span> <span class=o>+=</span> <span class=nf>Counter2</span><span class=p>(</span><span class=nx>count</span><span class=p>)</span> <span class=c1>// å¯ä»¥ä¸åŸç±»å‹è¿›è¡Œç±»å‹è½¬æ¢
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>count2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç»“æ„ä½“>ç»“æ„ä½“</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å®šä¹‰ç»“æ„ä½“ =&gt; ç±» =&gt; å°è£…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>type StructName struct {
</span></span></span><span class=line><span class=cl><span class=cm>    Field1 FieldType1
</span></span></span><span class=line><span class=cl><span class=cm>    Field2 FieldType2
</span></span></span><span class=line><span class=cl><span class=cm>    ...
</span></span></span><span class=line><span class=cl><span class=cm>}
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>type User struct {
</span></span></span><span class=line><span class=cl><span class=cm>    id         int
</span></span></span><span class=line><span class=cl><span class=cm>    name       string
</span></span></span><span class=line><span class=cl><span class=cm>    addr       string
</span></span></span><span class=line><span class=cl><span class=cm>    tel        string
</span></span></span><span class=line><span class=cl><span class=cm>    birthday   string/uinxtime/time.Time é¦–é€‰time
</span></span></span><span class=line><span class=cl><span class=cm>    created_at string/uinxtime/time.Time
</span></span></span><span class=line><span class=cl><span class=cm>    updated_at time.Time
</span></span></span><span class=line><span class=cl><span class=cm>    flag       bool // æ ‡è¯†é€»è¾‘åˆ é™¤
</span></span></span><span class=line><span class=cl><span class=cm>    status     int // 1åˆ é™¤ 0æœªåˆ é™¤
</span></span></span><span class=line><span class=cl><span class=cm>    deleted_at *time.Time // å·²åˆ é™¤: åˆ é™¤æ—¶é—´ énil æœªåˆ é™¤ï¼šnil æŒ‡é’ˆé›¶å€¼
</span></span></span><span class=line><span class=cl><span class=cm>}
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span>        <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span>      <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>addr</span>      <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>tel</span>       <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>brithday</span>  <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span>
</span></span><span class=line><span class=cl>    <span class=nx>createdAt</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span>
</span></span><span class=line><span class=cl>    <span class=nx>updatedAt</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span>
</span></span><span class=line><span class=cl>    <span class=nx>flag</span>      <span class=kt>bool</span>
</span></span><span class=line><span class=cl>    <span class=nx>status</span>    <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>deletedAt</span> <span class=o>*</span><span class=nx>time</span><span class=p>.</span><span class=nx>Time</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç±» æ„é€ å™¨ =&gt; åˆ›å»ºå¯¹åº”ç±»çš„å®ä¾‹(å¯¹è±¡/å˜é‡) // Goä¸­æ— æ„é€ å™¨çš„è¯´æ³•
</span></span></span><span class=line><span class=cl><span class=c1>// å‡½æ•° N(n)ew ç»“æ„ä½“åç§° æ„å»ºç»“æ„ä½“çš„(å€¼/æŒ‡é’ˆ)å¯¹è±¡
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NewUser</span><span class=p>(</span><span class=nx>id</span> <span class=kt>int</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>addr</span><span class=p>,</span> <span class=nx>tel</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>birtday</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span><span class=p>)</span> <span class=nx>User</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>User</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span><span class=p>:</span>        <span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=p>:</span>      <span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>addr</span><span class=p>:</span>      <span class=nx>addr</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>tel</span><span class=p>:</span>       <span class=nx>tel</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>brithday</span><span class=p>:</span>  <span class=nx>birtday</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>createdAt</span><span class=p>:</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=nx>updatedAt</span><span class=p>:</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=nx>flag</span><span class=p>:</span>      <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>status</span><span class=p>:</span>    <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>deletedAt</span><span class=p>:</span> <span class=kc>nil</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è¿”å›æŒ‡é’ˆå¯¹è±¡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>NewUserPoint</span><span class=p>(</span><span class=nx>id</span> <span class=kt>int</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>addr</span><span class=p>,</span> <span class=nx>tel</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>birtday</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span><span class=p>)</span> <span class=o>*</span><span class=nx>User</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>&amp;</span><span class=nx>User</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span><span class=p>:</span>        <span class=nx>id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=p>:</span>      <span class=nx>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>addr</span><span class=p>:</span>      <span class=nx>addr</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>tel</span><span class=p>:</span>       <span class=nx>tel</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>brithday</span><span class=p>:</span>  <span class=nx>birtday</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>createdAt</span><span class=p>:</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=nx>updatedAt</span><span class=p>:</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=nx>flag</span><span class=p>:</span>      <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>status</span><span class=p>:</span>    <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>deletedAt</span><span class=p>:</span> <span class=kc>nil</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å®šä¹‰Userç±»å‹çš„å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>u</span> <span class=nx>User</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>)</span> <span class=c1>// main.User
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// é›¶å€¼ =&gt; æ‰€æœ‰å±æ€§çš„é›¶å€¼ç»„æˆçš„ä¸€ä¸ªUserç±»å‹çš„å˜é‡å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%v\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>)</span> <span class=c1>// énil
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// èµ‹å€¼ å­—é¢é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// è®¾ç½®å€¼ æŒ‰ç…§ç»“æ„ä½“ä¸­å±æ€§å®šä¹‰é¢é¡ºåºè®¾ç½® -&gt; éœ€è¦ç»™æ‰€æœ‰å±æ€§éƒ½è¿›è¡Œèµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>u</span> <span class=p>=</span> <span class=nx>User</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=s>&#34;minho&#34;</span><span class=p>,</span> <span class=s>&#34;æˆéƒ½&#34;</span><span class=p>,</span> <span class=s>&#34;13424244434&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>(),</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>(),</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>(),</span> <span class=kc>false</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=kc>nil</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æŒ‡å®šåç§°èµ‹å€¼ æœªæŒ‡å®šçš„å±æ€§åç§° å¯¹åº”ç±»å‹çš„é›¶å€¼è¿›è¡Œåˆå§‹åŒ–
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>u</span> <span class=p>=</span> <span class=nx>User</span><span class=p>{</span><span class=nx>id</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nx>name</span><span class=p>:</span> <span class=s>&#34;KATHR1NE&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å±æ€§è¿›è¡Œè®¿é—®å’Œä¿®æ”¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>u</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span> <span class=nx>u</span><span class=p>.</span><span class=nx>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span><span class=p>.</span><span class=nx>addr</span> <span class=p>=</span> <span class=s>&#34;åŒ—äº¬&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ç»“æ„ä½“ å€¼ç±»å‹ èµ‹å€¼ä¿®æ”¹ä¸å½±å“åŸæ¥çš„å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æŒ‡é’ˆç±»å‹çš„å¯¹è±¡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>u3</span> <span class=o>*</span><span class=nx>User</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %v\n&#34;</span><span class=p>,</span> <span class=nx>u3</span><span class=p>,</span> <span class=nx>u3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æŒ‡é’ˆèµ‹å€¼ =&gt; å–å¼•ç”¨ &amp;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// new ç”³è¯·ç©ºé—´å¹¶å¯¹å…ƒç´ ä½¿ç”¨0å€¼è¿›è¡Œåˆå§‹åŒ– å–åœ°å€ èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>u3</span> <span class=p>=</span> <span class=o>&amp;</span><span class=nx>u</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>u3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>u4</span> <span class=o>*</span><span class=nx>User</span> <span class=p>=</span> <span class=nb>new</span><span class=p>(</span><span class=nx>User</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>u4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å­—é¢é‡å–å¼•ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>u5</span> <span class=o>*</span><span class=nx>User</span> <span class=p>=</span> <span class=o>&amp;</span><span class=nx>User</span><span class=p>{}</span>  <span class=c1>// User{} Userçš„é›¶å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>u5</span><span class=p>)</span> <span class=c1>// ä¸ new(User)ä¸€æ ·
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;################&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>u6</span> <span class=o>:=</span> <span class=nf>NewUser</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=s>&#34;lemon&#34;</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nx>u7</span> <span class=o>:=</span> <span class=nf>NewUserPoint</span><span class=p>(</span><span class=mi>11</span><span class=p>,</span> <span class=s>&#34;kathr1ne&#34;</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T %v\n&#34;</span><span class=p>,</span> <span class=nx>u6</span><span class=p>,</span> <span class=nx>u6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T %v\n&#34;</span><span class=p>,</span> <span class=nx>u7</span><span class=p>,</span> <span class=nx>u7</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=åŒ¿åç»“æ„ä½“>åŒ¿åç»“æ„ä½“</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åŒ¿åç»“æ„ä½“ =&gt; ä¸å®šä¹‰åç§° =&gt; ä¸èƒ½å†å®šä¹‰å¯¹åº”çš„å˜é‡ =&gt; åªéœ€è¦å®šä¹‰è¯¥ç§ç»“æ„çš„ä¸€ä¸ªå˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>user</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>id</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T\n&#34;</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span>  <span class=c1>// struct {id: int name: string} 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span> <span class=c1>// å¯¹åº”ç±»å‹çš„é›¶å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä½¿ç”¨ï¼š
</span></span></span><span class=line><span class=cl><span class=c1>// ç¨‹åºçš„é…ç½®
</span></span></span><span class=line><span class=cl><span class=c1>// template =&gt; æ•°æ®(åŒ¿åç»“æ„ä½“) =&gt; ä¼ é€’ç»™æ¨¡æ¿
</span></span></span></code></pre></td></tr></table></div></div><h3 id=new-å’Œ-makeçš„åŒºåˆ«>new å’Œ makeçš„åŒºåˆ«</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// new make
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>make</span> <span class=p>=&gt;</span> <span class=err>åˆ›å»ºå¯¹è±¡</span>
</span></span><span class=line><span class=cl>    <span class=nx>slice</span><span class=p>,</span><span class=kd>map</span><span class=p>,</span><span class=kd>chan</span>
</span></span><span class=line><span class=cl><span class=nx>new</span>  <span class=p>=&gt;</span> <span class=err>è¿”å›æŒ‡é’ˆ</span> <span class=err>åˆ›å»ºç»“æ„ä½“æŒ‡é’ˆå¯¹è±¡</span>
</span></span><span class=line><span class=cl>    <span class=nx>new</span> <span class=err>åŸºæœ¬æ•°æ®ç±»å‹</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>i</span> <span class=kt>int</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nx>p</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>i</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>p</span> <span class=o>:=</span> <span class=nb>new</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>new</span><span class=p>(</span><span class=nx>Struct</span><span class=p>)</span> <span class=o>==</span> <span class=o>&amp;</span><span class=nx>Struct</span><span class=p>{}</span> <span class=p>=&gt;</span> <span class=nx>New</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç»“æ„ä½“åµŒå¥—åµŒå…¥ç»„åˆ>ç»“æ„ä½“åµŒå¥—(åµŒå…¥/ç»„åˆ)</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// åœ°å€ç»“æ„ä½“
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Address</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Province</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>City</span>     <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Street</span>   <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å®šä¹‰ç”¨æˆ·ä¿¡æ¯
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>    <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span>  <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Tel</span>   <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Email</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Addr</span>  <span class=nx>Address</span> <span class=c1>// åµŒå…¥Addressç»“æ„ä½“ å³å®šä¹‰Addressç»“æ„ä½“çš„å±æ€§ - å‘½ååµŒå…¥
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>PAddr</span> <span class=o>*</span><span class=nx>Address</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 1. å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>u</span> <span class=nx>User</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>addr</span> <span class=nx>Address</span> <span class=p>=</span> <span class=nx>Address</span><span class=p>{</span><span class=nx>Province</span><span class=p>:</span> <span class=s>&#34;å››å·&#34;</span><span class=p>,</span> <span class=nx>City</span><span class=p>:</span> <span class=s>&#34;æˆéƒ½&#34;</span><span class=p>,</span> <span class=nx>Street</span><span class=p>:</span> <span class=s>&#34;é«˜æ–°&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 2. èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>u</span> <span class=p>=</span> <span class=nx>User</span><span class=p>{</span><span class=nx>Id</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;Minho&#34;</span><span class=p>,</span> <span class=nx>Tel</span><span class=p>:</span> <span class=s>&#34;13308047517&#34;</span><span class=p>,</span> <span class=nx>Email</span><span class=p>:</span> <span class=s>&#34;97431110@qq.com&#34;</span><span class=p>,</span> <span class=nx>Addr</span><span class=p>:</span> <span class=nx>addr</span><span class=p>,</span> <span class=nx>PAddr</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>addr</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 3. å±æ€§çš„è®¿é—®å’Œä¿®æ”¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>u</span><span class=p>.</span><span class=nx>Id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>.</span><span class=nx>Addr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>.</span><span class=nx>PAddr</span><span class=p>,</span> <span class=nx>u</span><span class=p>.</span><span class=nx>PAddr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>u</span><span class=p>.</span><span class=nx>Id</span> <span class=p>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span><span class=p>.</span><span class=nx>Addr</span> <span class=p>=</span> <span class=nx>Address</span><span class=p>{</span><span class=s>&#34;åŒ—äº¬&#34;</span><span class=p>,</span> <span class=s>&#34;åŒ—äº¬&#34;</span><span class=p>,</span> <span class=s>&#34;æµ·å®šåŒº&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span><span class=p>.</span><span class=nx>PAddr</span> <span class=p>=</span> <span class=o>&amp;</span><span class=nx>Address</span><span class=p>{</span><span class=s>&#34;åŒ—äº¬&#34;</span><span class=p>,</span> <span class=s>&#34;åŒ—äº¬&#34;</span><span class=p>,</span> <span class=s>&#34;æ˜Œå¹³åŒº&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>u</span><span class=p>.</span><span class=nx>Addr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>.</span><span class=nx>PAddr</span><span class=p>,</span> <span class=nx>u</span><span class=p>.</span><span class=nx>PAddr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>u</span><span class=p>.</span><span class=nx>Addr</span><span class=p>.</span><span class=nx>Street</span> <span class=p>=</span> <span class=s>&#34;å®‰é™åŒº&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>u</span><span class=p>.</span><span class=nx>Addr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>u</span><span class=p>.</span><span class=nx>PAddr</span><span class=p>.</span><span class=nx>Street</span> <span class=p>=</span> <span class=s>&#34;PPåŒº&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>u</span><span class=p>.</span><span class=nx>PAddr</span><span class=p>.</span><span class=nx>Street</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åŒ¿ååµŒå…¥ ä¸å†™å±æ€§åç§° ç›´æ¥å†™ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Address</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Provice</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>City</span>    <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Street</span>    <span class=kt>string</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>        <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span>    <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Tel</span>        <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Address</span> <span class=c1>// åŒ¿ååµŒå…¥ è‡ªå®šä¹‰å±æ€§åAddress(ä¸ç±»å‹åä¸€è‡´) åªèƒ½åŒ¿ååµŒå…¥ä¸€æ¬¡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>Street</span>    <span class=kt>string</span> <span class=c1>// å±æ€§åä¸åŒ¿ååµŒå…¥å¯¹è±¡å±æ€§åç›¸åŒ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Company</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span>        <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Province</span>    <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// åŒ¿ååµŒå…¥ä¸¤ä¸ªå¯¹è±¡ ä¸¤ä¸ªå¯¹è±¡ä¸­æœ‰ç›¸åŒçš„å±æ€§å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>User2</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>        <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span>    <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Tel</span>        <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Street</span>     <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Address</span>
</span></span><span class=line><span class=cl>    <span class=nx>Company</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å®šä¹‰èµ‹å€¼è®¿é—® å’Œå‘½ååµŒå…¥åŸºæœ¬ä¸€è‡´
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ä¸ä¸€æ ·çš„åœ°æ–¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å½“è®¿é—®åŒ¿ååµŒå…¥å¯¹è±¡çš„å±æ€§æ—¶å¯ä»¥çœç•¥åµŒå…¥å¯¹è±¡çš„å±æ€§å
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>u</span> <span class=nx>User</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>u</span><span class=p>.</span><span class=nx>Street</span><span class=p>)</span> <span class=c1>// ä¼˜å…ˆæŸ¥æ‰¾å½“å‰å¯¹è±¡ è‹¥æ— å†æŸ¥æ‰¾åŒ¿åå¯¹è±¡ä¸­çš„å±æ€§å
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>u2</span> <span class=nx>User2</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>u2</span><span class=p>.</span><span class=nx>Provice</span><span class=p>)</span> <span class=c1>// å¤šä¸ªåŒ¿ååµŒå…¥å¯¹è±¡å…·æœ‰ç›¸åŒå±æ€§å Goç›´æ¥æŠ¥é”™ è¯­è¨€å±‚é¢ ä¸çŸ¥é“é€‰æ‹©å“ªä¸ª(äºŒä¹‰æ€§) Goé™åˆ¶å¼€å‘è€…ä½¿ç”¨å…¨è·¯å¾„    
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å»ºè®®
</span></span></span><span class=line><span class=cl><span class=c1>// 1. ä¸ä½¿ç”¨åŒ¿ååµŒå…¥
</span></span></span><span class=line><span class=cl><span class=c1>// 2. ä½¿ç”¨åŒ¿ååµŒå…¥ è®¿é—®å±æ€§çš„æ—¶å€™ ä½¿ç”¨å…¨è·¯å¾„
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// å¯ä»¥åŒ¿ååµŒå…¥æŒ‡é’ˆå¯¹è±¡
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æ–¹æ³•>æ–¹æ³•</h3><h4 id=å®šä¹‰-1>å®šä¹‰</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// æ–¹æ³•ï¼šç»™ç‰¹å®šç±»å‹å®šä¹‰çš„å‡½æ•° åªèƒ½ç”±ç‰¹å®šçš„ç±»å‹è¿›è¡Œè°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// å‡½æ•°å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>funcName</span><span class=p>(</span><span class=nx>args</span><span class=p>)</span> <span class=nx>returns</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æ–¹æ³•æ¯”å‡½æ•°å¤šå‡º =&gt; æ¥æ”¶è€…
</span></span></span><span class=line><span class=cl><span class=c1>// æ¥æ”¶è€…ï¼šæŒ‡å®šå‡½æ•°å±äºå“ªä¸ªç±»å‹ åªèƒ½ç”±å¯¹åº”çš„ç±»å‹è¿›è¡Œè°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1>// é™¤äº†æ¥æ”¶è€… æ–¹æ³•çš„å‚æ•°/è¿”å›å€¼ ä¸goä¸­çš„å‡½æ•°å®Œå…¨ä¸€è‡´
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// æ–¹æ³•å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>receiver</span><span class=p>)</span> <span class=nf>methodName</span><span class=p>(</span><span class=nx>args</span><span class=p>)</span> <span class=nx>returns</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æ¥æ”¶è€…ä¹Ÿæ˜¯ä¸€ä¸ªå‚æ•°ï¼š t T å‚æ•°ç±»å‹ æ–¹æ³•æ‰€å±çš„ç±»å‹ è¯¥æ–¹æ³•åªèƒ½ç”±Tç±»å‹çš„å¯¹è±¡è¿›è¡Œè°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1>// T è‡ªå®šä¹‰ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1>// t å˜é‡å åœ¨å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ç”¨æ¥ä¼ é€’è°ƒç”¨çš„å¯¹è±¡
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=mf>1.</span> <span class=err>å€¼æ¥æ”¶è€…ï¼š</span><span class=nx>t</span> <span class=nx>T</span>
</span></span><span class=line><span class=cl><span class=mf>2.</span> <span class=err>æŒ‡é’ˆæ¥æ”¶è€…ï¼š</span><span class=nx>t</span> <span class=o>*</span><span class=nx>T</span>
</span></span><span class=line><span class=cl><span class=mf>3.</span> <span class=err>æ–¹æ³•å†…ä¸éœ€è¦è®¿é—®</span><span class=o>/</span><span class=err>ä¿®æ”¹</span><span class=nx>t</span><span class=err>å¯¹è±¡çš„å±æ€§</span> <span class=err>å¯ä»¥æŠŠ</span><span class=nx>t</span><span class=err>çœç•¥</span> <span class=err>ä¿ç•™ç±»å‹</span><span class=nx>T</span><span class=err>å³å¯</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span>    <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span>  <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>tel</span>   <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>email</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å®šä¹‰Userçš„æ–¹æ³• è¿”å›ç”¨æˆ·å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>u</span> <span class=nx>User</span><span class=p>)</span> <span class=nf>GetName</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// u: è°ƒç”¨è€…çš„å€¼æ‹·è´
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=s>&#34;GetName:&#34;</span> <span class=o>+</span> <span class=nx>u</span><span class=p>.</span><span class=nx>name</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä¿®æ”¹åç§°çš„æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>u</span> <span class=nx>User</span><span class=p>)</span> <span class=nf>SetName</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span><span class=p>.</span><span class=nx>name</span> <span class=p>=</span> <span class=nx>name</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æŒ‡é’ˆæ¥æ”¶è€…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>u</span> <span class=o>*</span><span class=nx>User</span><span class=p>)</span> <span class=nf>PsetName</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span><span class=p>.</span><span class=nx>name</span> <span class=p>=</span> <span class=nx>name</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>User</span><span class=p>)</span> <span class=nf>No</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;No&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span> <span class=o>:=</span> <span class=nx>User</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span> <span class=s>&#34;minho&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>u</span><span class=p>.</span><span class=nf>GetName</span><span class=p>())</span> <span class=c1>// è°ƒç”¨æ–¹æ³• å¯¹è±¡.æ–¹æ³•åç§°(å‚æ•°)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>u</span><span class=p>.</span><span class=nf>SetName</span><span class=p>(</span><span class=s>&#34;karuin&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>u</span><span class=p>.</span><span class=nf>GetName</span><span class=p>())</span> <span class=c1>// GetName:minho
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// è°ƒç”¨PsetName
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// è¯­æ³•ç³–ï¼šå¦‚æœæ¥æ”¶è€…æ—¶æŒ‡é’ˆæ¥æ”¶è€… è°ƒç”¨å¯ä»¥ä½¿ç”¨å€¼å¯¹è±¡ =&gt; Goè‡ªåŠ¨è¿›è¡Œå–å¼•ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>u</span><span class=p>.</span><span class=nf>PsetName</span><span class=p>(</span><span class=s>&#34;lemon&#34;</span><span class=p>)</span>      <span class=c1>// =&gt; (&amp;u).PsetName(&#34;lemon&#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>u</span><span class=p>.</span><span class=nf>GetName</span><span class=p>())</span> <span class=c1>// GetName:lemon
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>p</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>User</span><span class=p>{</span><span class=nx>name</span><span class=p>:</span> <span class=s>&#34;MM&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è¯­æ³•ç³– æ¥æ”¶è€…æ˜¯å€¼æ¥æ”¶è€…è°ƒç”¨æŒ‡é’ˆå¯¹è±¡ =&gt; è‡ªåŠ¨è¿›è¡Œè§£å¼•ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>p</span><span class=p>.</span><span class=nf>GetName</span><span class=p>())</span> <span class=c1>// fmt.Println((*p).GetName())
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>p</span><span class=p>.</span><span class=nf>PsetName</span><span class=p>(</span><span class=s>&#34;QQ&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>p</span><span class=p>.</span><span class=nf>GetName</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>p</span><span class=p>.</span><span class=nf>No</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Counter</span> <span class=p>=</span> <span class=kt>int</span> <span class=c1>// åˆ«åä¸èƒ½å®šä¹‰æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// é‡å®šä¹‰å¯ä»¥å®šä¹‰æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Counter</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>Counter</span><span class=p>)</span> <span class=nf>Incr</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=o>*</span><span class=nx>c</span><span class=p>)</span><span class=o>++</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å¯è§æ€§-1>å¯è§æ€§</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ä¸å±æ€§ç›¸åŒ
</span></span></span><span class=line><span class=cl><span class=c1>// é¦–å­—æ¯å¤§å†™ =&gt; åŒ…å¤–å¯è§
</span></span></span><span class=line><span class=cl><span class=c1>// é¦–å­—æ¯å°å†™ =&gt; åŒ…å†…å¯è§
</span></span></span></code></pre></td></tr></table></div></div><h4 id=æ–¹æ³•è¡¨è¾¾å¼>æ–¹æ³•è¡¨è¾¾å¼</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>u</span> <span class=nx>User</span><span class=p>)</span> <span class=nf>GetName</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>u</span><span class=p>.</span><span class=nx>Name</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>u</span> <span class=nx>User</span><span class=p>)</span> <span class=nf>SetName</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span><span class=p>.</span><span class=nx>Name</span> <span class=p>=</span> <span class=nx>name</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>u</span> <span class=o>*</span><span class=nx>User</span><span class=p>)</span> <span class=nf>PsetName</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span><span class=p>.</span><span class=nx>Name</span> <span class=p>=</span> <span class=nx>name</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å®šä¹‰ =&gt; Tç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// è°ƒç”¨ =&gt; T(å€¼/æŒ‡é’ˆ)å˜é‡/å¯¹è±¡/å®ä¾‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// è®¿é—®æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// T.æ–¹æ³•å
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=c1>// å®šä¹‰å¯¹è±¡ å¯¹è±¡.æ–¹æ³•å
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=c1>// æ–¹æ³•è¡¨è¾¾å¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å€¼æ¥æ”¶è€…ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>f</span> <span class=o>:=</span> <span class=nx>User</span><span class=p>.</span><span class=nx>GetName</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T\n&#34;</span><span class=p>,</span> <span class=nx>f</span><span class=p>)</span> <span class=c1>// func(main.User) string æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ å¯ä»¥ç›´æ¥è°ƒç”¨ å‚æ•°ä¸ºè‡ªå®šä¹‰Userç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>f</span><span class=p>(</span><span class=nx>User</span><span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;minho&#34;</span><span class=p>}))</span> <span class=c1>// minho
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmr</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>User</span><span class=p>.</span><span class=nf>GetName</span><span class=p>(</span><span class=nx>User</span><span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;XXXX&#34;</span><span class=p>}))</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>f2</span> <span class=o>:=</span> <span class=nx>User</span><span class=p>.</span><span class=nx>SetName</span> <span class=c1>// å¤šä¸ªå‚æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmr</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T\n&#34;</span><span class=p>,</span> <span class=nx>f2</span><span class=p>)</span> <span class=c1>// func(main.User, string)
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=c1>// æŒ‡é’ˆç±»å‹æ¥æ”¶è€…
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>f3</span> <span class=o>:=</span> <span class=p>(</span><span class=o>*</span><span class=nx>User</span><span class=p>).</span><span class=nx>PsetName</span> <span class=c1>// æ–¹æ³•ä¸ºæŒ‡é’ˆæ¥æ”¶è€… è°ƒç”¨è€…å¿…é¡»ä¸ºå¯¹åº”ç±»å‹çš„æŒ‡é’ˆç±»å‹ User.PsetNameæŠ¥é”™
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T\n&#34;</span><span class=p>,</span> <span class=nx>f3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>f4</span> <span class=o>:=</span> <span class=p>(</span><span class=o>*</span><span class=nx>User</span><span class=p>).</span><span class=nx>GetName</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T\n&#34;</span><span class=p>,</span> <span class=nx>f4</span><span class=p>)</span> <span class=c1>// func(*main.User) string
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¦‚æœå®šä¹‰äº†å€¼æ¥æ”¶è€…æ–¹æ³• Goä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•
</span></span></span></code></pre></td></tr></table></div></div><h4 id=æ–¹æ³•å€¼>æ–¹æ³•å€¼</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ä»£ç æ¥ä¸Š
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>u</span> <span class=p>=</span> <span class=nx>User</span><span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;Minho&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>m1</span> <span class=p>=</span> <span class=nx>u</span><span class=p>.</span><span class=nx>GetName</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T\n&#34;</span><span class=p>,</span> <span class=nx>m1</span><span class=p>)</span> <span class=c1>// func() strirng
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>m1</span><span class=p>())</span> <span class=c1>// åŠ æ‹¬å·æ‰§è¡Œ Minho
</span></span></span></code></pre></td></tr></table></div></div><h2 id=æ–‡ä»¶æ“ä½œ>æ–‡ä»¶æ“ä½œ</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ç›¸å…³åŒ…(å¸¸ç”¨)
</span></span></span><span class=line><span class=cl><span class=c1>// osï¼šæ–‡ä»¶æ“ä½œ
</span></span></span><span class=line><span class=cl><span class=c1>// filepathï¼šæ–‡ä»¶è·¯å¾„
</span></span></span><span class=line><span class=cl><span class=c1>// bufioï¼šå¸¦ç¼“å†²åŒºIO
</span></span></span><span class=line><span class=cl><span class=c1>// fs: æŠ½è±¡åŒ… 1.15æä¾›çš„
</span></span></span><span class=line><span class=cl><span class=c1>// ioutil: æä¾›å·¥å…·å‡½æ•°
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æ–‡ä»¶è·¯å¾„>æ–‡ä»¶è·¯å¾„</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ç›¸å¯¹è·¯å¾„
</span></span></span><span class=line><span class=cl><span class=c1>// ç»å¯¹è·¯å¾„
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æ“ä½œ>æ“ä½œ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// æ–‡ä»¶å†…å®¹ï¼š010101 []byte &lt;=ç¼–ç /è§£ç =&gt; string(utf8)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=err>è¯»æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>  <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>()</span> <span class=c1>// æ–‡ä»¶å¿…é¡»å­˜åœ¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=err>å‚æ•°ï¼šè·¯å¾„</span>
</span></span><span class=line><span class=cl>    <span class=err>è¿”å›å€¼ï¼š</span><span class=o>*</span><span class=nx>File</span><span class=p>,</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl>  <span class=err>è¯»æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>    <span class=nf>Read</span><span class=p>([]</span><span class=kt>byte</span><span class=p>)</span> <span class=nx>n</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=nf>ReadAt</span><span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=kt>int64</span><span class=p>)</span> <span class=nx>n</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>  <span class=err>å…³é—­æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>    <span class=nf>Close</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;io&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span> <span class=o>:=</span> <span class=s>&#34;readfile.txt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=nx>path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;error:&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>defer</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;success&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è¯»æ–‡ä»¶
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>data</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>n</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Read</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// å‡ºé”™
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=nx>io</span><span class=p>.</span><span class=nx>EOF</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>data</span><span class=p>[:</span><span class=nx>n</span><span class=p>],</span> <span class=nb>string</span><span class=p>(</span><span class=nx>data</span><span class=p>[:</span><span class=nx>n</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è¯»å–æ–‡ä»¶å†…å®¹åˆ°å­—èŠ‚åˆ‡ç‰‡dataä¸­
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// n:è¯»å–å­—èŠ‚çš„æ•°é‡ error: EOF ç»“æŸç¬¦
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// n, err := file.Read(data)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=c1>// fmt.Println(data, n, err)
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// fmt.Println(data[:n])
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// fmt.Printf(&#34;%q, %q&#34;, string(data), string(data[:n]))
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=c1>// file.Close()
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>å†™æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>  <span class=nx>os</span><span class=p>.</span><span class=nf>Crete</span><span class=p>()</span> <span class=c1>// åˆ›å»ºæ–‡ä»¶ go doc os.Create 
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// æ–‡ä»¶ä¸å­˜åœ¨ åˆ›å»º; æ–‡ä»¶å­˜åœ¨ï¼šæ¸…ç©º
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=err>å†™ï¼š</span>
</span></span><span class=line><span class=cl>    <span class=nx>Write</span>
</span></span><span class=line><span class=cl>    <span class=nx>WriteString</span>
</span></span><span class=line><span class=cl>    <span class=nx>WriteAt</span>
</span></span><span class=line><span class=cl>  <span class=err>å…³é—­æ–‡ä»¶ï¼š</span>
</span></span><span class=line><span class=cl>    <span class=nx>Close</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// copyFile
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;io&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// copyfile src dst
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Args</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>3</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=s>&#34;usage: copyfile srcfile dstfile&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>srcFile</span><span class=p>,</span> <span class=nx>dstFile</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nx>Args</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=nx>os</span><span class=p>.</span><span class=nx>Args</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è¯»å–srcFile
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>src</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=nx>srcFile</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>src</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å†™dstFile
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>dst</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Create</span><span class=p>(</span><span class=nx>dstFile</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>dst</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>bufferSize</span> <span class=o>:=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=nx>data</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=nx>bufferSize</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>n</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>src</span><span class=p>.</span><span class=nf>Read</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=nx>io</span><span class=p>.</span><span class=nx>EOF</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>n</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>dst</span><span class=p>.</span><span class=nf>Write</span><span class=p>(</span><span class=nx>data</span><span class=p>[:</span><span class=nx>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>è¿½åŠ æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>  <span class=nx>OpenFile</span>
</span></span><span class=line><span class=cl>  <span class=nx>os</span><span class=p>.</span><span class=nf>OpenFile</span><span class=p>(</span><span class=nx>path</span><span class=p>,</span> <span class=nx>os</span><span class=p>.</span><span class=nx>O_CREATE</span><span class=p>|</span><span class=nx>os</span><span class=p>.</span><span class=nx>OWRONLY</span><span class=p>|</span><span class=nx>os</span><span class=p>.</span><span class=nx>O_APPEND</span><span class=p>,</span> <span class=nx>os</span><span class=p>.</span><span class=nx>ModePerm</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>æ–‡ä»¶æŒ‡é’ˆ</span>
</span></span><span class=line><span class=cl>  <span class=nf>Seek</span><span class=p>(</span><span class=nx>offset</span><span class=p>,</span> <span class=nx>whence</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>whence</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=err>æ–‡ä»¶å¼€å§‹ä½ç½®</span> 
</span></span><span class=line><span class=cl>    <span class=mi>1</span> <span class=err>å½“å‰æŒ‡é’ˆä½ç½®</span> 
</span></span><span class=line><span class=cl>    <span class=mi>2</span> <span class=err>æ–‡ä»¶æœ«å°¾</span>
</span></span><span class=line><span class=cl>  <span class=nx>offset</span> <span class=err>åç§»</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=err>è·å–ä½ç½®</span><span class=nf>Seek</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å°†æ—¥å¿—å’Œæ–‡ä»¶ç»“åˆèµ·æ¥
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>OpenFile</span><span class=p>(</span><span class=s>&#34;web.log&#34;</span><span class=p>,</span> <span class=nx>os</span><span class=p>.</span><span class=nx>O_CREATE</span><span class=p>|</span><span class=nx>os</span><span class=p>.</span><span class=nx>O_WRONLY</span><span class=p>|</span><span class=nx>OS</span><span class=p>.</span><span class=nx>O_APPEND</span><span class=p>,</span> <span class=nx>os</span><span class=p>.</span><span class=nx>ModePerm</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>SetOutput</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=s>&#34;ç¬¬ä¸€æ¡æ—¥å¿—&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span>
</span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nx>Print</span><span class=o>/</span><span class=nx>Println</span><span class=o>/</span><span class=nx>Printf</span>    <span class=c1>// è¾“å‡ºå†…å®¹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Sprint</span><span class=o>/</span><span class=nx>Sprintln</span><span class=o>/</span><span class=nx>Sprintf</span> <span class=c1>// å°†å­—ç¬¦ä¸²ä½œä¸ºå€¼è¿”å›
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Fprint</span><span class=o>/</span><span class=nx>Fprintln</span><span class=o>/</span><span class=nf>Fprintf</span><span class=p>(</span><span class=nx>io</span><span class=p>.</span><span class=nx>Writer</span><span class=p>,</span> <span class=err>å˜é‡</span><span class=o>/</span><span class=err>æ¨¡æ¿</span><span class=p>,</span> <span class=err>å˜é‡</span><span class=p>)</span> <span class=c1>// å°†å†…å®¹å†™å…¥æ–‡ä»¶
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Create</span><span class=p>(</span><span class=s>&#34;file&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprint</span><span class=p>(</span><span class=nx>file</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>  <span class=c1>// å°†1 2 3å†™å…¥æ–‡ä»¶
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprintln</span><span class=p>(</span><span class=nx>file</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprintf</span><span class=p>(</span><span class=nx>file</span><span class=p>,</span> <span class=s>&#34;My name is %s\n&#34;</span><span class=p>,</span> <span class=s>&#34;Minho&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span>
</span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nx>Scan</span>  <span class=c1>// ä»æ§åˆ¶å°æ‰«æ(è¯»å–)å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Fscan</span> <span class=c1>// ä»æ–‡ä»¶æ‰«æ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Sscan</span> <span class=c1>// ä»å­—ç¬¦ä¸²æ‰«æ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=o>--</span>
</span></span><span class=line><span class=cl><span class=c1>// è¯»å–ç›®å½•ä¸‹çš„å­æ–‡ä»¶(æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªæ–‡ä»¶ æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªç›®å½•)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>file</span><span class=p>.</span><span class=nf>Readdir</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>file</span><span class=p>.</span><span class=nf>Readdirnames</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>file</span><span class=p>.</span><span class=nf>Readdirnames</span><span class=p>(</span><span class=mi>10</span><span class=p>))</span> <span class=c1>// 10 è¯»å–10ä¸ªæ–‡ä»¶æˆ–ç›®å½•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>file</span><span class=p>.</span><span class=nf>Readdirnames</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>))</span> <span class=c1>// -1 è¯»å–æ‰€æœ‰æ–‡ä»¶æˆ–ç›®å½•
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>os</span><span class=p>.</span><span class=nf>IsNotExist</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;æ–‡ä»¶ä¸å­˜åœ¨&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>files</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Readdir</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>f</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>files</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// æ–‡ä»¶ä¿¡æ¯
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>f</span><span class=p>.</span><span class=nf>IsDir</span><span class=p>(),</span> <span class=nx>f</span><span class=p>.</span><span class=nf>Name</span><span class=p>(),</span> <span class=nx>f</span><span class=p>.</span><span class=nf>Size</span><span class=p>(),</span> <span class=nx>f</span><span class=p>.</span><span class=nf>ModTime</span><span class=p>(),</span> <span class=nx>f</span><span class=p>.</span><span class=nf>Mode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span>
</span></span><span class=line><span class=cl><span class=nx>file</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Stat</span><span class=p>(</span><span class=nx>file</span><span class=o>/</span><span class=nx>dir</span><span class=p>)</span> <span class=c1>// reutrn FileInfo
</span></span></span><span class=line><span class=cl><span class=c1>// åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨
</span></span></span><span class=line><span class=cl><span class=c1>// os.Lstat =&gt; é“¾æ¥æ–‡ä»¶çš„ä¿¡æ¯ os.Stat =&gt; æºæ–‡ä»¶çš„ä¿¡æ¯
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>os</span><span class=p>.</span><span class=nf>IsExist</span><span class=p>(</span><span class=kt>error</span><span class=p>)</span>  <span class=c1>// å‚æ•°ä¸ºï¼šerrorç±»å‹ è¿”å› bool
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>os</span><span class=p>.</span><span class=nf>IsNotExist</span><span class=p>(</span><span class=kt>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>os</span><span class=p>.</span><span class=nf>Remove</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span>                   <span class=c1>// åˆ é™¤æ–‡ä»¶
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>os</span><span class=p>.</span><span class=nf>Remove</span><span class=p>(</span><span class=nx>dir</span><span class=p>)</span>                    <span class=c1>// åˆ é™¤ç›®å½•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>os</span><span class=p>.</span><span class=nf>Removeall</span><span class=p>(</span><span class=nx>dir</span><span class=p>)</span>                 <span class=c1>// rm -rf ç›®å½•ä¸ä¸ºç©ºä¹Ÿå¯ä»¥åˆ é™¤
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>os</span><span class=p>.</span><span class=nf>Rename</span><span class=p>(</span><span class=s>&#34;aa&#34;</span><span class=p>,</span> <span class=s>&#34;bb&#34;</span><span class=p>)</span>             <span class=c1>// æ–‡ä»¶é‡å‘½å
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>os</span><span class=p>.</span><span class=nf>Chmod</span><span class=p>(</span><span class=s>&#34;aa&#34;</span><span class=p>,</span> <span class=mo>0600</span><span class=p>)</span>              <span class=c1>// è®¾ç½®æƒé™
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>os</span><span class=p>.</span><span class=nf>Mkdir</span><span class=p>(</span><span class=s>&#34;xxx&#34;</span><span class=p>,</span> <span class=nx>os</span><span class=p>.</span><span class=nx>ModePerm</span><span class=p>)</span>      <span class=c1>// åˆ›å»ºç›®å½•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>os</span><span class=p>.</span><span class=nf>MkdirAll</span><span class=p>(</span><span class=s>&#34;x/y/z&#34;</span><span class=p>,</span> <span class=nx>os</span><span class=p>.</span><span class=nx>ModePerm</span><span class=p>)</span> <span class=c1>// mkdir -p
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=o>--</span>
</span></span><span class=line><span class=cl><span class=nx>io</span><span class=p>.</span><span class=nx>Copy</span>  <span class=c1>// å¤åˆ¶æ–‡ä»¶
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>io</span><span class=p>.</span><span class=nf>MultiWriter</span><span class=p>()</span>  <span class=c1>// è¾“å‡ºæµ(å¯ä»¥å†™æ•°æ®çš„)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>io</span><span class=p>.</span><span class=nf>MultiReader</span><span class=p>()</span>  <span class=c1>// è¾“å…¥æµ(å¯ä»¥è¯»å–æ•°æ®çš„) æŒ‰ç…§é¡ºåºè¯»å–æ‰€æœ‰æ–‡ä»¶ä¸­çš„å†…å®¹
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>f1</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Create</span><span class=p>(</span><span class=s>&#34;f1.txt&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>f2</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Create</span><span class=p>(</span><span class=s>&#34;f2.txt&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>m</span> <span class=o>:=</span> <span class=nx>io</span><span class=p>.</span><span class=nf>MultiWriter</span><span class=p>(</span><span class=nx>f1</span><span class=p>,</span> <span class=nx>f2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>m</span><span class=p>.</span><span class=nf>Write</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=s>&#34;abc&#34;</span><span class=p>))</span> <span class=c1>// å†™åˆ°å¤šä¸ªæµ
</span></span></span></code></pre></td></tr></table></div></div><h3 id=ç›®å½•æ“ä½œ>ç›®å½•æ“ä½œ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// filepath
</span></span></span><span class=line><span class=cl><span class=c1>// go doc filepath
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>filepath</span><span class=p>.</span><span class=nf>Abs</span><span class=p>(</span><span class=s>&#34;.&#34;</span><span class=p>)</span>              <span class=c1>// è·å–ç»å¯¹è·¯å¾„
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>filepath</span><span class=p>.</span><span class=nf>Dir</span><span class=p>(</span><span class=s>&#34;/root/cfg.ini&#34;</span><span class=p>)</span>  <span class=c1>// è·å–æ–‡ä»¶ç›®å½• /root
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>filepath</span><span class=p>.</span><span class=nf>Base</span><span class=p>(</span><span class=s>&#34;/root/cfg.ini&#34;</span><span class=p>)</span> <span class=c1>// è·å–æ–‡ä»¶å cfg.ini
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>filepath</span><span class=p>.</span><span class=nf>Ext</span><span class=p>(</span><span class=s>&#34;/root/cfg.ini&#34;</span><span class=p>)</span>  <span class=c1>// è·å–æ–‡ä»¶åç¼€ .ini
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>filepath</span><span class=p>.</span><span class=nf>Join</span><span class=p>(</span><span class=s>&#34;/root/mm&#34;</span><span class=p>,</span> <span class=s>&#34;xx&#34;</span><span class=p>,</span> <span class=s>&#34;ll.ini&#34;</span><span class=p>)</span> <span class=c1>// æ‹¼æ¥è·¯å¾„
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>filepath</span><span class=p>.</span><span class=nf>Split</span><span class=p>(</span><span class=s>&#34;/root/cfg.ini&#34;</span><span class=p>)</span> <span class=c1>// åˆ†éš”path /root/ cfg.ini
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>filepath</span><span class=p>.</span><span class=nf>Glob</span><span class=p>(</span><span class=s>&#34;./*.go&#34;</span><span class=p>)</span> <span class=c1>// åŒ¹é…æ–‡ä»¶ ç±»ä¼¼Unixé€šé…ç¬¦
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>filepath</span><span class=p>.</span><span class=nf>Glob</span><span class=p>(</span><span class=s>&#34;./*/*.txt&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// filepath.Walk éå†ç›®å½•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>filepath</span><span class=p>.</span><span class=nf>Walk</span><span class=p>(</span><span class=s>&#34;.&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>fileInfo</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>FileInfo</span><span class=p>,</span> <span class=nx>err</span> <span class=kt>error</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span><span class=k>return</span> <span class=kc>nil</span><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ–‡ä»¶æ“ä½œæœ‰å…³å·¥å…·ç±»>æ–‡ä»¶æ“ä½œæœ‰å…³å·¥å…·ç±»</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// go doc ioutil
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;io/ioutil&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// data, _ := ioutil.ReadFile(&#34;alias.go&#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Println(string(data))
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>files</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>ioutil</span><span class=p>.</span><span class=nf>ReadDir</span><span class=p>(</span><span class=s>&#34;.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>info</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>files</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>info</span><span class=p>.</span><span class=nf>Name</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>ioutil</span><span class=p>.</span><span class=nf>WriteFile</span><span class=p>(</span><span class=s>&#34;ioutil.txt&#34;</span><span class=p>,</span> <span class=p>[]</span><span class=nb>byte</span><span class=p>(</span><span class=s>&#34;xxxx&#34;</span><span class=p>),</span> <span class=nx>os</span><span class=p>.</span><span class=nx>ModePerm</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>ioutil</span><span class=p>.</span><span class=nf>WriteFile</span><span class=p>(</span><span class=s>&#34;ioutil.txt&#34;</span><span class=p>,</span> <span class=p>[]</span><span class=kt>byte</span><span class=p>{</span><span class=mi>57</span><span class=p>,</span> <span class=mi>58</span><span class=p>,</span> <span class=mi>59</span><span class=p>},</span> <span class=nx>os</span><span class=p>.</span><span class=nx>ModePerm</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>dir</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>ioutil</span><span class=p>.</span><span class=nf>TempDir</span><span class=p>(</span><span class=s>&#34;.&#34;</span><span class=p>,</span> <span class=s>&#34;temp_&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>dir</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>ioutil</span><span class=p>.</span><span class=nf>TempFile</span><span class=p>(</span><span class=s>&#34;.&#34;</span><span class=p>,</span> <span class=s>&#34;tempfile_&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=s>&#34;xxx&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å¸¦ç¼“å†²åŒºio>å¸¦ç¼“å†²åŒºIO</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ä¸ºæé«˜æ€§èƒ½
</span></span></span><span class=line><span class=cl><span class=c1>// ç¨‹åºä¸­å®šä¹‰(ç±»ä¼¼)åˆ‡ç‰‡ å†…éƒ¨å®šä¹‰åˆ‡ç‰‡(æŒ‡å®šåˆ‡ç‰‡çš„é•¿åº¦) è¯»å–å†…å®¹åˆ°åˆ‡ç‰‡ å‡½æ•°ç›´æ¥ä»åˆ‡ç‰‡ä¸­è¯»å–æ•°æ® å½“åˆ‡ç‰‡ä¸­æ•°æ®è¯»å–å®Œæˆå å†ä»ç¡¬ç›˜è¯»å–
</span></span></span><span class=line><span class=cl><span class=c1>// å†™æ•°æ®ç±»ä¼¼ å…ˆå†™åˆ°åˆ‡ç‰‡ å†™æ»¡åˆ·æ–°åˆ°ç£ç›˜ å¯ä»¥ä¸»åŠ¨åˆ·æ–°
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>bufio</span> <span class=c1>// go doc bufio
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>Scanner</span>
</span></span><span class=line><span class=cl>  <span class=nx>Reader</span>
</span></span><span class=line><span class=cl>  <span class=nx>Writer</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Scanner
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;bufio&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// var txt string
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Scan(&amp;txt) // fmt.Scan ä¸å¸¦ç¼“å†²åŒºIO ä¸æ¥æ”¶ç©ºç™½å’Œç©ºæ ¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Println(&#34;scan:&#34;, txt)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¸¦ç¼“å†²åŒºIO
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// è¯»å–å­—ç¬¦ä¸²æ•°æ® strconv
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>scanner</span> <span class=o>:=</span> <span class=nx>bufio</span><span class=p>.</span><span class=nf>NewScanner</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Stdin</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>scanner</span><span class=p>.</span><span class=nf>Scan</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;è¾“å…¥å†…å®¹ï¼š&#34;</span><span class=p>,</span> <span class=nx>scanner</span><span class=p>.</span><span class=nf>Text</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;è¾“å…¥å†…å®¹ï¼š&#34;</span><span class=p>,</span> <span class=nx>scanner</span><span class=p>.</span><span class=nf>Bytes</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>scanner</span><span class=p>.</span><span class=nf>Err</span><span class=p>())</span> <span class=c1>// æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Reader
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;bufio&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;bufio.txt&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>reader</span> <span class=o>:=</span> <span class=nx>bufio</span><span class=p>.</span><span class=nf>NewReader</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span> <span class=c1>// defaultBufSize = 4096 4kb
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// bufio.NewReaderSize()
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>data</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>n</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>reader</span><span class=p>.</span><span class=nf>Read</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>data</span><span class=p>[:</span><span class=nx>n</span><span class=p>])</span> <span class=c1>// linux strace æŸ¥çœ‹ç³»ç»Ÿè°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>n</span><span class=p>,</span> <span class=nx>_</span> <span class=p>=</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Read</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>data</span><span class=p>[:</span><span class=nx>n</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// isPrefixæ˜¯Trueçš„è¯ è¿˜éœ€è¦ç»§ç»­è¯»å– è¡¨ç¤ºä¸€è¡Œè¿˜æ²¡æœ‰è¯»å–å®Œæ•´
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// åœ¨ç¼“å†²åŒºä¸­æ•°æ®å¤„ç†å®Œæˆåè‹¥æ— æ¢è¡Œå°±ä¼šè¿”å›isPrefixä¸ºTrueéœ€è¦ç»§ç»­è¯»å–
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>ctx</span><span class=p>,</span> <span class=nx>isPrefix</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>reader</span><span class=p>.</span><span class=nf>ReadLine</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>ctx</span><span class=p>),</span> <span class=nx>isPrefix</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Writer
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;bufio&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Create</span><span class=p>(</span><span class=s>&#34;bufio.txt&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>writer</span> <span class=o>:=</span> <span class=nx>bufio</span><span class=p>.</span><span class=nf>NewWriter</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>writer</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=s>&#34;abcxyz&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>writer</span><span class=p>.</span><span class=nf>Flush</span><span class=p>()</span> <span class=c1>// å°†ç¼“å†²åŒºæ•°æ®åˆ·æ–°åˆ°ç£ç›˜ å¦åˆ™æ–‡ä»¶æ²¡ç”¨å†…å®¹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>--</span>
</span></span><span class=line><span class=cl><span class=c1>// goå®ç°tailfå‘½ä»¤
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;bufio&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;io&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Args</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=s>&#34;usage: tailf xxx.log&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=nx>os</span><span class=p>.</span><span class=nx>Args</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>reader</span> <span class=o>:=</span> <span class=nx>bufio</span><span class=p>.</span><span class=nf>NewReaderSize</span><span class=p>(</span><span class=nx>file</span><span class=p>,</span> <span class=mi>16</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>line</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>4096</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>data</span><span class=p>,</span> <span class=nx>isPrefix</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>reader</span><span class=p>.</span><span class=nf>ReadLine</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=nx>io</span><span class=p>.</span><span class=nx>EOF</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>log</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1>// break
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>isPrefix</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>line</span> <span class=p>=</span> <span class=nb>append</span><span class=p>(</span><span class=nx>line</span><span class=p>,</span> <span class=nx>data</span><span class=o>...</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>line</span><span class=p>)</span> <span class=p>&gt;</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nb>append</span><span class=p>(</span><span class=nx>line</span><span class=p>,</span> <span class=nx>data</span><span class=o>...</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>                <span class=nx>line</span> <span class=p>=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>4096</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>data</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç¼“å­˜ç®—æ³•ï¼šæ·˜æ±°æ—¶é—´æœ€æ—©çš„ LRUç¼“å­˜
</span></span></span></code></pre></td></tr></table></div></div><h3 id=å‡ ä¸ªç»“æ„ä½“>å‡ ä¸ªç»“æ„ä½“</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// go doc strings
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Builder</span> <span class=kd>struct</span><span class=p>{</span> <span class=o>...</span> <span class=p>}</span> <span class=c1>// å­—ç¬¦ä¸²å˜æˆæµå¯¹è±¡æ“ä½œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Reader</span> <span class=kd>struct</span><span class=p>{</span> <span class=o>...</span> <span class=p>}</span>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>func</span> <span class=nf>NewReader</span><span class=p>(</span><span class=nx>s</span> <span class=kt>string</span><span class=p>)</span> <span class=o>*</span><span class=nx>Reader</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// go doc bytes.Reader
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// åœ¨å†…å­˜ä¸­å¯¹å­—èŠ‚åˆ‡ç‰‡å’Œå­—ç¬¦ä¸²å¤„ç†
</span></span></span><span class=line><span class=cl><span class=c1>// æ‹¼æ¥å­—ç¬¦ä¸²ï¼šstring.Builder byte.Buffer
</span></span></span><span class=line><span class=cl><span class=c1>// ä¸‹è½½æ–‡ä»¶åœ¨å†…å­˜ä¸­å¤„ç†ï¼šbytes.Buffer  // ä¸è½ç›˜
</span></span></span></code></pre></td></tr></table></div></div><h3 id=æ–‡ä»¶æ ¼å¼>æ–‡ä»¶æ ¼å¼</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// éœ€è¦å°†æ•°æ®è½ç›˜(ç£ç›˜å­˜å‚¨) ç½‘ç»œä¼ è¾“
</span></span></span><span class=line><span class=cl><span class=c1>// å†…å­˜ =åºåˆ—åŒ–=&gt; []byte(string) =&gt; ååºåˆ—åŒ–=&gt; å†…å­˜
</span></span></span><span class=line><span class=cl><span class=c1>// ç¼–ç æ–¹å¼ï¼šgob csv json protocolbuffer åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹æ¡ˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// åºåˆ—åŒ–(ç¼–ç )
</span></span></span><span class=line><span class=cl><span class=c1>// ååºåˆ—åŒ–(è§£ç )
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=err>åº“ï¼š</span>
</span></span><span class=line><span class=cl>  <span class=err>ç¼–ç ï¼š</span><span class=nx>Marshal</span>
</span></span><span class=line><span class=cl>       <span class=nx>Encoder</span>
</span></span><span class=line><span class=cl>  <span class=err>è§£ç ï¼š</span><span class=nx>Unmarshal</span>
</span></span><span class=line><span class=cl>       <span class=nx>Decoder</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç”¨å“ªç§ç±»å‹çš„æ•°æ®ç¼–ç  å°±è§£ç ä¸ºå¯¹åº”çš„æ•°æ®ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>gob</span> <span class=p>=&gt;</span> <span class=nx>Go</span><span class=err>è¯­è¨€æä¾›çš„ç¼–ç </span> <span class=err>äºŒè¿›åˆ¶ç¼–ç æ–¹å¼</span>
</span></span><span class=line><span class=cl><span class=nx>encoding</span><span class=o>/</span><span class=nx>gob</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=gob>gob</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;encoding/gob&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å±æ€§åç§°éƒ½å¤§å†™
</span></span></span><span class=line><span class=cl><span class=c1>// åºåˆ—åŒ–å’Œååºåˆ—åŒ–éœ€è¦è®¿é—®å±æ€§
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>   <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Addr</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// égoå†…ç½®çš„åŸºæœ¬ç±»å‹å’Œå¤åˆæ•°æ®ç±»å‹ éœ€è¦æ³¨å†Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>gob</span><span class=p>.</span><span class=nf>Register</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>User</span><span class=p>{})</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>users</span> <span class=o>:=</span> <span class=p>[]</span><span class=o>*</span><span class=nx>User</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=s>&#34;Minho&#34;</span><span class=p>,</span> <span class=s>&#34;SC&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=mi>2</span><span class=p>,</span> <span class=s>&#34;lemon&#34;</span><span class=p>,</span> <span class=s>&#34;SH&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=mi>3</span><span class=p>,</span> <span class=s>&#34;karubin&#34;</span><span class=p>,</span> <span class=s>&#34;GD&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Create</span><span class=p>(</span><span class=s>&#34;data.gob&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ç¼–ç 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>encoder</span> <span class=o>:=</span> <span class=nx>gob</span><span class=p>.</span><span class=nf>NewEncoder</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=o>:=</span> <span class=nx>encoder</span><span class=p>.</span><span class=nf>Encode</span><span class=p>(</span><span class=nx>users</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// è§£ç 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>file</span><span class=p>,</span> <span class=nx>_</span> <span class=p>=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;data.gob&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>decoder</span> <span class=o>:=</span> <span class=nx>gob</span><span class=p>.</span><span class=nf>NewDecoder</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>user2</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=o>*</span><span class=nx>User</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=p>=</span> <span class=nx>decoder</span><span class=p>.</span><span class=nf>Decode</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>user2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>user2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>u</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>user2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=csv>csv</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;encoding/csv&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;table.csv&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>reader</span> <span class=o>:=</span> <span class=nx>csv</span><span class=p>.</span><span class=nf>NewReader</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>line</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>reader</span><span class=p>.</span><span class=nf>Read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>line</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>reader</span><span class=p>.</span><span class=nf>Read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>line</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>reader</span><span class=p>.</span><span class=nf>Read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>line</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>reader</span><span class=p>.</span><span class=nf>Read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>_</span> <span class=p>=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Create</span><span class=p>(</span><span class=s>&#34;table.csv&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>writer</span> <span class=o>:=</span> <span class=nx>csv</span><span class=p>.</span><span class=nf>NewWriter</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>writer</span><span class=p>.</span><span class=nf>Write</span><span class=p>([]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;A1&#34;</span><span class=p>,</span> <span class=s>&#34;B1&#34;</span><span class=p>,</span> <span class=s>&#34;C1&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>writer</span><span class=p>.</span><span class=nf>Write</span><span class=p>([]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;A2&#34;</span><span class=p>,</span> <span class=s>&#34;B2&#34;</span><span class=p>,</span> <span class=s>&#34;C2&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>writer</span><span class=p>.</span><span class=nf>Write</span><span class=p>([]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;A3&#34;</span><span class=p>,</span> <span class=s>&#34;B3&#34;</span><span class=p>,</span> <span class=s>&#34;C3&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>writer</span><span class=p>.</span><span class=nf>Write</span><span class=p>([]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;A4&#34;</span><span class=p>,</span> <span class=s>&#34;B4&#34;</span><span class=p>,</span> <span class=s>&#34;C4&#34;</span><span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=nx>writer</span><span class=p>.</span><span class=nf>Flush</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=æ¥å£>æ¥å£</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>æ•°æ®</span> <span class=o>+</span> <span class=err>è¡Œä¸º</span> <span class=p>=&gt;</span> <span class=err>ç»“æ„ä½“å±æ€§</span> <span class=err>æ–¹æ³•</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// éƒ½æœ‰ç±»ä¼¼çš„æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>os</span><span class=p>.</span><span class=nx>File</span><span class=p>:</span> <span class=nx>read</span>    <span class=nx>write</span>
</span></span><span class=line><span class=cl><span class=nx>strings</span><span class=p>.</span><span class=nx>Builder</span><span class=p>:</span> <span class=nx>write</span>
</span></span><span class=line><span class=cl><span class=nx>strings</span><span class=p>.</span><span class=nx>Reader</span><span class=p>:</span>  <span class=nx>read</span>
</span></span><span class=line><span class=cl><span class=nx>bytes</span><span class=p>.</span><span class=nx>Buffer</span><span class=p>:</span>    <span class=nx>write</span> <span class=nx>read</span>
</span></span><span class=line><span class=cl><span class=nx>bytes</span><span class=p>.</span><span class=nx>Reader</span><span class=p>:</span>    <span class=nx>read</span>
</span></span><span class=line><span class=cl><span class=nx>bufio</span><span class=p>.</span><span class=nx>Writer</span><span class=p>:</span>    <span class=nx>write</span>
</span></span><span class=line><span class=cl><span class=nx>bufio</span><span class=p>.</span><span class=nx>Reader</span><span class=p>:</span>    <span class=nx>read</span>
</span></span><span class=line><span class=cl><span class=nx>bufio</span><span class=p>.</span><span class=nx>Scanner</span><span class=p>:</span>   <span class=nx>read</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>æ¥å£ï¼šå¯¹è¡Œä¸ºçš„æŠ½è±¡</span>
</span></span><span class=line><span class=cl><span class=err>è¡Œä¸ºæŠ½è±¡çš„å¯¹è±¡</span> <span class=p>=&gt;</span> <span class=err>å®ç°è¡Œä¸ºçš„å¯¹è±¡</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=err>æ¥å£ï¼šå®šä¹‰çš„ä¸€äº›å‡½æ•°</span><span class=p>(</span><span class=mi>0</span> <span class=mi>1</span> <span class=nx>n</span><span class=err>ä¸ª</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=err>ç­¾åï¼šå‡½æ•°åç§°</span> <span class=err>å‚æ•°åˆ—è¡¨</span> <span class=err>è¿”å›å€¼åˆ—è¡¨</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…³é”®å­—ï¼šinterface
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>TypeName</span> <span class=nx>Formatter</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>InterfaceName</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=err>æ–¹æ³•ç­¾å</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æ–­è¨€ =&gt; æ¥å£
</span></span></span><span class=line><span class=cl><span class=c1>// å¯¹åº”ç±»å‹çš„å˜é‡, ok := æ¥å£ç±»å‹å˜é‡.(ç±»å‹)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// switch æ¥å£ç±»å‹å˜é‡.(type) { // switch p := æ¥å£ç±»å‹å˜é‡.(type)
</span></span></span><span class=line><span class=cl><span class=c1>// case GobPersistent:
</span></span></span><span class=line><span class=cl><span class=c1>// case CsvPersistent:
</span></span></span><span class=line><span class=cl><span class=c1>// case *JsonPersistent:
</span></span></span><span class=line><span class=cl><span class=c1>// case *ProtobufPersistent:
</span></span></span><span class=line><span class=cl><span class=c1>// default:
</span></span></span><span class=line><span class=cl><span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// å¦‚ä½•å®ç°ä¸€ä¸ªå¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹å˜é‡çš„å‡½æ•°
</span></span></span></code></pre></td></tr></table></div></div><h3 id=å®šä¹‰èµ‹å€¼>å®šä¹‰/èµ‹å€¼</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>   <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å®šä¹‰ä¸€ä¸ªæŒä¹…åŒ–æ•°æ®æ¥å£
</span></span></span><span class=line><span class=cl><span class=c1>// è¡Œä¸ºï¼šSaveä¿å­˜Useråˆ‡ç‰‡ Load: åŠ è½½Useråˆ‡ç‰‡
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Persistent</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Save</span><span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl>    <span class=nf>Load</span><span class=p>(</span><span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>GobPersistent</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å®šä¹‰äº†Persistentæ¥å£æ‰€æœ‰(ä¸€ä¸ªä¹Ÿä¸èƒ½å°‘ ä½†æ˜¯å¯ä»¥å¤š)çš„æ–¹æ³• å°±å«Gobpersistentå®ç°äº†Persistentæ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>users</span> <span class=p>[]</span><span class=nx>User</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;gob persistent Save&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Load</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;gob persistent Load&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>CsvPersistent</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=nx>CsvPersistent</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>users</span> <span class=p>[]</span><span class=nx>User</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;csv persistent Save&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=nx>CsvPersistent</span><span class=p>)</span> <span class=nf>Load</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;csv persistent Load&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>call</span><span class=p>(</span><span class=nx>persistent</span> <span class=nx>Persistent</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;call:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>JsonPersistent</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>j</span> <span class=o>*</span><span class=nx>JsonPersistent</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>users</span> <span class=p>[]</span><span class=nx>User</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;json persistent Save&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>j</span> <span class=o>*</span><span class=nx>JsonPersistent</span><span class=p>)</span> <span class=nf>Load</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;json persistent Load&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>ProtobufPersistent</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>p</span> <span class=o>*</span><span class=nx>ProtobufPersistent</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>users</span> <span class=p>[]</span><span class=nx>User</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;protobuf persistent Save&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>p</span> <span class=nx>ProtobufPersistent</span><span class=p>)</span> <span class=nf>Load</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;protobuf persistent Load&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>persistent</span> <span class=nx>Persistent</span>
</span></span><span class=line><span class=cl>    <span class=c1>// persistent := GobPersistent{}
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>persistent</span><span class=p>,</span> <span class=nx>persistent</span><span class=p>)</span> <span class=c1>// nil nil
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// èµ‹å€¼/åˆå§‹åŒ–
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// æ¥å£ ä¸èƒ½ç›´æ¥é€šè¿‡æ¥å£ç±»å‹åˆå§‹åŒ–å¯¹è±¡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// éœ€è¦ä½¿ç”¨å®ç°è¡Œä¸º(å®ç°æ¥å£çš„æ‰€æœ‰æ–¹æ³• æŸä¸ªå¯¹è±¡çš„ç±»å‹å®šä¹‰äº†æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•)çš„å¯¹è±¡
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span> <span class=p>=</span> <span class=nx>CsvPersistent</span><span class=p>{}</span> <span class=c1>// å¦‚æœæœ‰æ¥å£å åªéœ€è¦éœ€æ”¹å®ç°
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>persistent</span><span class=p>,</span> <span class=nx>persistent</span><span class=p>)</span> <span class=c1>// Gobpersistent, Gobpersistent{}
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span>                        <span class=c1>// =&gt; Gobpersistent-&gt;Save
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>                             <span class=c1>// Gobpersistent-&gt;Load
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nf>call</span><span class=p>(</span><span class=nx>persistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å¤šæ€ =&gt; æŸä¸ªå¯¹è±¡èµ‹å€¼ä¸ºä¸åŒå¯¹è±¡ ä½“ç°å‡ºä¸åŒçš„è¡Œä¸º
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;å¤šæ€&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nf>call</span><span class=p>(</span><span class=nx>GobPersistent</span><span class=p>{})</span>
</span></span><span class=line><span class=cl>    <span class=nf>call</span><span class=p>(</span><span class=nx>CsvPersistent</span><span class=p>{})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å®šä¹‰ç±»å‹ ä¸ æ¥å£ æ˜¯å¦å®ç° æ— è¯­æ³•ä¸Šç›´æ¥å…³è”
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// é¸­å­ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// persistentä¸ºä»€ä¹ˆä¸ç›´æ¥å®šä¹‰ä¸ºGobpersistentï¼Ÿ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// æ”¹åŠ¨ä»£ç éå¸¸éº»çƒ¦ ç‰¹åˆ«æ¶‰åŠåˆ°å„ç§Gobpersistentå‚æ•°ä¼ é€’çš„æ—¶å€™
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æŒ‡é’ˆå¯¹è±¡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>persistent</span> <span class=p>=</span> <span class=nb>new</span><span class=p>(</span><span class=nx>CsvPersistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>persistent</span><span class=p>,</span> <span class=nx>persistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>call</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>CsvPersistent</span><span class=p>{})</span>
</span></span><span class=line><span class=cl>    <span class=nf>call</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>GobPersistent</span><span class=p>{})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ç–‘é—®ï¼šä¸ºä»€ä¹ˆæŒ‡é’ˆå¯¹è±¡ä¹Ÿæœ‰Saveå’ŒLoadæ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// æ–¹æ³•æ˜¯å€¼æ¥æ”¶è€… è°ƒç”¨å¯¹è±¡æ˜¯ä¸€ä¸ªæŒ‡é’ˆ å¯ä»¥ç›´æ¥è°ƒç”¨å€¼æ¥æ”¶è€…æ–¹æ³• -&gt; è¯­æ³•ç³– æŒ‡é’ˆå¯¹è±¡ä¼šè‡ªåŠ¨è¿›è¡Œè§£å¼•ç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ä½†æ˜¯æ¥å£è¿™ä¸€å—å¹¶ä¸æ˜¯è¯­æ³•ç³–
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æŒ‡é’ˆç±»å‹æ¥æ”¶è€…æ–¹æ³• å¦‚ä½•èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;æŒ‡é’ˆæ¥æ”¶è€…ï¼š&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span> <span class=p>=</span> <span class=nb>new</span><span class=p>(</span><span class=nx>JsonPersistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// persistent = JsonPersistent{}
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// persistent.Load(&#34;&#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// persistent.Save(nil, &#34;&#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// sonPersistent does not implement Persistent (Load method has pointer receiver)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆæœ‰æŒ‡é’ˆ åˆæœ‰å€¼æ¥æ”¶è€…æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ProtobufPersistent{} =&gt; æœªå®ç°Saveå€¼æ¥æ”¶è€…æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// new(ProtobufPersistent) =&gt; å¯ä»¥
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>persistent</span> <span class=p>=</span> <span class=o>&amp;</span><span class=nx>ProtobufPersistent</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ¥å£æ–¹æ³•æ˜¯å€¼æ¥æ”¶è€… ä¼šç”Ÿæˆå¯¹åº”çš„æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// æ¥å£æ–¹å¼æ˜¯æŒ‡é’ˆæ¥æ”¶è€… ä¸ä¼šç”Ÿæˆå¯¹åº”çš„å€¼æ¥æ”¶è€…æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç»“æ„ä½“èµ‹å€¼æ¥å£ç±»å‹>ç»“æ„ä½“èµ‹å€¼æ¥å£ç±»å‹</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Persistent</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Save</span><span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl>    <span class=nf>Load</span><span class=p>(</span><span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>GobPersistent</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Version</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>u</span> <span class=p>[]</span><span class=nx>User</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Save&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Load</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Load&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Test</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Test&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ¥å£èµ‹å€¼ä¸èƒ½çœç•¥ç±»å‹ çœç•¥ä¹‹åç±»å‹ä¸ä¸€æ · ä¸€ä¸ªæ˜¯æ¥å£ç±»å‹ ä¸€ä¸ªæ˜¯ç»“æ„ä½“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>persistent</span> <span class=nx>Persistent</span> <span class=p>=</span> <span class=nx>GobPersistent</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// var persistent = GobPersistent{}
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>persistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span> <span class=c1>// æ­£å¸¸è°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>persistent</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>      <span class=c1>// æ­£å¸¸è°ƒç”¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// persistent.Test()               // type Persistent has no field or method Test. ä¸èƒ½è°ƒç”¨Testæ–¹æ³• Persistentæ¥å£æ— Testæ–¹æ³• =&gt; è¡Œä¸ºä¸¢å¤±
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Println(persistent.Version) // ä¸èƒ½è·å–Versionå±æ€§
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ¥å£èµ‹å€¼æ¥å£>æ¥å£èµ‹å€¼æ¥å£</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Persistent</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Save</span><span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl>    <span class=nf>Load</span><span class=p>(</span><span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>GobPersistent</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Version</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>u</span> <span class=p>[]</span><span class=nx>User</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Save&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Load</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Load&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Test</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Test&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Saver</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Save</span><span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Loader</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Load</span><span class=p>(</span><span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Dumper</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Save</span><span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl>    <span class=nf>Dump</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>persistent</span> <span class=nx>Persistent</span> <span class=p>=</span> <span class=nx>GobPersistent</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v\n&#34;</span><span class=p>,</span> <span class=nx>persistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>saver</span> <span class=nx>Saver</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>saver</span><span class=p>,</span> <span class=nx>saver</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>saver</span> <span class=p>=</span> <span class=nx>GobPersistent</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>saver</span><span class=p>,</span> <span class=nx>saver</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>saver</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>saver</span> <span class=p>=</span> <span class=nx>persistent</span> <span class=c1>// æ¥å£å¯¹è±¡èµ‹å€¼ç»™å¦ä¸€ä¸ªæ¥å£å¯¹è±¡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>saver</span><span class=p>,</span> <span class=nx>saver</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>loader</span> <span class=nx>Loader</span> <span class=p>=</span> <span class=nx>persistent</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>loader</span><span class=p>,</span> <span class=nx>loader</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ²¡æœ‰å®ç°Dumpæ–¹æ³• æ— æ³•èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// var dumper Dumper = persistent
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ¥å£èµ‹å€¼å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹åˆ›å»ºçš„å¯¹è±¡èµ‹å€¼ æˆ–è€… é€šè¿‡æ¥å£ç±»å‹çš„å˜é‡è¿›è¡Œèµ‹å€¼(éœ€è¦å®ç°å¯¹åº”çš„æ–¹æ³•)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ¥å£èµ‹å€¼çš„è¿‡ç¨‹ä¸­ ä¼šä¸¢å¤±ä¸€äº›æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç±»å‹æ–­è¨€>ç±»å‹æ–­è¨€</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Persistent</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Save</span><span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl>    <span class=nf>Load</span><span class=p>(</span><span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>GobPersistent</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Version</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>u</span> <span class=p>[]</span><span class=nx>User</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Save&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Load</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Load&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Test</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;gob Test&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>CsvPersistent</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Version</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=nx>CsvPersistent</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>u</span> <span class=p>[]</span><span class=nx>User</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Save&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=nx>CsvPersistent</span><span class=p>)</span> <span class=nf>Load</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Load&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=nx>CsvPersistent</span><span class=p>)</span> <span class=nf>Test</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;csv Test&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Saver</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Save</span><span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>persistent</span> <span class=nx>Persistent</span> <span class=p>=</span> <span class=nx>GobPersistent</span><span class=p>{</span><span class=s>&#34;1.1.1&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ç±»å‹è½¬æ¢
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// æ–­è¨€ï¼šåªèƒ½å¯¹æ¥å£ç±»å‹åšæ“ä½œ è½¬æ¢ä¸ºä¸€ä¸ªæ›´å…·ä½“çš„ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¯¹åº”ç±»å‹çš„å˜é‡, ok := æ¥å£ç±»å‹å˜é‡.(ç±»å‹)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// persistent.Test()
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>gobPersistent</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>persistent</span><span class=p>.(</span><span class=nx>GobPersistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v, %T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>gobPersistent</span><span class=p>,</span> <span class=nx>gobPersistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>gobPersistent</span><span class=p>.</span><span class=nf>Test</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>gobPersistent</span><span class=p>.</span><span class=nx>Version</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// useræ²¡æœ‰å®ç°persistentæ¥å£ æ— æ³•æ–­è¨€
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// user, ok := persistent.(User)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// fmt.Println(user, ok)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>csvPersistent</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>persistent</span><span class=p>.(</span><span class=nx>CsvPersistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v, %T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>csvPersistent</span><span class=p>,</span> <span class=nx>csvPersistent</span><span class=p>)</span> <span class=c1>// ok == false
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>csvPersistent</span><span class=p>.</span><span class=nf>Test</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>saver</span> <span class=nx>Saver</span> <span class=p>=</span> <span class=nx>persistent</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>p</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>saver</span><span class=p>.(</span><span class=nx>Persistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v, %T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>p</span><span class=p>,</span> <span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>p</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>g</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>saver</span><span class=p>.(</span><span class=nx>GobPersistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v, %T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>g</span><span class=p>,</span> <span class=nx>g</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>g</span><span class=p>.</span><span class=nx>Version</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>c</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>saver</span><span class=p>.(</span><span class=nx>CsvPersistent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v, %T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>c</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>c</span><span class=p>.</span><span class=nf>Test</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å¤šä¸ªç±»å‹æ–­è¨€>å¤šä¸ªç±»å‹æ–­è¨€</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å¤šä¸ªç±»å‹æ–­è¨€ if...else / switch
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>persistent</span> <span class=nx>Persistent</span> <span class=p>=</span> <span class=o>&amp;</span><span class=nx>ProtobufPersistent</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// if g, ok := persistent.(GobPersistent); ok {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     fmt.Println(&#34;g&#34;, g, ok)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// } else if c, ok := persistent.(CsvPersistent); ok {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     fmt.Println(&#34;c&#34;, c, ok)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// } else if j, ok := persistent.(*JsonPersistent); ok {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     fmt.Println(&#34;j&#34;, j, ok)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// } else if p, ok := persistent.(*ProtobufPersistent); ok {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     fmt.Println(&#34;p&#34;, p, ok)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// } else {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     fmt.Println(&#34;error&#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>        switch æ¥å£ç±»å‹å˜é‡.(type) {
</span></span></span><span class=line><span class=cl><span class=cm>        case GobPersistent:
</span></span></span><span class=line><span class=cl><span class=cm>        case CsvPersistent:
</span></span></span><span class=line><span class=cl><span class=cm>        case *JsonPersistent:
</span></span></span><span class=line><span class=cl><span class=cm>        case *ProtobufPersistent:
</span></span></span><span class=line><span class=cl><span class=cm>        default:
</span></span></span><span class=line><span class=cl><span class=cm>        }
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>        switch p := æ¥å£ç±»å‹å˜é‡.(type) {
</span></span></span><span class=line><span class=cl><span class=cm>        case GobPersistent:
</span></span></span><span class=line><span class=cl><span class=cm>        case CsvPersistent:
</span></span></span><span class=line><span class=cl><span class=cm>        case *JsonPersistent:
</span></span></span><span class=line><span class=cl><span class=cm>        case *ProtobufPersistent:
</span></span></span><span class=line><span class=cl><span class=cm>        default:
</span></span></span><span class=line><span class=cl><span class=cm>        }
</span></span></span><span class=line><span class=cl><span class=cm>    */</span>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=nx>p</span> <span class=o>:=</span> <span class=nx>persistent</span><span class=p>.(</span><span class=kd>type</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>GobPersistent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;g&#34;</span><span class=p>,</span> <span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>CsvPersistent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;c&#34;</span><span class=p>,</span> <span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=o>*</span><span class=nx>JsonPersistent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;j&#34;</span><span class=p>,</span> <span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=o>*</span><span class=nx>ProtobufPersistent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;p&#34;</span><span class=p>,</span> <span class=nx>p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;error&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ¥å£åµŒå…¥>æ¥å£åµŒå…¥</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span><span class=lnt>91
</span><span class=lnt>92
</span><span class=lnt>93
</span><span class=lnt>94
</span><span class=lnt>95
</span><span class=lnt>96
</span><span class=lnt>97
</span><span class=lnt>98
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>GobPersistent</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Version</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>u</span> <span class=p>[]</span><span class=nx>User</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Save&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Load</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Load&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Saver</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Save</span><span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Loader</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Load</span><span class=p>(</span><span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>PersistentV2</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Saver</span>
</span></span><span class=line><span class=cl>    <span class=nx>Loader</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>PersistentV3</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Saver</span>
</span></span><span class=line><span class=cl>    <span class=nx>Loader</span>
</span></span><span class=line><span class=cl>    <span class=nf>Dump</span><span class=p>()</span> <span class=c1>// V3è¿™ä¸ªæ¥å£ è¿˜éœ€è¦å®ç°Dumpæ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ¥å£åªæœ‰åŒ¿ååµŒå…¥
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>persistentV2</span> <span class=nx>PersistentV2</span> <span class=p>=</span> <span class=nx>GobPersistent</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>persistentV2</span><span class=p>,</span> <span class=nx>persistentV2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistentV2</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>persistentV2</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç»“æ„ä½“å½“å‰ä½¿ç”¨æ¥å£åµŒå…¥
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Persistent</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>Save</span><span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl>    <span class=nf>Load</span><span class=p>(</span><span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>GobPersistent</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Version</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Save</span><span class=p>(</span><span class=nx>u</span> <span class=p>[]</span><span class=nx>User</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Save&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>g</span> <span class=nx>GobPersistent</span><span class=p>)</span> <span class=nf>Load</span><span class=p>(</span><span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>([]</span><span class=nx>User</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Load&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Storer</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Persistent</span> <span class=nx>Persistent</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>StorerV2</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Persistent</span> <span class=c1>// åŒ¿ååµŒå…¥
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>storer</span> <span class=o>:=</span> <span class=nx>Storer</span><span class=p>{</span><span class=nx>GobPersistent</span><span class=p>{}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>storer</span><span class=p>.</span><span class=nx>Persistent</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>storer</span><span class=p>.</span><span class=nx>Persistent</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>storerV2</span> <span class=o>:=</span> <span class=nx>StorerV2</span><span class=p>{</span><span class=nx>GobPersistent</span><span class=p>{}}</span>
</span></span><span class=line><span class=cl>    <span class=nx>storerV2</span><span class=p>.</span><span class=nx>Persistent</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>storerV2</span><span class=p>.</span><span class=nx>Persistent</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>storerV2</span><span class=p>.</span><span class=nf>Load</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>storerV2</span><span class=p>.</span><span class=nf>Save</span><span class=p>(</span><span class=kc>nil</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=åŒ¿åæ¥å£>åŒ¿åæ¥å£</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>test</span> <span class=p>=</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;åŒ¿åå‡½æ•°&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>user</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>ID</span>   <span class=kt>string</span>
</span></span><span class=line><span class=cl>        <span class=nx>Name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=c1>// åŒ¿åç»“æ„ä½“
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>saver</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nf>Save</span><span class=p>(</span><span class=kt>string</span><span class=p>)</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=c1>// åŒ¿åæ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>test</span><span class=p>,</span> <span class=nx>test</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>user</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>saver</span><span class=p>,</span> <span class=nx>saver</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç©ºæ¥å£åŠå…¶ä½¿ç”¨>ç©ºæ¥å£åŠå…¶ä½¿ç”¨</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>EmptyStruct</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>EmptyInterface</span> <span class=kd>interface</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>emptyStr</span> <span class=o>:=</span> <span class=s>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>emptyStr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>emptySlice</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>int</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>emptySlice</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>emptyMap</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>emptyMap</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>emptyStruct</span> <span class=o>:=</span> <span class=nx>EmptyStruct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>emptyStruct</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ç©ºæ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>emptyInterface</span> <span class=nx>EmptyInterface</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç©ºæ¥å£å¦‚ä½•èµ‹å€¼?
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ç©ºæ¥å£æ²¡æœ‰å®šä¹‰ä»»ä½•çš„ç­¾å ä»»æ„å¯¹è±¡éƒ½å¯ä»¥èµ‹å€¼ç»™ç©ºæ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>emptyInterface</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>emptyInterface</span><span class=p>,</span> <span class=nx>emptyInterface</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>emptyInterface</span> <span class=p>=</span> <span class=s>&#34;123&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>emptyInterface</span><span class=p>,</span> <span class=nx>emptyInterface</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>emptyInterface</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>emptyInterface</span><span class=p>,</span> <span class=nx>emptyInterface</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>emptyInterface</span> <span class=p>=</span> <span class=nx>emptyStruct</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>emptyInterface</span><span class=p>,</span> <span class=nx>emptyInterface</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>emptyInterface</span> <span class=p>=</span> <span class=nx>emptySlice</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>emptyInterface</span><span class=p>,</span> <span class=nx>emptyInterface</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ç©ºæ¥å£ + åŒ¿å
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>empty</span> <span class=kd>interface</span><span class=p>{}</span> <span class=c1>// emptyç©ºæ¥å£çš„å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>empty</span><span class=p>,</span> <span class=nx>empty</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>empty</span> <span class=p>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>empty</span><span class=p>,</span> <span class=nx>empty</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>empty</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>empty</span><span class=p>,</span> <span class=nx>empty</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>)</span> <span class=c1>// fmt.Println å¯ä»¥æ‰“å°ä»»æ„ç±»å‹çš„å˜é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¦‚ä½•å®ç°ä¸€ä¸ªå¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹å˜é‡çš„å‡½æ•° =&gt; ä½¿ç”¨ç©ºæ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>t</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>t</span><span class=p>(</span><span class=s>&#34;&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>t</span><span class=p>(</span><span class=kc>true</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>t</span><span class=p>([]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;1&#34;</span><span class=p>,</span> <span class=s>&#34;@&#34;</span><span class=p>}))</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nf>t</span><span class=p>(</span><span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=s>&#34;1&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s>&#34;@&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>}))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å¦‚ä½•å®ç°ä¸€ä¸ªå¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡ ä»»æ„ç±»å‹çš„å‡½æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>args</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nf>args</span><span class=p>(</span><span class=s>&#34;abc&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=p>[]</span><span class=kt>string</span><span class=p>{})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>t</span><span class=p>(</span><span class=nx>args</span> <span class=kd>interface</span><span class=p>{})</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;%T&#34;</span><span class=p>,</span> <span class=nx>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>args</span><span class=p>(</span><span class=nx>args</span> <span class=o>...</span><span class=kd>interface</span><span class=p>{})</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>arg</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>args</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>i</span><span class=p>,</span> <span class=nf>t</span><span class=p>(</span><span class=nx>arg</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=jsonåºåˆ—åŒ–ååºåˆ—åŒ–>Jsonåºåˆ—åŒ–/ååºåˆ—åŒ–</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=mf>1.</span> <span class=nx>Type</span><span class=p>,</span> <span class=nx>Value</span>
</span></span><span class=line><span class=cl><span class=mf>2.</span> <span class=err>ä½¿ç”¨åå°„</span>
</span></span><span class=line><span class=cl><span class=mf>3.</span> <span class=err>åå°„åº”ç”¨</span><span class=p>(</span><span class=err>å†…éƒ¨å®ç°ä½¿ç”¨åå°„</span><span class=p>)</span><span class=err>ï¼š</span> <span class=nx>json</span> <span class=err>\</span> <span class=nx>xml</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=encodingjson>encoding/json</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>go</span> <span class=nx>doc</span> <span class=nx>encoding</span><span class=o>/</span><span class=nx>json</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=åŸºæœ¬æ•°æ®ç±»å‹json-è½¬æ¢>åŸºæœ¬æ•°æ®ç±»å‹/json è½¬æ¢</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* json: æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²
</span></span></span><span class=line><span class=cl><span class=cm>GO                  =&gt;          Json
</span></span></span><span class=line><span class=cl><span class=cm>æ•°å€¼ï¼šnumber(int/float)   =&gt; 1.1 10 -10
</span></span></span><span class=line><span class=cl><span class=cm>å­—ç¬¦ä¸²ï¼šstring              =&gt; &#34;&#34;
</span></span></span><span class=line><span class=cl><span class=cm>å¸ƒå°”ï¼šbool                =&gt; true, false
</span></span></span><span class=line><span class=cl><span class=cm>æ•°ç»„ï¼š[]Type/[Length]Type =&gt; [1, 2, 3, &#34;&#34;, &#34;&#34;]
</span></span></span><span class=line><span class=cl><span class=cm>å­—å…¸(Object):map[KTepy]Value     =&gt; {&#34;key&#34;: value, &#34;key2&#34;: value2}
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>Goæ•°æ®ç±»å‹ ä¸ Jsonå­—ç¬¦ä¸²è½¬æ¢
</span></span></span><span class=line><span class=cl><span class=cm>Goæ•°æ®ç±»å‹ &lt;=&gt; GobäºŒè¿›åˆ¶å­—ç¬¦ä¸²
</span></span></span><span class=line><span class=cl><span class=cm>Goæ•°æ®ç±»å‹ &lt;=&gt; xmlå­—ç¬¦ä¸²
</span></span></span><span class=line><span class=cl><span class=cm>Goæ•°æ®ç±»å‹ &lt;=&gt; Protobuffer
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>æŒä¹…åŒ–/ç½‘ç»œä¼ è¾“
</span></span></span><span class=line><span class=cl><span class=cm>=&gt; åºåˆ—åŒ–ï¼š Goæ•°æ®ç±»å‹ =&gt; å­—ç¬¦ä¸²(æ–‡æœ¬/äºŒè¿›åˆ¶)
</span></span></span><span class=line><span class=cl><span class=cm>=&gt; ååºåˆ—åŒ–ï¼šå­—ç¬¦ä¸²(æ–‡æœ¬/äºŒè¿›åˆ¶) =&gt; Goæ•°æ®ç±»å‹
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>ç¼–ç è§„åˆ™ =&gt; åº“(åŒ…)
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;encoding/json&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>number</span> <span class=kt>float64</span>        <span class=p>=</span> <span class=mf>1.1</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span>   <span class=kt>string</span>         <span class=p>=</span> <span class=s>&#34;minho&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nx>isBody</span> <span class=kt>bool</span>           <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>        <span class=nx>users</span>  <span class=p>[]</span><span class=kt>string</span>       <span class=p>=</span> <span class=p>[]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;1&#34;</span><span class=p>,</span> <span class=s>&#34;2&#34;</span><span class=p>,</span> <span class=s>&#34;3&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>scores</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span> <span class=p>=</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span><span class=p>{</span><span class=s>&#34;1&#34;</span><span class=p>:</span> <span class=mi>90</span><span class=p>,</span> <span class=s>&#34;2&#34;</span><span class=p>:</span> <span class=mi>80</span><span class=p>,</span> <span class=s>&#34;3&#34;</span><span class=p>:</span> <span class=mi>100</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// åºåˆ—åŒ–ä¸ºjsonå­—ç¬¦ä¸²
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>b</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>number</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v, %T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v, %T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>isBody</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v, %T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>users</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v, %T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>scores</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v, %T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Unmarshal ååºåˆ—åŒ–
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>jsonB</span> <span class=o>:=</span> <span class=s>`
</span></span></span><span class=line><span class=cl><span class=s>    {
</span></span></span><span class=line><span class=cl><span class=s>        &#34;name&#34;: &#34;minho&#34;,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;age&#34;: 30,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;isBody&#34;: true,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;scores&#34;: [1, 2, 3, 4]
</span></span></span><span class=line><span class=cl><span class=s>    }
</span></span></span><span class=line><span class=cl><span class=s>    `</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>rs</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kd>interface</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>jsonB</span><span class=p>),</span> <span class=o>&amp;</span><span class=nx>rs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v, %#v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>,</span> <span class=nx>rs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>value</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>rs</span><span class=p>[</span><span class=s>&#34;name&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T&#34;</span><span class=p>,</span> <span class=nx>value</span><span class=p>)</span> <span class=c1>// valueæ˜¯ä¸€ä¸ªç©ºæ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>value</span><span class=p>.(</span><span class=kt>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %T, %#v, %#v\n&#34;</span><span class=p>,</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span><span class=p>,</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=è‡ªå®šä¹‰æ•°æ®ç±»å‹jsonè½¬æ¢>è‡ªå®šä¹‰æ•°æ®ç±»å‹/jsonè½¬æ¢</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;encoding/json&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// éœ€è¦è®¾ç½®å±æ€§ä¸Jsonå­—ç¬¦ä¸²ä¸­keyçš„å¯¹åº”å…³ç³»
</span></span></span><span class=line><span class=cl><span class=c1>// Id =&gt; json.pk =&gt; é€šè¿‡ç»“æ„ä½“(å±æ€§)æ ‡ç­¾è®¾ç½®
</span></span></span><span class=line><span class=cl><span class=c1>// key1:&#34;value1&#34; key2:&#34;value2&#34;
</span></span></span><span class=line><span class=cl><span class=c1>// json:&#34;name&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// ç½‘ç»œä¼ è¾“æ—¶ ä¸éœ€è¦å°†æŸä¸ªkeyè¿›è¡Œåºåˆ—åŒ– `json:&#34;-&#34;` ç»“æ„ä½“æ ‡ç­¾è®¾ç½®ä¸º- åºåˆ—åŒ–/ååºåˆ—åŒ–ä¸ä¼šæºå¸¦è¯¥å±æ€§
</span></span></span><span class=line><span class=cl><span class=c1>// json:&#34;-&#34; åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶å¿½ç•¥å±æ€§
</span></span></span><span class=line><span class=cl><span class=c1>// json:&#34;name,type(string),omitempty&#34;
</span></span></span><span class=line><span class=cl><span class=c1>// omitempty å±æ€§å¯¹åº”çš„å€¼ä¸ºé›¶å€¼åœ¨jsonå­—ç¬¦ä¸²ä¸­ä¸åŒ…å«(å¿½ç•¥0å€¼)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>       <span class=kt>int</span>               <span class=s>`json:&#34;pk,string&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span>     <span class=kt>string</span>            <span class=s>`json:&#34;name&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Password</span> <span class=kt>string</span>            <span class=s>`json:&#34;-&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>IsBoy</span>    <span class=kt>bool</span>              <span class=s>`json:&#34;isBoy&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Scores</span>   <span class=p>[]</span><span class=kt>float64</span>         <span class=s>`json:&#34;scores&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Phone</span>    <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>string</span> <span class=s>`json:&#34;phone&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>user</span> <span class=o>:=</span> <span class=nx>User</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=s>&#34;minho&#34;</span><span class=p>,</span> <span class=s>&#34;123#@&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>,</span> <span class=p>[]</span><span class=kt>float64</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>},</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;tel&#34;</span><span class=p>:</span> <span class=s>&#34;13308047517&#34;</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>user</span><span class=p>)</span>             <span class=c1>// è‡ªå®šä¹‰å±æ€§æ˜¯å°å†™ jsonåŒ…æ— æ³•è®¿é—®å±æ€§
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v, %#v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>,</span> <span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>))</span> <span class=c1>// è½¬æ¢å­—å…¸Object keyæ˜¯å±æ€§åç§° valueæ˜¯å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>jsonB</span> <span class=o>:=</span> <span class=s>`
</span></span></span><span class=line><span class=cl><span class=s>    {
</span></span></span><span class=line><span class=cl><span class=s>        &#34;pk&#34;: &#34;10&#34;,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;name&#34;: &#34;minho&#34;,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;Password&#34;: &#34;123@abc&#34;,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;isBoy&#34;: false,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;phone&#34;: {&#34;mobile&#34;: &#34;12314341&#34;}
</span></span></span><span class=line><span class=cl><span class=s>    }
</span></span></span><span class=line><span class=cl><span class=s>    `</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>u</span> <span class=nx>User</span>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>jsonB</span><span class=p>),</span> <span class=o>&amp;</span><span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v, %#v\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>,</span> <span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>users</span> <span class=o>:=</span> <span class=p>[]</span><span class=nx>User</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=s>&#34;minho&#34;</span><span class=p>,</span> <span class=s>&#34;123#@&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>,</span> <span class=p>[]</span><span class=kt>float64</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>},</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;tel&#34;</span><span class=p>:</span> <span class=s>&#34;13308047517&#34;</span><span class=p>}},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=mi>2</span><span class=p>,</span> <span class=s>&#34;minho2&#34;</span><span class=p>,</span> <span class=s>&#34;123#@&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>,</span> <span class=p>[]</span><span class=kt>float64</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>},</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;tel&#34;</span><span class=p>:</span> <span class=s>&#34;13308047517&#34;</span><span class=p>}},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=mi>3</span><span class=p>,</span> <span class=s>&#34;minho3&#34;</span><span class=p>,</span> <span class=s>&#34;123#@&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>,</span> <span class=p>[]</span><span class=kt>float64</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>},</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;tel&#34;</span><span class=p>:</span> <span class=s>&#34;13308047517&#34;</span><span class=p>}},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è°ƒè¯•å¯ä»¥æ‰“å°æ ¼å¼è¾“å‡º ç½‘ç»œä¼ è¾“ä¸ç”¨ æµªè´¹å­—èŠ‚
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>b</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>MarshalIndent</span><span class=p>(</span><span class=nx>users</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=s>&#34;\t&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%#v, %s\n&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>,</span> <span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>jsonB</span> <span class=p>=</span> <span class=s>`
</span></span></span><span class=line><span class=cl><span class=s>    [
</span></span></span><span class=line><span class=cl><span class=s>        {
</span></span></span><span class=line><span class=cl><span class=s>                &#34;pk&#34;: &#34;11&#34;,
</span></span></span><span class=line><span class=cl><span class=s>                &#34;name&#34;: &#34;minho&#34;,
</span></span></span><span class=line><span class=cl><span class=s>                &#34;isBoy&#34;: true,
</span></span></span><span class=line><span class=cl><span class=s>                &#34;scores&#34;: [
</span></span></span><span class=line><span class=cl><span class=s>                        1,
</span></span></span><span class=line><span class=cl><span class=s>                        3,
</span></span></span><span class=line><span class=cl><span class=s>                        4
</span></span></span><span class=line><span class=cl><span class=s>                ],
</span></span></span><span class=line><span class=cl><span class=s>                &#34;phone&#34;: {
</span></span></span><span class=line><span class=cl><span class=s>                        &#34;tel&#34;: &#34;13308047517&#34;
</span></span></span><span class=line><span class=cl><span class=s>                }
</span></span></span><span class=line><span class=cl><span class=s>        },
</span></span></span><span class=line><span class=cl><span class=s>        {
</span></span></span><span class=line><span class=cl><span class=s>                &#34;pk&#34;: &#34;22&#34;,
</span></span></span><span class=line><span class=cl><span class=s>                &#34;name&#34;: &#34;minho2&#34;,
</span></span></span><span class=line><span class=cl><span class=s>                &#34;isBoy&#34;: true,
</span></span></span><span class=line><span class=cl><span class=s>                &#34;scores&#34;: [
</span></span></span><span class=line><span class=cl><span class=s>                        1,
</span></span></span><span class=line><span class=cl><span class=s>                        3,
</span></span></span><span class=line><span class=cl><span class=s>                        4
</span></span></span><span class=line><span class=cl><span class=s>                ],
</span></span></span><span class=line><span class=cl><span class=s>                &#34;phone&#34;: {
</span></span></span><span class=line><span class=cl><span class=s>                        &#34;tel&#34;: &#34;13308047517&#34;
</span></span></span><span class=line><span class=cl><span class=s>                }
</span></span></span><span class=line><span class=cl><span class=s>        },
</span></span></span><span class=line><span class=cl><span class=s>        {
</span></span></span><span class=line><span class=cl><span class=s>                &#34;pk&#34;: &#34;33&#34;,
</span></span></span><span class=line><span class=cl><span class=s>                &#34;name&#34;: &#34;minho3&#34;,
</span></span></span><span class=line><span class=cl><span class=s>                &#34;isBoy&#34;: true,
</span></span></span><span class=line><span class=cl><span class=s>                &#34;scores&#34;: [
</span></span></span><span class=line><span class=cl><span class=s>                        1,
</span></span></span><span class=line><span class=cl><span class=s>                        3,
</span></span></span><span class=line><span class=cl><span class=s>                        4
</span></span></span><span class=line><span class=cl><span class=s>                ],
</span></span></span><span class=line><span class=cl><span class=s>                &#34;phone&#34;: {
</span></span></span><span class=line><span class=cl><span class=s>                        &#34;tel&#34;: &#34;13308047517&#34;
</span></span></span><span class=line><span class=cl><span class=s>                }
</span></span></span><span class=line><span class=cl><span class=s>        }
</span></span></span><span class=line><span class=cl><span class=s>]
</span></span></span><span class=line><span class=cl><span class=s>`</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>us</span> <span class=p>[]</span><span class=nx>User</span>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>jsonB</span><span class=p>),</span> <span class=o>&amp;</span><span class=nx>us</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>us</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=è‡ªå®šä¹‰åµŒå…¥ç»“æ„ä½“-è½¬æ¢>è‡ªå®šä¹‰åµŒå…¥ç»“æ„ä½“ è½¬æ¢</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;encoding/json&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Addr</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Street</span> <span class=kt>string</span> <span class=s>`json:&#34;street&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>No</span>     <span class=kt>string</span> <span class=s>`json:&#34;no&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>   <span class=kt>int</span>    <span class=s>`json:&#34;id&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=kt>string</span> <span class=s>`json:&#34;name&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Addr</span> <span class=nx>Addr</span>   <span class=s>`json:&#34;addr&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span> <span class=o>:=</span> <span class=nx>User</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s>&#34;minho&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>Addr</span><span class=p>{</span><span class=s>&#34;æˆéƒ½&#34;</span><span class=p>,</span> <span class=s>&#34;640000&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>MarshalIndent</span><span class=p>(</span><span class=nx>u</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=s>&#34;\t&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ç­‰äºåµŒå…¥Object
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>jsonB</span> <span class=o>:=</span> <span class=s>`
</span></span></span><span class=line><span class=cl><span class=s>    {
</span></span></span><span class=line><span class=cl><span class=s>        &#34;id&#34;: 1,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;name&#34;: &#34;minho&#34;,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;addr&#34;: {
</span></span></span><span class=line><span class=cl><span class=s>                &#34;street&#34;: &#34;æˆéƒ½&#34;,
</span></span></span><span class=line><span class=cl><span class=s>                &#34;no&#34;: &#34;640000&#34;
</span></span></span><span class=line><span class=cl><span class=s>        }
</span></span></span><span class=line><span class=cl><span class=s>    }
</span></span></span><span class=line><span class=cl><span class=s>    `</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>rs</span> <span class=nx>User</span>
</span></span><span class=line><span class=cl>    <span class=nx>json</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>jsonB</span><span class=p>),</span> <span class=o>&amp;</span><span class=nx>rs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>rs</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=jsonvalid>json.Valid</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// éªŒè¯ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯æ­£ç¡®çš„jsonæ ¼å¼
</span></span></span></code></pre></td></tr></table></div></div><h3 id=å¯¹æµçš„æ“ä½œ>å¯¹æµçš„æ“ä½œ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åºåˆ—åŒ–åˆ°æ–‡ä»¶/ä»æ–‡ä»¶ååºåˆ—åŒ–
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;encoding/json&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Addr</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Street</span> <span class=kt>string</span> <span class=s>`json:&#34;street&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>No</span>     <span class=kt>string</span> <span class=s>`json:&#34;no&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>   <span class=kt>int</span>    <span class=s>`json:&#34;id&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=kt>string</span> <span class=s>`json:&#34;name&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Addr</span> <span class=nx>Addr</span>   <span class=s>`json:&#34;addr&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span> <span class=o>:=</span> <span class=nx>User</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=s>&#34;MInho&#34;</span><span class=p>,</span> <span class=nx>Addr</span><span class=p>{</span><span class=s>&#34;æˆéƒ½&#34;</span><span class=p>,</span> <span class=s>&#34;10001&#34;</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Create</span><span class=p>(</span><span class=s>&#34;user.json&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>file</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>encoder</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>NewEncoder</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span> <span class=c1>// Stroutè¾“å‡ºåˆ°æ§åˆ¶å°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>err</span> <span class=o>:=</span> <span class=nx>encoder</span><span class=p>.</span><span class=nf>Encode</span><span class=p>(</span><span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>file</span><span class=p>,</span> <span class=nx>_</span> <span class=p>=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Open</span><span class=p>(</span><span class=s>&#34;user.json&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>decoder</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>NewDecoder</span><span class=p>(</span><span class=nx>file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>user</span> <span class=nx>User</span>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=p>=</span> <span class=nx>decoder</span><span class=p>.</span><span class=nf>Decode</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=jsonrawmessage>json.RawMessage</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;encoding/json&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>   <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Addr</span> <span class=nx>json</span><span class=p>.</span><span class=nx>RawMessage</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>txt</span> <span class=o>:=</span> <span class=s>`{
</span></span></span><span class=line><span class=cl><span class=s>        &#34;id&#34;: 100,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;name&#34;: &#34;Minho&#34;, 
</span></span></span><span class=line><span class=cl><span class=s>        &#34;addr&#34;: {&#34;street&#34;: &#34;æˆéƒ½&#34;, &#34;no&#34;: &#34;10002&#34;}
</span></span></span><span class=line><span class=cl><span class=s>        }`</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>u</span> <span class=nx>User</span>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>txt</span><span class=p>),</span> <span class=o>&amp;</span><span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>u</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=marshaljsonunmarshaljson>MarshalJSON/UnmarshalJSON</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;encoding/json&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Date</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>d</span> <span class=nx>Date</span><span class=p>)</span> <span class=nf>MarshalJSON</span><span class=p>()</span> <span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Time</span><span class=p>(</span><span class=nx>d</span><span class=p>).</span><span class=nf>Format</span><span class=p>(</span><span class=s>&#34;2006-01-02&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// UnmarshalJSON ä¸€èˆ¬è¦èµ‹å€¼ å®šä¹‰æˆæŒ‡é’ˆç±»å‹æ¥æ”¶è€…
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>d</span> <span class=o>*</span><span class=nx>Date</span><span class=p>)</span> <span class=nf>UnmarshalJSON</span><span class=p>(</span><span class=nx>b</span> <span class=p>[]</span><span class=kt>byte</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>s</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>(</span><span class=nx>b</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>s</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>date</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Parse</span><span class=p>(</span><span class=s>&#34;2006-01-02&#34;</span><span class=p>,</span> <span class=nx>s</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=o>*</span><span class=nx>d</span> <span class=p>=</span> <span class=nf>Date</span><span class=p>(</span><span class=nx>date</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>        <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span>      <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Birthday</span>  <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span>
</span></span><span class=line><span class=cl>    <span class=nx>Birthday2</span> <span class=nx>Date</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>u</span> <span class=o>:=</span> <span class=nx>User</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>(),</span> <span class=nf>Date</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ— æ³•åºåˆ—åŒ–Birthday2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>b</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>MarshalIndent</span><span class=p>(</span><span class=nx>u</span><span class=p>,</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=s>&#34;\t&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>),</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>txt</span> <span class=o>:=</span> <span class=s>`
</span></span></span><span class=line><span class=cl><span class=s>    {
</span></span></span><span class=line><span class=cl><span class=s>        &#34;Id&#34;: 2,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;Name&#34;: &#34;Minho&#34;,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;Birthday&#34;: &#34;2021-08-20T17:34:58.3897013+08:00&#34;,
</span></span></span><span class=line><span class=cl><span class=s>        &#34;Birthday2&#34;: &#34;2021-08-31&#34;
</span></span></span><span class=line><span class=cl><span class=s>    }
</span></span></span><span class=line><span class=cl><span class=s>    `</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>us</span> <span class=nx>User</span>
</span></span><span class=line><span class=cl>    <span class=nx>err</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>([]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>txt</span><span class=p>),</span> <span class=o>&amp;</span><span class=nx>us</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>us</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// MarshalText / UnmarshalText
</span></span></span><span class=line><span class=cl><span class=c1>// ä¸JSONåŒºåˆ«æ˜¯ä¸éœ€è¦å†ä½¿ç”¨json.Marshal()å‡½æ•°è½¬æ¢
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Date2</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>d</span> <span class=nx>Date2</span><span class=p>)</span> <span class=nf>MarshalText</span><span class=p>()</span> <span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Time</span><span class=p>(</span><span class=nx>d</span><span class=p>).</span><span class=nf>Format</span><span class=p>(</span><span class=s>&#34;2006-01-02&#34;</span><span class=p>)),</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>d</span> <span class=o>*</span><span class=nx>Date2</span><span class=p>)</span> <span class=nf>UnmarshalText</span><span class=p>(</span><span class=nx>b</span> <span class=p>[]</span><span class=kt>byte</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span> <span class=p>=</span> <span class=o>:=</span> <span class=nb>string</span><span class=p>(</span><span class=nx>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>date</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Parse</span><span class=p>(</span><span class=s>&#34;2006-01-02&#34;</span><span class=p>,</span> <span class=nx>s</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=o>*</span><span class=nx>d</span> <span class=p>=</span> <span class=nf>Date2</span><span class=p>(</span><span class=nx>date</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=åå°„>åå°„</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// åå°„æ˜¯æŒ‡åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„è®¿é—®å’Œä¿®æ”¹ä»»æ„ç±»å‹å¯¹è±¡çš„ç»“æ„å’Œæˆå‘˜
</span></span></span><span class=line><span class=cl><span class=c1>// åœ¨goè¯­è¨€ä¸­æä¾›reflectåŒ…æä¾›åå°„çš„åŠŸèƒ½
</span></span></span><span class=line><span class=cl><span class=c1>// æ¯ä¸€ä¸ªå˜é‡éƒ½æœ‰ä¸¤ä¸ªå±æ€§ï¼šç±»å‹(Type) å’Œå€¼(Value)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>go</span> <span class=nx>doc</span> <span class=nx>reflect</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=é€šè¿‡åå°„å®ç°ç®€å•çš„orm>é€šè¿‡åå°„å®ç°ç®€å•çš„ORM</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ç”Ÿæˆç»“æ„ä½“å¯¹åº”çš„å»ºè¡¨SQLè¯­å¥
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;reflect&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;strings&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// sql:&#34;type(text);size(32);pk;null;default()&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>User</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>   <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=kt>string</span> <span class=s>`sql:&#34;type(text)&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Addr</span> <span class=kt>string</span> <span class=s>`sql:&#34;type(varchar);size(1024);null;default(æˆéƒ½)&#34;`</span>
</span></span><span class=line><span class=cl>    <span class=nx>Desc</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>u</span> <span class=nx>User</span><span class=p>)</span> <span class=nf>TableName</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s>&#34;account&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Department</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>Id</span>   <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>Name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>Addr</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>snake</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>ToLower</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>tableName</span><span class=p>(</span><span class=nx>value</span> <span class=nx>reflect</span><span class=p>.</span><span class=nx>Value</span><span class=p>)</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>tableName</span> <span class=o>:=</span> <span class=nx>value</span><span class=p>.</span><span class=nf>Elem</span><span class=p>().</span><span class=nf>Type</span><span class=p>().</span><span class=nf>Name</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>methodValue</span> <span class=o>:=</span> <span class=nx>value</span><span class=p>.</span><span class=nf>MethodByName</span><span class=p>(</span><span class=s>&#34;TableName&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=nx>methodValue</span><span class=p>.</span><span class=nx>IsValid</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>tableName</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>methodType</span> <span class=o>:=</span> <span class=nx>methodValue</span><span class=p>.</span><span class=nf>Type</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=mi>0</span> <span class=o>!=</span> <span class=nx>methodType</span><span class=p>.</span><span class=nf>NumIn</span><span class=p>()</span> <span class=o>||</span> <span class=mi>1</span> <span class=o>!=</span> <span class=nx>methodType</span><span class=p>.</span><span class=nf>Numout</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>tableName</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>outType</span> <span class=o>:=</span> <span class=nx>methodType</span><span class=p>.</span><span class=nf>out</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span> <span class=nx>outType</span><span class=p>.</span><span class=nf>Kind</span><span class=p>()</span> <span class=o>!=</span> <span class=nx>reflect</span><span class=p>.</span><span class=nx>String</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>tableName</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>params</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=nx>reflect</span><span class=p>.</span><span class=nx>Value</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>rts</span> <span class=o>:=</span> <span class=nx>methodValue</span><span class=p>.</span><span class=nf>Call</span><span class=p>(</span><span class=nx>params</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>res</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nf>String</span><span class=p>()</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>rts</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nb>string</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>tableName</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>typeMapper</span><span class=p>(</span><span class=nx>field</span> <span class=nx>reflect</span><span class=p>.</span><span class=nx>StructField</span><span class=p>)</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>kind</span> <span class=o>:=</span> <span class=nx>field</span><span class=p>.</span><span class=nx>Type</span><span class=p>.</span><span class=nf>Kind</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>tag</span> <span class=o>:=</span> <span class=nx>field</span><span class=p>.</span><span class=nx>Tag</span><span class=p>.</span><span class=nf>Get</span><span class=p>(</span><span class=s>&#34;sql&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>typeValue</span> <span class=o>:=</span> <span class=s>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>sizeValue</span> <span class=o>:=</span> <span class=s>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>defaultValue</span> <span class=o>:=</span> <span class=s>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>switch</span> <span class=nx>kind</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>reflect</span><span class=p>.</span><span class=nx>Int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>typeValue</span> <span class=p>=</span> <span class=s>&#34;int&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>reflect</span><span class=p>.</span><span class=nx>String</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>typeValue</span> <span class=p>=</span> <span class=s>&#34;varchar&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nx>sizeValue</span> <span class=p>=</span> <span class=s>&#34;32&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;text&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>pkValue</span> <span class=o>:=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=nx>nullValue</span> <span class=o>:=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>Split</span><span class=p>(</span><span class=nx>tag</span><span class=p>,</span> <span class=s>&#34;;&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>HasPrefix</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=s>&#34;type(&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>typeValue</span> <span class=p>=</span> <span class=nx>v</span><span class=p>[</span><span class=mi>5</span> <span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=nx>v</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>HasPrefix</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=s>&#34;size(&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>sizeValue</span> <span class=p>=</span> <span class=nx>v</span><span class=p>[</span><span class=mi>5</span> <span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=nx>v</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>HasPrefix</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=s>&#34;default(&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>defaultValue</span> <span class=p>=</span> <span class=nx>v</span><span class=p>[</span><span class=mi>8</span> <span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=nx>v</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>v</span> <span class=o>==</span> <span class=s>&#34;pk&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>pkValue</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=nx>v</span> <span class=o>==</span> <span class=s>&#34;null&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>nullValue</span> <span class=p>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>builder</span> <span class=nx>strings</span><span class=p>.</span><span class=nx>Builder</span>
</span></span><span class=line><span class=cl>    <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=nx>typeValue</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>typeValue</span> <span class=o>==</span> <span class=s>&#34;varchar&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;(%s)&#34;</span><span class=p>,</span> <span class=nx>sizeValue</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// builder.WriteString(&#34; &#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// varchar(32) primary key not null default &#34;&#34;;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>pkValue</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=s>&#34; primary key&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>!</span><span class=nx>nullValue</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=s>&#34; not null&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>defaultValue</span> <span class=o>!=</span> <span class=s>&#34;&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=s>&#34; default &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>typeValue</span> <span class=o>==</span> <span class=s>&#34;varchar&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>`&#34;%s&#34;`</span><span class=p>,</span> <span class=nx>defaultValue</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>`%s`</span><span class=p>,</span> <span class=nx>defaultValue</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>builder</span><span class=p>.</span><span class=nf>String</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>sqlDump</span><span class=p>(</span><span class=nx>models</span> <span class=o>...</span><span class=kd>interface</span><span class=p>{})</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>builder</span> <span class=nx>strings</span><span class=p>.</span><span class=nx>Builder</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>model</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>models</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>t</span> <span class=o>:=</span> <span class=nx>reflect</span><span class=p>.</span><span class=nf>TypeOf</span><span class=p>(</span><span class=nx>model</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>v</span> <span class=o>:=</span> <span class=nx>reflect</span><span class=p>.</span><span class=nf>ValueOf</span><span class=p>(</span><span class=nx>model</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>t</span><span class=p>.</span><span class=nf>Kind</span><span class=p>()</span> <span class=o>==</span> <span class=nx>reflect</span><span class=p>.</span><span class=nx>Ptr</span> <span class=o>&amp;&amp;</span> <span class=nx>t</span><span class=p>.</span><span class=nf>Elem</span><span class=p>().</span><span class=nf>Kind</span><span class=p>()</span> <span class=o>==</span> <span class=nx>reflect</span><span class=p>.</span><span class=nx>Struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>st</span> <span class=o>:=</span> <span class=nx>t</span><span class=p>.</span><span class=nf>Elem</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;CREATE TABLE `%s` (\n&#34;</span><span class=p>,</span> <span class=nf>snake</span><span class=p>(</span><span class=nf>tableName</span><span class=p>(</span><span class=nx>v</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=nx>filedNum</span> <span class=o>:=</span> <span class=nx>st</span><span class=p>.</span><span class=nf>NumField</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>filedNum</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>log</span><span class=p>.</span><span class=nf>Panicf</span><span class=p>(</span><span class=s>&#34;%s field num is zero&#34;</span><span class=p>,</span> <span class=nx>st</span><span class=p>.</span><span class=nf>Name</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nx>filedNum</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>field</span> <span class=o>:=</span> <span class=nx>st</span><span class=p>.</span><span class=nf>Field</span><span class=p>(</span><span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=c1>// fmt.Println(field.Name, field.Type.Kind())
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;\t `%s` %s&#34;</span><span class=p>,</span> <span class=nf>snake</span><span class=p>(</span><span class=nx>field</span><span class=p>.</span><span class=nx>Name</span><span class=p>),</span> <span class=nf>typeMapper</span><span class=p>(</span><span class=nx>field</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=nx>i</span> <span class=o>!=</span> <span class=nx>filedNum</span><span class=o>-</span><span class=mi>1</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=s>&#34;,&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=s>&#34;\n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=nx>builder</span><span class=p>.</span><span class=nf>WriteString</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;) ENGINE=INNODB DEFAULT CHARSET utf8mb4;\n\n&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nb>panic</span><span class=p>(</span><span class=s>&#34;error&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>builder</span><span class=p>.</span><span class=nf>String</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>sql</span> <span class=o>:=</span> <span class=nf>sqlDump</span><span class=p>(</span><span class=nb>new</span><span class=p>(</span><span class=nx>User</span><span class=p>),</span> <span class=nb>new</span><span class=p>(</span><span class=nx>Department</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>sql</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=goå¹¶å‘>Goå¹¶å‘</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// OS: è¿›ç¨‹/çº¿ç¨‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=err>è¿›ç¨‹ï¼šèµ„æº</span><span class=p>(</span><span class=err>å†…å­˜</span><span class=o>/</span><span class=err>æ–‡ä»¶</span><span class=nx>IO</span><span class=p>)</span> <span class=err>ä»¥è¿›ç¨‹ä¸ºå•ä½</span> <span class=err>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½</span>
</span></span><span class=line><span class=cl><span class=err>çº¿ç¨‹ï¼šæ‰§è¡Œçš„é€»è¾‘</span><span class=p>(</span><span class=err>ä¸»çº¿ç¨‹</span><span class=p>)</span> <span class=err>æ‰§è¡Œè°ƒç”¨çš„æ˜¯çº¿ç¨‹</span> <span class=err>çº¿ç¨‹æ˜¯</span><span class=nx>CPU</span><span class=err>è°ƒåº¦çš„æœ€å°å•å…ƒ</span>
</span></span><span class=line><span class=cl><span class=err>åç¨‹ï¼šåº”ç”¨ç¨‹åºå±‚é¢</span> <span class=err>ç”¨æˆ·æ€çš„è°ƒåº¦</span><span class=p>(</span><span class=err>æ¶ˆè€—å°</span> <span class=err>æ€§èƒ½å¾ˆé«˜</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=o>-</span> <span class=err>å…¶ä»–è¯­è¨€</span> <span class=err>ç¬¬ä¸‰æ–¹åº“</span> <span class=nx>python2</span><span class=mf>.7</span> <span class=p>=&gt;</span> <span class=nx>gevent</span> <span class=nx>greentleet</span>
</span></span><span class=line><span class=cl>     <span class=o>-</span> <span class=nx>Go</span> <span class=err>åœ¨è¯­è¨€å±‚é¢å°±æä¾›</span> <span class=nx>goroutine</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// GMPæ¨¡å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>G</span> <span class=p>=&gt;</span> <span class=err>ä¾‹ç¨‹</span> <span class=nx>goroutine</span>
</span></span><span class=line><span class=cl>  <span class=nx>M</span> <span class=p>=&gt;</span> <span class=err>æ‰§è¡Œä»£ç çš„çº¿ç¨‹</span><span class=p>(</span><span class=nx>CPU</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>P</span> <span class=p>=&gt;</span> <span class=nx>Processer</span> <span class=err>è°ƒåº¦</span> <span class=err>ä¸Šä¸‹æ–‡çš„åˆ‡æ¢</span> <span class=err>å†…å­˜ç”³è¯·</span><span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>P</span><span class=err>æ˜¯è¿æ¥</span><span class=nx>G</span><span class=err>å’Œ</span><span class=nx>M</span><span class=err>çš„</span><span class=p>(</span><span class=nx>Go</span><span class=err>ä¸­çš„è°ƒåº¦å™¨</span><span class=p>)</span> <span class=c1>// runtimeåŒ…
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// ä¾‹ç¨‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>go</span> <span class=err>å‡½æ•°è°ƒç”¨</span> <span class=c1>// å…³é”®å­— go
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>goroutine</span><span class=err>æ‰§è¡Œåˆ‡æ¢ï¼š</span>
</span></span><span class=line><span class=cl>  <span class=nx>IO</span><span class=err>ç­‰å¾…</span><span class=p>(</span><span class=nx>IO</span><span class=err>é˜»å¡</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=err>åˆ°è¾¾æ‰§è¡Œæ—¶é—´</span><span class=p>(</span><span class=err>æœ€å¤§æ‰§è¡Œæ—¶é—´</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=err>å†…æ ¸åˆ‡æ¢</span>
</span></span><span class=line><span class=cl>  <span class=err>ä¸»åŠ¨è®©å‡º</span><span class=p>(</span><span class=nx>sleep</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// mainå‡½æ•°ç”±GOè°ƒç”¨å™¨åˆ›å»ºä¾‹ç¨‹è¿›è¡Œæ‰§è¡Œ =&gt; ä¸»ä¾‹ç¨‹ 
</span></span></span><span class=line><span class=cl><span class=c1>// è‡ªå·±ç”¨goå…³é”®å­—åŠ å‡½æ•°è°ƒç”¨åˆ›å»ºçš„ä¾‹ç¨‹ =&gt; å·¥ä½œä¾‹ç¨‹
</span></span></span><span class=line><span class=cl><span class=c1>// å½“ä¸»ä¾‹ç¨‹æ‰§è¡Œå®Œæˆ è‡ªåŠ¨ç»“æŸæ‰€æœ‰å·¥ä½œä¾‹ç¨‹
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// åœ¨æŸä¸ªä¾‹ç¨‹é‡Œé¢ ä»£ç æ‰§è¡Œé¡ºåºä¾ç„¶æŒ‰ç…§é€»è¾‘å…³ç³»æŒ‰é¡ºåºæ‰§è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// å¹¶å‘
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>goruntine</span> <span class=p>=&gt;</span> <span class=err>å¤šä¸ªä¾‹ç¨‹æ—¶</span> <span class=err>å¦‚ä½•é€šä¿¡</span>
</span></span><span class=line><span class=cl>  <span class=err>å¹¶å‘é€šä¿¡</span>
</span></span><span class=line><span class=cl>    <span class=err>å†…å­˜ï¼šå˜é‡</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ä¸»ä¾‹ç¨‹>ä¸»ä¾‹ç¨‹</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æ‰“å°A-Z
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>printChats</span><span class=p>(</span><span class=nx>prefix</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>c</span> <span class=o>:=</span> <span class=sc>&#39;A&#39;</span><span class=p>;</span> <span class=nx>c</span> <span class=o>&lt;=</span> <span class=sc>&#39;Z&#39;</span><span class=p>;</span> <span class=nx>c</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s: %c\n&#34;</span><span class=p>,</span> <span class=nx>prefix</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nx>Millisecond</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è‡³å°‘æœ‰ä¸‰ä¸ª
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// c1 c2äº¤å‰æ‰§è¡Œ c1 c2åŒæ—¶åœ¨æ‰§è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>go</span> <span class=nf>printChats</span><span class=p>(</span><span class=s>&#34;c1:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>go</span> <span class=nf>printChats</span><span class=p>(</span><span class=s>&#34;c2:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>3</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Millisecond</span><span class=p>)</span> <span class=c1>// ä¸ç­‰å¾… æ²¡æœ‰ç»“æœæ‰“å° å› ä¸ºä¸»ä¾‹ç¨‹ç›´æ¥é€€å‡º
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// é—®é¢˜ï¼š èƒ½å¦ç­‰å¾…å·¥ä½œä¾‹ç¨‹ç»“æŸå å†è®©ä¸»ä¾‹ç¨‹é€€å‡º(ä¸»ä¾‹ç¨‹è¦ç­‰å¾…æŸå‡ ä¸ª/æˆ–ç­‰å¾…æ‰€æœ‰çš„å·¥ä½œä¾‹ç¨‹ç»“æŸ)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=è®¡æ•°ä¿¡å·é‡waitgroup>è®¡æ•°ä¿¡å·é‡/WaitGroup</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sync&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æ‰“å°A-Z
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>printChats</span><span class=p>(</span><span class=nx>wg</span> <span class=o>*</span><span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span><span class=p>,</span> <span class=nx>prefix</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span> <span class=c1>// stage B
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>c</span> <span class=o>:=</span> <span class=sc>&#39;A&#39;</span><span class=p>;</span> <span class=nx>c</span> <span class=o>&lt;=</span> <span class=sc>&#39;Z&#39;</span><span class=p>;</span> <span class=nx>c</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s: %c\n&#34;</span><span class=p>,</span> <span class=nx>prefix</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nx>Millisecond</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// stage C
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>go</span> <span class=nf>childChars</span><span class=p>(</span><span class=nx>wg</span><span class=p>,</span> <span class=nx>prefix</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>childChars</span><span class=p>(</span><span class=nx>wg</span> <span class=o>*</span><span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span><span class=p>,</span> <span class=nx>prefix</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>c</span> <span class=o>:=</span> <span class=sc>&#39;A&#39;</span><span class=p>;</span> <span class=nx>c</span> <span class=o>&lt;=</span> <span class=sc>&#39;Z&#39;</span><span class=p>;</span> <span class=nx>c</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;child.%s: %c\n&#34;</span><span class=p>,</span> <span class=nx>prefix</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nx>Millisecond</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>wg</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span> <span class=c1>// å®šä¹‰è®¡æ•°ä¿¡å·é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>        stage A
</span></span></span><span class=line><span class=cl><span class=cm>        go func() {
</span></span></span><span class=line><span class=cl><span class=cm>            stage B
</span></span></span><span class=line><span class=cl><span class=cm>            ...
</span></span></span><span class=line><span class=cl><span class=cm>            æœ‰å¯èƒ½ä¼šæŠ¥é”™
</span></span></span><span class=line><span class=cl><span class=cm>            ...
</span></span></span><span class=line><span class=cl><span class=cm>            stage C
</span></span></span><span class=line><span class=cl><span class=cm>        }
</span></span></span><span class=line><span class=cl><span class=cm>        stage D
</span></span></span><span class=line><span class=cl><span class=cm>    */</span>
</span></span><span class=line><span class=cl>    <span class=c1>// wg.Add(N) =&gt; å¯åŠ¨ä¾‹ç¨‹ä¹‹å‰æ‰§è¡Œ stage Aé˜¶æ®µï¼›åœ¨è®¡æ•°ä¿¡å·é‡ä¸­+N
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// wg.Done() =&gt; ä¾‹ç¨‹æ‰§è¡Œç»“æŸåè°ƒç”¨(ä¾‹ç¨‹å‡½æ•°é€€å‡ºæ—¶) stage Cï¼› å¦‚ä½•ä¿è¯wg.Done()ä¸€å®šæ‰§è¡Œ stage B + defer; å½“å‡½æ•°æ‰§è¡Œç»“æŸå¯¹è®¡æ•°ä¿¡å·é‡å‡1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// wg.Wait() =&gt; å¯åŠ¨æ‰€æœ‰ä¾‹ç¨‹åè°ƒç”¨ ç­‰å¾…è®¡æ•°ä¸º0ä¹‹åæ‰§è¡Œ(ä¸æ˜¯0çš„æ—¶å€™ä¸€ç›´ç­‰å¾…)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span> <span class=c1>// stage A
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>go</span> <span class=nf>printChats</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>wg</span><span class=p>,</span> <span class=s>&#34;c1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>                <span class=c1>// stage A
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>go</span> <span class=nf>printChats</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>wg</span><span class=p>,</span> <span class=s>&#34;c2&#34;</span><span class=p>)</span> <span class=c1>// wgéœ€è¦æ—¶æŒ‡é’ˆ å¦åˆ™æ—¶ä¸¤ä¸ªwg å‡½æ•°é‡Œé¢çš„wg Doneå‡å°‘è®¡æ•°çš„æ—¶å€™ ä¸å½±å“å¤–é¢çš„wg
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Wait&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Wait</span><span class=p>()</span> <span class=c1>// stage D
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Over&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// WaitGroup.Addæ•°é‡ &lt;= ä¾‹ç¨‹æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// æŸäº›ä¾‹ç¨‹ä¸éœ€è¦ç­‰å¾…ç»“æŸ å³å¯ç»“æŸä¸»ä¾‹ç¨‹(ç¨‹åº)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=é—­åŒ…é™·é˜±>é—­åŒ…é™·é˜±</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sync&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span> <span class=o>:=</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>2</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>prefix</span> <span class=o>:=</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;c%d&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=nx>c</span> <span class=o>:=</span> <span class=sc>&#39;A&#39;</span><span class=p>;</span> <span class=nx>c</span> <span class=o>&lt;=</span> <span class=sc>&#39;A&#39;</span><span class=p>;</span> <span class=nx>c</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s: %c\n&#34;</span><span class=p>,</span> <span class=nx>prefix</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nx>Millisecond</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}(</span><span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Wait&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Wait</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Over&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªwgå˜é‡ ä¸ç”¨å†ä¼ é€’æŒ‡é’ˆ
</span></span></span><span class=line><span class=cl><span class=c1>// go funcåŒ¿åå‡½æ•°é‡Œé¢ä½¿ç”¨çš„iå˜é‡ éœ€è¦å‚æ•°ä¼ é€’è¿›æ¥ å¦‚æœç›´æ¥ä½¿ç”¨å¤–éƒ¨iå˜é‡ ç»“æœä¸ç¡®å®š(è”æƒ³å»¶è¿Ÿæ‰§è¡Œ) forå¾ªç¯æ‰§è¡Œå®Œi=2 æ‰§è¡Œä¾‹ç¨‹ è¾“å‡ºç»“æœä¸­ prefixå€¼ä¸º3
</span></span></span></code></pre></td></tr></table></div></div><h3 id=å¹¶å‘é€šä¿¡åŠ é”>å¹¶å‘é€šä¿¡/åŠ é”</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// å¤šä¸ªä¾‹ç¨‹å¯¹åŒä¸€ä¸ªå†…å­˜èµ„æºè¿›è¡Œä¿®æ”¹ æœªå¯¹èµ„æºè¿›è¡ŒåŒæ­¥é™åˆ¶ å¯¼è‡´ä¿®æ”¹æ•°æ®æ··ä¹±
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sync&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ä»ä¸€ä¸ªè´¦æˆ·å€Ÿé’±/è¿˜é’±
</span></span></span><span class=line><span class=cl><span class=c1>// è´¦æˆ·åˆå§‹åŒ–500*10000
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// è§£å†³æ–¹æ³•ï¼šå€Ÿé’±å’Œè¿˜é’±è¿‡ç¨‹ä¸­ä¸è¦ä¸­æ–­
</span></span></span><span class=line><span class=cl><span class=c1>// åŠ é”
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>money</span> <span class=kt>int</span> <span class=p>=</span> <span class=mi>500</span> <span class=o>*</span> <span class=mi>10000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>locker</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>Mutex</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å€Ÿé’±
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>borrow</span><span class=p>(</span><span class=nx>m</span> <span class=kt>int</span><span class=p>)</span> <span class=kt>int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>locker</span><span class=p>.</span><span class=nf>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>locker</span><span class=p>.</span><span class=nf>Unlock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>money</span> <span class=p>&lt;</span> <span class=nx>m</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// é€€å‡ºä¸€å®šè¦é‡Šæ”¾é”
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// locker.Unlock()
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>money</span> <span class=o>-=</span> <span class=nx>m</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// locker.Unlock()
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=nx>m</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è¿˜é’±
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>payback</span><span class=p>(</span><span class=nx>m</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>locker</span><span class=p>.</span><span class=nf>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>locker</span><span class=p>.</span><span class=nf>Unlock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>money</span> <span class=o>+=</span> <span class=nx>m</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 2ä¸ªäººå€Ÿé’± A/B
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span> <span class=o>:=</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>person</span> <span class=o>:=</span> <span class=sc>&#39;A&#39;</span><span class=p>;</span> <span class=nx>person</span> <span class=o>&lt;=</span> <span class=sc>&#39;Z&#39;</span><span class=p>;</span> <span class=nx>person</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=kd>func</span><span class=p>(</span><span class=nx>person</span> <span class=kt>rune</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>defer</span> <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=c1>// æ¯æ¬¡2000
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>m</span> <span class=o>:=</span> <span class=nf>borrow</span><span class=p>(</span><span class=mi>2000</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Microsecond</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=nf>payback</span><span class=p>(</span><span class=nx>m</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>}(</span><span class=nx>person</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Wait</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;money:&#34;</span><span class=p>,</span> <span class=nx>money</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å¹¶å‘é€šä¿¡ç®¡é“>å¹¶å‘é€šä¿¡/ç®¡é“</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ç®¡é“
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// CSPåŸç†(é¡ºåºé€šä¿¡è¿›ç¨‹)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// é˜Ÿåˆ— bufferåŒº(çº¿ç¨‹/åç¨‹å®‰å…¨) -&gt; å…¥é˜Ÿåˆ— -&gt; å‡ºé˜Ÿåˆ—
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ç±»å‹ chan T T:Goä¸é™åˆ¶ç±»å‹ ä½†æ˜¯å¸¸å¸¸æ”¾ä¸€äº›å€¼ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¦‚æœæ”¾ä¸€ä¸ªåˆ‡ç‰‡(å¼•ç”¨ç±»å‹ ä¿®æ”¹ä¼šç›´æ¥ä¿®æ”¹å†…å­˜ä¸Šé¢çš„å€¼)åˆ°ç®¡é“ å…¶ä»–ä¾‹ç¨‹ä»ç®¡é“ä¸­è¯»å–åˆ‡ç‰‡å å¯¹åˆ‡ç‰‡å…ƒç´ ä¿®æ”¹ ä¼šå¯¹æ”¾å…¥ç«¯åˆ‡ç‰‡æœ‰å½±å“
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ”¾ç½®intç±»å‹å…ƒç´ çš„ç®¡é“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>channel</span> <span class=kd>chan</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%T, %#v\n&#34;</span><span class=p>,</span> <span class=nx>channel</span><span class=p>,</span> <span class=nx>channel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// èµ‹å€¼ makeå‡½æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¯¹åº”æœ‰å¯¹ç®¡é“ä¸é€šçš„è¯»å’Œå†™æ“ä½œçš„ä¾‹ç¨‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// make(chan T) ä¸å¸¦ç¼“å†²åŒºçš„ç®¡é“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// make(chan T, size) å¸¦ç¼“å†²åŒºçš„ç®¡é“ é•¿åº¦size
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// 5 size =&gt; 1 1 1 1 1 =&gt; 1 ç¼“å†²åŒºæ»¡ éœ€è¦ç­‰å¾…(é˜»å¡) å¦‚æœGoæ£€æŸ¥æ— goroutineå¯ä»¥è¯» å‘ç”Ÿæ­»é”
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// è¯» è¯»ç©ºchannel å¦‚æœGoæ£€æŸ¥æ— goroutineå¯ä»¥å†™ äº§ç”Ÿæ­»é”
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>channel</span> <span class=p>=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¦‚ä½•å†™
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>5</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å¦‚ä½•è¯»
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>e</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>channel</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=channelå®ç°waitgroup>channelå®ç°WaitGroup</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// channelå®ç°sync.WaitGroup 
</span></span></span><span class=line><span class=cl><span class=c1>// éœ€è¦æå‰çŸ¥é“ä½ çš„ç¨‹åºéœ€è¦èµ·å¤šå°‘ä¸ªä¾‹ç¨‹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>channel</span> <span class=kd>chan</span> <span class=kt>int</span> <span class=p>=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>)</span> <span class=c1>// åˆå§‹åŒ–
</span></span></span><span class=line><span class=cl><span class=c1></span>    
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>2</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=kd>func</span><span class=p>(</span><span class=nx>i</span> <span class=kt>int</span><span class=p>){</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=nx>c</span> <span class=o>:=</span> <span class=sc>&#39;A&#39;</span><span class=p>;</span> <span class=nx>c</span> <span class=o>&lt;=</span> <span class=sc>&#39;Z&#39;</span><span class=p>;</span> <span class=nx>c</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%d, %c\n&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1>// æ‰§è¡Œå®Œä¾‹ç¨‹ä¹‹åå†™å…¥æ•°æ®
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>}(</span><span class=nx>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;wait&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>2</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=o>&lt;-</span><span class=nx>channel</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;over&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å¸¦ç¼“å†²åŒºchannel>å¸¦ç¼“å†²åŒºchannel</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¸¦ç¼“å†²åŒºchannel
</span></span></span><span class=line><span class=cl><span class=c1>// channelè·Ÿé˜Ÿåˆ—ç±»ä¼¼ å…ˆè¿›å…ˆå‡º
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// var channel chan string = make(chan string, 3)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// var channel = make(chan string, 3)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>channel</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>string</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>channel</span><span class=p>))</span> <span class=c1>// 0
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=s>&#34;a&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>channel</span><span class=p>))</span> <span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=s>&#34;b&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=s>&#34;c&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=nx>channel</span><span class=p>))</span> <span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=o>&lt;-</span><span class=nx>channel</span><span class=p>)</span>    <span class=c1>// a
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=s>&#34;d&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=o>&lt;-</span><span class=nx>channel</span><span class=p>)</span> <span class=c1>// b
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=o>&lt;-</span><span class=nx>channel</span><span class=p>)</span> <span class=c1>// c
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=o>&lt;-</span><span class=nx>channel</span><span class=p>)</span> <span class=c1>// d
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>5</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=s>&#34;x&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=o>&lt;-</span><span class=nx>channel</span><span class=p>)</span> <span class=c1>// æ­»é” ç®¡é“ä¸ºç©º æ²¡æœ‰ç¨‹åºç»§ç»­äº›æ•°æ®
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å…³é—­ç®¡é“>å…³é—­ç®¡é“</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=err>ç®¡é“å…³é—­ä¹‹å</span> <span class=err>æ— æ³•å†å†™å…¥æ•°æ®</span> <span class=err>æŠ¥é”™ï¼š</span><span class=nx>panic</span><span class=p>:</span> <span class=nx>send</span> <span class=nx>on</span> <span class=nx>closed</span> <span class=nx>channel</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>ç®¡é“å…³é—­ä¹‹å</span> <span class=err>å¯ä»¥è¯»å–æ•°æ®</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>channel</span>
</span></span><span class=line><span class=cl><span class=err>ç¬¬äºŒä¸ªå€¼åˆ¤æ–­æ˜¯å¦è¯»å–å®Œæ•°æ®</span> <span class=nx>false</span><span class=err>æ— æ³•å†è¯»å–ä¸”æ­¤æ—¶</span><span class=nx>v</span><span class=o>==</span><span class=mi>0</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ä¸å¸¦ç¼“å†²åŒºç®¡é“
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>channel</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// bufferChannel := make(chan string, 3)
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>3</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>channel</span> <span class=c1>// okç¬¬äºŒä¸ªå‚æ•° åˆ¤æ–­ç®¡é“æ˜¯å¦å…³é—­
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span> <span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span> <span class=p>=</span> <span class=o>&lt;-</span><span class=nx>channel</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span> <span class=c1>// 0
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…³é—­ç®¡é“ä¹‹å è¿˜èƒ½è¯»å†™å—
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ä¸èƒ½é’ˆå¯¹å…³é—­çš„ç®¡é“å†™æ•°æ® panic: send on closed channel
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// é’ˆå¯¹å·²ç»å…³é—­çš„ç®¡é“å¯ä»¥è¿›è¡Œè¯»å–
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å…³é—­ç®¡é“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nb>close</span><span class=p>(</span><span class=nx>channel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>5</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å¸¦ç¼“å†²åŒºç®¡é“
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>bufferChannel</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>bufferChannel</span> <span class=o>&lt;-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nb>close</span><span class=p>(</span><span class=nx>bufferChannel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1>// bufferChannel &lt;- 2 // å…³é—­ä¹‹åä¸èƒ½å†™ panic: send on closed channel
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>bufferChannel</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span> <span class=c1>// 1 true
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span> <span class=p>=</span> <span class=o>&lt;-</span><span class=nx>bufferChannel</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span> <span class=c1>// 0 false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ç®¡é“å¾ªç¯>ç®¡é“å¾ªç¯</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>channel</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>    <span class=nb>close</span><span class=p>(</span><span class=nx>channel</span><span class=p>)</span> <span class=c1>// ä¸å…³é—­ rangeå¾ªç¯ç®¡é“ä¼šæŠ¥é”™ æ­»é”
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>v</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>channel</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>)</span> <span class=c1>// è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦è¿˜èƒ½å–åˆ°å€¼ false
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ‰‹åŠ¨è‡ªå·±åˆ¤æ–­ç¬¬äºŒä¸ªå€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// for {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     if v, ok := &lt;-channel; ok {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//         fmt.Println(v)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     } else {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//         break
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     }
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// }
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å¹¶å‘ä¸‹è½½å›¾ç‰‡ç¤ºä¾‹>å¹¶å‘ä¸‹è½½å›¾ç‰‡ç¤ºä¾‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sync&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>è¦è·å–ç½‘ç«™å›¾ç‰‡ 1.jpg, 2.jpg, ... , n,jpg
</span></span></span><span class=line><span class=cl><span class=cm>ä¸‹è½½ m.jpg - n.jpg
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æ¨¡æ‹Ÿä¸‹è½½å‡½æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>download</span><span class=p>(</span><span class=nx>wg</span> <span class=o>*</span><span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>defer</span> <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>10</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Millisecond</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;download %s to %s\n&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>path</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>start</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span> <span class=o>:=</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=nx>m</span><span class=p>,</span> <span class=nx>n</span> <span class=o>:=</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=nx>m</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;=</span> <span class=nx>n</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=nf>download</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>wg</span><span class=p>,</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;%d.jpg&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>),</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;download/%d.jpg&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Wait</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;spend time: %s\n&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Sub</span><span class=p>(</span><span class=nx>start</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// é—®é¢˜ï¼šéœ€è¦ä¸‹è½½æ•°é‡Œå¾ˆå¤šæ€ä¹ˆåŠï¼Ÿ ä¸èƒ½åˆ›å»ºä»»æ„æ•°é‡ä¾‹ç¨‹
</span></span></span><span class=line><span class=cl><span class=c1>// å›ºå®šNä¸ªä¾‹ç¨‹åŒºå»è¯·æ±‚ æ¯”å¦‚ æ¯æ¬¡10ä¸ª(Pool)
</span></span></span><span class=line><span class=cl><span class=c1>// åˆ©ç”¨ç®¡é“ï¼šç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ ç”Ÿäº§ä¸‹è½½ä»»åŠ¡ -&gt; æ¯æ¬¡10workeræ¶ˆè´¹
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;sync&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Fiel</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=nx>path</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>download</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>path</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>10</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Millisecond</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;download %s to %s\n&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>path</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>start</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nx>N</span> <span class=o>:=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=nx>m</span><span class=p>,</span> <span class=nx>n</span> <span class=o>:=</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>    <span class=nx>channel</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=nx>Fiel</span><span class=p>,</span> <span class=nx>N</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span> <span class=o>:=</span> <span class=nx>sync</span><span class=p>.</span><span class=nx>WaitGroup</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ç”Ÿäº§è€…
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ç”Ÿæˆä¸‹è½½å›¾ç‰‡çš„ä¾‹ç¨‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>go</span> <span class=kd>func</span><span class=p>(</span><span class=nx>channel</span> <span class=kd>chan</span><span class=o>&lt;-</span> <span class=nx>Fiel</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=nx>m</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;=</span> <span class=nx>n</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=nx>Fiel</span><span class=p>{</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;%d.jpg&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>),</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;download/%d.jpg&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nb>close</span><span class=p>(</span><span class=nx>channel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// æ¶ˆè´¹è€…
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;=</span> <span class=nx>N</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Nä¸ªä¸‹è½½å›¾ç‰‡ä¾‹ç¨‹
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>wg</span><span class=p>.</span><span class=nf>Add</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>go</span> <span class=kd>func</span><span class=p>(</span><span class=nx>channel</span> <span class=o>&lt;-</span><span class=kd>chan</span> <span class=nx>Fiel</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=nx>f</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>channel</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nf>download</span><span class=p>(</span><span class=nx>f</span><span class=p>.</span><span class=nx>name</span><span class=p>,</span> <span class=nx>f</span><span class=p>.</span><span class=nx>path</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=nx>wg</span><span class=p>.</span><span class=nf>Done</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>wg</span><span class=p>.</span><span class=nf>Wait</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Sub</span><span class=p>(</span><span class=nx>start</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ç®¡é“ç±»å‹è¯»å†™ç®¡é“>ç®¡é“ç±»å‹/è¯»å†™ç®¡é“</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// åœ¨æŸä¸ªå‡½æ•°ä¸­åªéœ€è¦è¯» æˆ–è€…åªéœ€è¦å†™çš„æ—¶å€™
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ä¸ºé˜²æ­¢åœ¨åªè¯»å‡½æ•°ä¸­è¯¯å†™ åœ¨åªå†™å‡½æ•°ä¸­è¯¯è¯»
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¯ä»¥å°†ç®¡é“å£°æ˜ä¸º åªè¯» æˆ– åªå†™ç®¡é“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// æ›´å¤šç”¨åœ¨å‡½æ•° å½¢å‚å®šä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>channel</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>,</span> <span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>readChannel</span> <span class=o>&lt;-</span><span class=kd>chan</span> <span class=kt>int</span>  <span class=c1>// åªè¯»ç®¡é“
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>var</span> <span class=nx>writeChannel</span> <span class=kd>chan</span><span class=o>&lt;-</span> <span class=kt>int</span> <span class=c1>// åªå†™ç®¡é“
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>readChannel</span> <span class=p>=</span> <span class=nx>channel</span>
</span></span><span class=line><span class=cl>    <span class=nx>writeChannel</span> <span class=p>=</span> <span class=nx>channel</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>writeChannel</span> <span class=o>&lt;-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nx>writeChannel</span> <span class=o>&lt;-</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=o>&lt;-</span><span class=nx>readChannel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=o>&lt;-</span><span class=nx>readChannel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// var ch chan&lt;- int = make(chan int, 10)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ä¸€èˆ¬ä¸è¿™æ ·å£°æ˜ æ²¡æœ‰æ„ä¹‰
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=selectcase>selectcase</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å¤šä¸ªç®¡é“è¿›è¡Œè¯» æŸä¸€ä¸ªç®¡é“è¯»å–æˆåŠŸå°±æ‰§è¡Œå¯¹åº”é€»è¾‘
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¤šä¸ªç®¡é“è¿›è¡Œå†™ æŸä¸€ä¸ªç®¡é“å†™æˆåŠŸå°±æ‰§è¡Œå¯¹åº”é€»è¾‘
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// å¤šä¸ªç®¡é“ æŸäº›è¿›è¡Œè¯» æŸäº›è¿›è¡Œå†™ æŸä¸ªç®¡é“ è¯»/å†™æˆåŠŸ æ‰§è¡Œå¯¹åº”é€»è¾‘
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>// select case
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>        select {
</span></span></span><span class=line><span class=cl><span class=cm>        case value, ok := &lt;-channel:
</span></span></span><span class=line><span class=cl><span class=cm>        case channel &lt;- value:
</span></span></span><span class=line><span class=cl><span class=cm>        default:
</span></span></span><span class=line><span class=cl><span class=cm>        }
</span></span></span><span class=line><span class=cl><span class=cm>    */</span>
</span></span><span class=line><span class=cl>    <span class=nx>channelV1</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>channelV2</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>3</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>channelV1</span> <span class=o>&lt;-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;wait&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=k>select</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>channelV1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;channelV1:&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>(),</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>channelV2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;channelV2:&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>(),</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span><span class=p>:</span> <span class=c1>// ä¸ä¼šç­‰å¾…(caseæ¡ä»¶éƒ½æ²¡æœ‰è¯»å–æ•°æ® ç›´æ¥æ‰§è¡Œé€»è¾‘) ç›´æ¥default ä¸€èˆ¬ä¸ä¼šåŠ 
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;default&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;over&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ç¤ºä¾‹>ç¤ºä¾‹</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ç”Ÿæˆéšæœº5ä¸ª0 5ä¸ª1ç»„æˆçš„æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>zero</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>one</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>zero</span> <span class=o>&lt;-</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>one</span> <span class=o>&lt;-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>select</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=o>&lt;-</span><span class=nx>one</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=o>&lt;-</span><span class=nx>zero</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Print</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=contextä¸Šä¸‹æ–‡>contextä¸Šä¸‹æ–‡</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// go doc context
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// äº‹ä»¶å¹¿æ’­
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ctx, cannel := context.WithCancel(ctx)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// cannel() =&gt; å¹¿æ’­æ¶ˆæ¯
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>channel</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>int</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>channel</span> <span class=o>&lt;-</span> <span class=nx>i</span>
</span></span><span class=line><span class=cl>            <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nx>i</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// è®©ä¾‹ç¨‹æ‰§è¡Œ10sä¹‹åå°±é€€å‡º
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// æ ¹äº‹ä»¶ åªèƒ½é€šè¿‡ context.Backgroudåˆ›å»º
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// ctx, cannel := context.WithCancel(context.Background())
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// go func() {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     time.Sleep(10 * time.Second)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     fmt.Println(&#34;cannel&#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//     cannel() // è°ƒç”¨cannelå°±ç›¸å½“äºå‘ç®¡é“å†™å…¥ä¸€ä¸ªæ•°æ®
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// }()
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>ctx</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>WithTimeout</span><span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>(),</span> <span class=mi>10</span><span class=o>*</span><span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span> <span class=c1>// 10såä¸­æ–­
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>END</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>select</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=o>&lt;-</span><span class=nx>ctx</span><span class=p>.</span><span class=nf>Done</span><span class=p>():</span> <span class=c1>// ä»ç®¡é“è¯»å–åˆ°æ•° è¯´æ˜ç»“æŸ
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;interrupt&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span> <span class=nx>END</span>
</span></span><span class=line><span class=cl>        <span class=k>case</span> <span class=nx>v</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>channel</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>!</span><span class=nx>ok</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>break</span> <span class=nx>END</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç®€å•çš„socketserver>ç®€å•çš„SocketServer</h3><h4 id=servergo>server.go</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;net&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç›‘å¬IPå’Œç«¯å£
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>addr</span> <span class=o>:=</span> <span class=s>&#34;:9999&#34;</span> <span class=c1>// &#34;0.0.0.0:9999&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>listener</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>net</span><span class=p>.</span><span class=nf>Listen</span><span class=p>(</span><span class=s>&#34;tcp&#34;</span><span class=p>,</span> <span class=nx>addr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è·å–å®¢æˆ·ç«¯è¿æ¥
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>conn</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>listener</span><span class=p>.</span><span class=nf>Accept</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>10</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;clientï¼š&#34;</span><span class=p>,</span> <span class=nx>conn</span><span class=p>.</span><span class=nf>RemoteAddr</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=c1>// äº¤äº’å¤„ç†
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprintf</span><span class=p>(</span><span class=nx>conn</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Format</span><span class=p>(</span><span class=s>&#34;2006-01-02 15:04:05&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=c1>// å…³é—­è¿æ¥
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nx>conn</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// å…³é—­æœåŠ¡å™¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>listener</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 2021/08/27 11:41:26 clientï¼š 127.0.0.1:58934
</span></span></span><span class=line><span class=cl><span class=c1>// 2021/08/27 11:41:36 clientï¼š 127.0.0.1:58935
</span></span></span><span class=line><span class=cl><span class=c1>// å¤„ç†ä¸¤ä¸ªå®¢æˆ·ç«¯è¿æ¥ é¡ºåºæ‰§è¡Œæ²¡æœ‰å¹¶å‘ ç›¸å·®10s
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// å¯åŠ¨åç¨‹ å¤„ç†å®¢æˆ·ç«¯è¿æ¥ æ­¤æ—¶æœåŠ¡ç«¯å¹¶å‘å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mi>10</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;clientï¼š&#34;</span><span class=p>,</span> <span class=nx>conn</span><span class=p>.</span><span class=nf>RemoteAddr</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=c1>// äº¤äº’å¤„ç†
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Fprintf</span><span class=p>(</span><span class=nx>conn</span><span class=p>,</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Format</span><span class=p>(</span><span class=s>&#34;2006-01-02 15:04:05&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å…³é—­è¿æ¥
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>conn</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=clientgo>client.go</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;net&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è¿æ¥æœåŠ¡å™¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>addr</span> <span class=o>:=</span> <span class=s>&#34;127.0.0.1:9999&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>conn</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>net</span><span class=p>.</span><span class=nf>Dial</span><span class=p>(</span><span class=s>&#34;tcp&#34;</span><span class=p>,</span> <span class=nx>addr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>start</span> <span class=o>:=</span> <span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>// äº¤äº’
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>bytes</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=mi>1024</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nx>n</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>conn</span><span class=p>.</span><span class=nf>Read</span><span class=p>(</span><span class=nx>bytes</span><span class=p>)</span> <span class=c1>// n ä»byteé‡Œé¢è¯»çš„æ•°é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>bytes</span><span class=p>[:</span><span class=nx>n</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Now</span><span class=p>().</span><span class=nf>Sub</span><span class=p>(</span><span class=nx>start</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å…³é—­è¿æ¥
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>conn</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=goä½¿ç”¨ç§æœ‰ä»“åº“>Goä½¿ç”¨ç§æœ‰ä»“åº“</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>1. é…ç½®GOPRIVATEå˜é‡
</span></span><span class=line><span class=cl>æ¯”å¦‚: go env -w <span class=nv>GOPRIVATE</span><span class=o>=</span>gitee.com
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2. é…ç½®SSHå¯†é’¥<span class=o>(</span>æ­¥éª¤çœç•¥<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>3. ä½¿ç”¨sshæ›¿æ¢httpsæ‹‰å–ä¾èµ–
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ç¯å¢ƒå˜é‡$GOPRIVATE éœ€è¦æå‰export</span>
</span></span><span class=line><span class=cl>git config --global url.<span class=s2>&#34;git@</span><span class=nv>$GOPRIVATE</span><span class=s2>:&#34;</span>.insteadOf <span class=s2>&#34;https://</span><span class=nv>$GOPRIVATE</span><span class=s2>&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=reference-link>Reference Link</h2><ul><li><p>Blogs</p><ul><li><a class=link href=https://sagikazarmark.hu/blog/decoding-custom-formats-with-viper/ target=_blank rel=noopener>ä½¿ç”¨Viperè§£ç è‡ªå®šä¹‰æ ¼å¼</a></li><li><a class=link href=https://gosamples.dev/string-padding/ target=_blank rel=noopener>String padding in Go</a></li><li><a class=link href=https://hashnode.com/post/set-indentation-on-new-golang-yaml-v3-library-ckbrwl63001skn8s1lj3jmtln target=_blank rel=noopener>Set indentaton on yaml.v3</a></li><li><a class=link href=https://ueokande.github.io/go-slice-tricks/ target=_blank rel=noopener>Go slice tricks cheat sheet</a></li></ul></li><li><p>Github Issues</p><ul><li><a class=link href=https://github.com/go-yaml/yaml/issues/13 target=_blank rel=noopener>YAMLåº“å…³äºç­‰åŒjson.RawMessageçš„Issue</a></li></ul></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/cloud-native/>Cloud Native</a>
<a href=/tags/golang/>Golang</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/go-generics/><div class=article-details><h2 class=article-title>GO Generics</h2></div></a></article><article><a href=/p/go-design-patterns/><div class=article-details><h2 class=article-title>GO DESIGN PATTERNS</h2></div></a></article><article><a href=/p/go-functional-options/><div class=article-details><h2 class=article-title>GO FUNCTIONAL OPTIONS</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=ilolicon/ilolicon.github.io issue-term=pathname crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2017 -
2025 ilolicon's Blog</section><section class=powerby>VicissitudeğŸ³<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.21.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>